{"config":{"lang":["en","ru"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!","text":"<p>\u041f\u0435\u0440\u0435\u0434 \u0432\u0430\u043c\u0438 \u0442\u043e, \u0447\u0442\u043e \u044f, Groosha, \u043d\u0430\u0437\u044b\u0432\u0430\u044e \u043a\u043d\u0438\u0433\u043e\u0439 \u043f\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044e Telegram-\u0431\u043e\u0442\u043e\u0432 \u043d\u0430 \u044f\u0437\u044b\u043a\u0435 Python \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e  \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u0430 aiogram 3.x. \u0415\u0451 [\u043a\u043d\u0438\u0433\u0443] \u043c\u043e\u0436\u043d\u043e \u0432\u043e\u0441\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u043a\u0430\u043a \u0443\u0447\u0435\u0431\u043d\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b,  \u043e\u0431\u0440\u0430\u0449\u0430\u044f\u0441\u044c \u043a \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u043c \u0433\u043b\u0430\u0432\u0430\u043c \u043f\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438, \u043d\u043e \u0434\u043b\u044f \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u043f\u0440\u043e\u0447\u0442\u0435\u043d\u0438\u044f \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0432 \u0442\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c  \u0443\u043a\u0430\u0437\u0430\u043d\u044b \u0433\u043b\u0430\u0432\u044b \u0441\u043b\u0435\u0432\u0430 \u043e\u0442 \u044d\u0442\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430.</p> <p>\u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0432\u044b \u0440\u0430\u043d\u0435\u0435 \u0447\u0438\u0442\u0430\u043b\u0438 \u043f\u0435\u0440\u0432\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e,  \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u0443\u044e \u0432 2015-2017 \u0433\u043e\u0434\u0430\u0445 \u0434\u043b\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 pyTelegramBotAPI. \u0421 \u0442\u0435\u0445 \u043f\u043e\u0440  \u043c\u043d\u043e\u0433\u043e \u0447\u0435\u0433\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c \u043a\u0430\u043a \u0432 Python, \u0442\u0430\u043a \u0438 \u0432 Bot API, \u0434\u0430 \u0438 \u044f, \u043a\u0430\u043a \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0441\u0442, \u0441\u0442\u0430\u043b \u0441\u0438\u043b\u044c\u043d\u0435\u0435. \u0412 2019 \u0433\u043e\u0434\u0443 \u043f\u0435\u0440\u0435\u0448\u0451\u043b \u043d\u0430  aiogram, \u043e \u0447\u0451\u043c \u043d\u0435 \u0436\u0430\u043b\u0435\u044e, \u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043b \u0433\u0430\u0439\u0434 \u043f\u043e \u0431\u043e\u0442\u0430\u043c \u0443\u0436\u0435 \u043f\u043e\u0434 aiogram, \u043d\u043e \u0432\u0435\u0440\u0441\u0438\u0438 2.x.</p> <p>\u0412 \u044d\u0442\u043e\u0439, \u043e\u0431\u043d\u043e\u0432\u043b\u0451\u043d\u043d\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0438 \u043a\u043d\u0438\u0433\u0438, \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a aiogram 3.\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0430 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u044d\u0442\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430  \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 beta-\u0432\u0435\u0440\u0441\u0438\u0438, \u043e\u0434\u043d\u0430\u043a\u043e \u0443\u0436\u0435 \u0432\u043f\u043e\u043b\u043d\u0435 \u0433\u043e\u0442\u043e\u0432\u043e\u0439 \u0434\u043b\u044f \u043f\u043e\u0432\u0441\u0435\u0434\u043d\u0435\u0432\u043d\u043e\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f.</p> <p>\u0414\u043b\u044f \u043a\u043e\u0433\u043e \u044d\u0442\u0430 \u043a\u043d\u0438\u0433\u0430? \u041f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u0432\u044b \u0437\u043d\u0430\u043a\u043e\u043c\u044b \u0441 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0432 \u0446\u0435\u043b\u043e\u043c \u0438 \u044f\u0437\u044b\u043a\u043e\u043c Python \u0432 \u0447\u0430\u0441\u0442\u043d\u043e\u0441\u0442\u0438, \u0437\u043d\u0430\u0435\u0442\u0435, \u0447\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \"venv\" \u0438 \"pip\",  \u0430 \u0442\u0430\u043a\u0436\u0435 \u0441\u043f\u043e\u0441\u043e\u0431\u043d\u044b \u043f\u043e\u043d\u044f\u0442\u044c \u0438 \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c \"\u0434\u0435\u0442\u0441\u043a\u0438\u0435\" \u043e\u0448\u0438\u0431\u043a\u0438 \u0432\u0440\u043e\u0434\u0435 SyntaxError \u0438 IndentationError. \u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0432 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0435 \u043f\u0430\u0440\u0443 \u043a\u0443\u0440\u0441\u043e\u0432 \u043f\u043e Python, \u043f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0438\u0445, \u0430 \u043b\u0438\u0448\u044c \u0437\u0430\u0442\u0435\u043c \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0439\u0442\u0435\u0441\u044c \u0437\u0430 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0431\u043e\u0442\u043e\u0432, \u0441\u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0442\u0435 \u0441\u0435\u0431\u0435 \u0432\u0440\u0435\u043c\u044f \u0438 \u043d\u0435\u0440\u0432\u043d\u044b\u0435 \u043a\u043b\u0435\u0442\u043a\u0438.</p> <p>\u0412\u043e \u0432\u0441\u0435\u0445 \u0433\u043b\u0430\u0432\u0430\u0445 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u044b \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0447\u0442\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u0441\u0435\u043c\u0435\u0439\u0441\u0442\u0432\u0430 GNU/Linux,  \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, Ubuntu, Python 3.9 (\u0432 Virtual Environment) \u0438 \u0441\u0440\u0435\u0434\u0443 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438  PyCharm, \u0432\u043f\u0440\u043e\u0447\u0435\u043c, \u043d\u0435 \u0432\u043e\u0437\u0431\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u0438 Visual Studio Code. \u041f\u0440\u0438 \u044d\u0442\u043e\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 Windows \u043d\u0435 \u0432 \u043f\u0440\u043e\u043b\u0451\u0442\u0435: \u0432\u0441\u0451, \u0447\u0442\u043e \u043a\u0430\u0441\u0430\u0435\u0442\u0441\u044f \u043a\u043e\u0434\u0430, \u0431\u0443\u0434\u0435\u0442 \u0441\u043f\u043e\u043a\u043e\u0439\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0438 \u0443 \u0432\u0430\u0441, \u0430 \u0434\u043b\u044f \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0445 \u0432\u0435\u0449\u0435\u0439 \u0432\u0440\u043e\u0434\u0435 systemd \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Ubuntu \u0432 VirtualBox.</p> <p>\u0422\u0435\u043a\u0441\u0442 \u043a\u043d\u0438\u0433\u0438 \u0438 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0442\u0435\u043a\u0441\u0442\u044b \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u043c \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438  \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u044b, \u0438\u0437\u0434\u0430\u044e\u0442\u0441\u044f \u043f\u043e\u0434 \u043b\u0438\u0446\u0435\u043d\u0437\u0438\u0435\u0439 MIT \u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043b\u044e\u0431\u043e\u043c\u0443 \u0434\u043b\u044f \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f, \u043c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043b\u044e\u0431\u044b\u0445 \u0446\u0435\u043b\u044f\u0445. </p> <p>\u0414\u043e\u043d\u0430\u0442\u044b \u041d\u0430 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438 \u0430\u043a\u0442\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044e \u043a\u043d\u0438\u0433\u0438 \u044f \u043f\u043e\u0442\u0440\u0430\u0442\u0438\u043b \u043e\u0447\u0435\u043d\u044c \u043c\u043d\u043e\u0433\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0441\u0438\u043b. \u0415\u0441\u043b\u0438 \u0432\u044b \u0438\u0437 \u0420\u043e\u0441\u0441\u0438\u0438 \u0438 \u0445\u043e\u0442\u0438\u0442\u0435  \u043e\u0442\u0431\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u0438\u0442\u044c \u0430\u0432\u0442\u043e\u0440\u0430 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044c\u043d\u043e, \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u044d\u0442\u043e \u0447\u0435\u0440\u0435\u0437 \u042e.Money  (\u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0439\u0442\u0435 \u0432 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f\u0445, \u0447\u0442\u043e \u044d\u0442\u043e \u0437\u0430 \u043a\u043d\u0438\u0433\u0443). \u041d\u0430 \u0432\u0441\u044f\u043a\u0438\u0439 \u0441\u043b\u0443\u0447\u0430\u0439 \u0443\u0442\u043e\u0447\u043d\u044e, \u0447\u0442\u043e \u043b\u044e\u0431\u043e\u0435 \u043f\u043e\u0436\u0435\u0440\u0442\u0432\u043e\u0432\u0430\u043d\u0438\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0434\u043e\u0431\u0440\u043e\u0432\u043e\u043b\u044c\u043d\u044b\u043c \u0438 \u043d\u0435 \u0434\u0430\u0451\u0442 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u043f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432, \u043a\u0440\u043e\u043c\u0435 \u043f\u043b\u044e\u0441\u0438\u043a\u0430 \u0432 \u043a\u0430\u0440\u043c\u0443.</p> <p>\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u0438 \u0417\u0430 \u0442\u043e, \u0447\u0442\u043e \u044d\u0442\u0430 \u043a\u043d\u0438\u0433\u0430 \u0432 \u0435\u0451 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u0432\u0438\u0434\u0435 \u0432\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u0438 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e \u0441\u0435\u0439 \u0434\u0435\u043d\u044c, \u0441\u043f\u0430\u0441\u0438\u0431\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u0435\u043b\u044e aiogram  Alex JRootJunior, \u0447\u0430\u0442\u0438\u043a\u0443 @aiogram_ru,  \u043c\u043e\u0435\u043c\u0443 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c\u0443 \u0447\u0430\u0442\u0438\u043a\u0443, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0432\u0430\u043c, \u0434\u043e\u0440\u043e\u0433\u0438\u043c \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f\u043c!</p>"},{"location":"buttons/","title":"\u041a\u043d\u043e\u043f\u043a\u0438","text":"<p>\u041e \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u0435\u0440\u0441\u0438\u0439</p> <p>\u041a\u043e\u0434 \u0432 \u0433\u043b\u0430\u0432\u0430\u0445 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 aiogram 3.0 beta3. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438.</p> <p>\u0412 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435 \u043c\u044b \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u043c\u0441\u044f \u0441 \u0442\u0430\u043a\u043e\u0439 \u0437\u0430\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0444\u0438\u0447\u0435\u0439 Telegram-\u0431\u043e\u0442\u043e\u0432, \u043a\u0430\u043a \u043a\u043d\u043e\u043f\u043a\u0438. \u041f\u0440\u0435\u0436\u0434\u0435 \u0432\u0441\u0435\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c  \u043f\u0443\u0442\u0430\u043d\u0438\u0446\u044b, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043c\u0441\u044f \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f\u043c\u0438. \u0422\u043e, \u0447\u0442\u043e \u0446\u0435\u043f\u043b\u044f\u0435\u0442\u0441\u044f \u043a \u043d\u0438\u0437\u0443 \u044d\u043a\u0440\u0430\u043d\u0430 \u0432\u0430\u0448\u0435\u0433\u043e \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430, \u0431\u0443\u0434\u0435\u043c \u043d\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043e\u0431\u044b\u0447\u043d\u044b\u043c\u0438  \u043a\u043d\u043e\u043f\u043a\u0430\u043c\u0438, \u0430 \u0442\u043e, \u0447\u0442\u043e \u0446\u0435\u043f\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c, \u043d\u0430\u0437\u043e\u0432\u0451\u043c \u0438\u043d\u043b\u0430\u0439\u043d-\u043a\u043d\u043e\u043f\u043a\u0430\u043c\u0438. \u0415\u0449\u0451 \u0440\u0430\u0437 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439:  </p> <p></p>"},{"location":"buttons/#reply-buttons","title":"\u041e\u0431\u044b\u0447\u043d\u044b\u0435 \u043a\u043d\u043e\u043f\u043a\u0438","text":""},{"location":"buttons/#reply-as-text","title":"\u041a\u043d\u043e\u043f\u043a\u0438 \u043a\u0430\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u044b","text":"<p>\u042d\u0442\u043e\u0442 \u0432\u0438\u0434 \u043a\u043d\u043e\u043f\u043e\u043a \u043f\u043e\u044f\u0432\u0438\u043b\u0441\u044f \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 Bot API \u0432 \u0434\u0430\u043b\u0451\u043a\u043e\u043c 2015 \u0433\u043e\u0434\u0443 \u0438 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0431\u043e\u0439 \u043d\u0435 \u0447\u0442\u043e \u0438\u043d\u043e\u0435, \u043a\u0430\u043a \u0448\u0430\u0431\u043b\u043e\u043d\u044b \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439  (\u0437\u0430 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043e\u0441\u043e\u0431\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u0435\u0432, \u043d\u043e \u043e \u043d\u0438\u0445 \u043f\u043e\u0437\u0436\u0435). \u041f\u0440\u0438\u043d\u0446\u0438\u043f \u043f\u0440\u043e\u0441\u0442\u043e\u0439: \u0447\u0442\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043e \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0435, \u0442\u043e \u0438 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e  \u0432 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0447\u0430\u0442. \u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0430\u0436\u0430\u0442\u0438\u0435 \u0442\u0430\u043a\u043e\u0439 \u043a\u043d\u043e\u043f\u043a\u0438, \u0431\u043e\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0440\u0430\u0441\u043f\u043e\u0437\u043d\u0430\u0432\u0430\u0442\u044c \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. </p> <p>\u041d\u0430\u043f\u0438\u0448\u0435\u043c \u0445\u044d\u043d\u0434\u043b\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/start</code> \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u0434\u0432\u0443\u043c\u044f \u043a\u043d\u043e\u043f\u043a\u0430\u043c\u0438:</p> <pre><code>@dp.message(commands=\"start\")\nasync def cmd_start(message: types.Message):\n    kb = [\n        [types.KeyboardButton(text=\"\u0421 \u043f\u044e\u0440\u0435\u0448\u043a\u043e\u0439\")],\n        [types.KeyboardButton(text=\"\u0411\u0435\u0437 \u043f\u044e\u0440\u0435\u0448\u043a\u0438\")]\n    ]\n    keyboard = types.ReplyKeyboardMarkup(keyboard=kb)\n    await message.answer(\"\u041a\u0430\u043a \u043f\u043e\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u043e\u0442\u043b\u0435\u0442\u044b?\", reply_markup=keyboard)\n</code></pre> <p>\u041d\u0435\u0441\u043c\u043e\u0442\u0440\u044f \u043d\u0430 \u0442\u043e, \u0447\u0442\u043e Telegram Bot API \u0434\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c  \u043f\u0440\u043e\u0441\u0442\u043e \u0441\u0442\u0440\u043e\u043a\u0438 \u0432\u043c\u0435\u0441\u0442\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 <code>KeyboardButton</code>, \u043f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 aiogram 3.x \u0432\u044b\u043a\u0438\u043d\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0443  \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438 \u0438 \u044d\u0442\u043e \u043d\u0435 \u0431\u0430\u0433, \u0430 \u0444\u0438\u0447\u0430. \u0416\u0438\u0432\u0438\u0442\u0435 \u0442\u0435\u043f\u0435\u0440\u044c \u0441 \u044d\u0442\u0438\u043c \ud83e\udd37\u200d\u2642\ufe0f</p> <p>\u0427\u0442\u043e \u0436, \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c \u0431\u043e\u0442\u0430 \u0438 \u043e\u0431\u0430\u043b\u0434\u0435\u0435\u043c \u043e\u0442 \u0433\u0440\u043e\u043c\u0430\u0434\u043d\u044b\u0445 \u043a\u043d\u043e\u043f\u043e\u043a:</p> <p></p> <p>\u041a\u0430\u043a-\u0442\u043e \u043d\u0435\u043a\u0440\u0430\u0441\u0438\u0432\u043e. \u0412\u043e-\u043f\u0435\u0440\u0432\u044b\u0445, \u0445\u043e\u0447\u0435\u0442\u0441\u044f \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0438 \u043f\u043e\u043c\u0435\u043d\u044c\u0448\u0435, \u0430 \u0432\u043e-\u0432\u0442\u043e\u0440\u044b\u0445, \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u044c \u0438\u0445 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e. \u041f\u043e\u0447\u0435\u043c\u0443 \u0432\u043e\u043e\u0431\u0449\u0435 \u043e\u043d\u0438 \u0442\u0430\u043a\u0438\u0435 \u0431\u043e\u043b\u044c\u0448\u0438\u0435? \u0414\u0435\u043b\u043e \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u00ab\u043a\u043d\u043e\u043f\u043e\u0447\u043d\u0430\u044f\u00bb \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0437\u0430\u043d\u0438\u043c\u0430\u0442\u044c \u043d\u0430 \u0441\u043c\u0430\u0440\u0442\u0444\u043e\u043d\u0430\u0445 \u0441\u0442\u043e\u043b\u044c\u043a\u043e  \u0436\u0435 \u043c\u0435\u0441\u0442\u0430, \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438 \u043e\u0431\u044b\u0447\u043d\u0430\u044f \u0431\u0443\u043a\u0432\u0435\u043d\u043d\u0430\u044f. \u0414\u043b\u044f \u0443\u043c\u0435\u043d\u044c\u0448\u0435\u043d\u0438\u044f \u043a\u043d\u043e\u043f\u043e\u043a \u043a \u043e\u0431\u044a\u0435\u043a\u0442\u0443 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b \u043d\u0430\u0434\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439  \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>resize_keyboard=True</code>. \u041d\u043e \u043a\u0430\u043a \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043d\u043e\u043f\u043a\u0438 \u043d\u0430 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u044b\u0435? \u0421 \u0442\u043e\u0447\u043a\u0438 \u0437\u0440\u0435\u043d\u0438\u044f Bot API, \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430 \u2014 \u044d\u0442\u043e  \u043c\u0430\u0441\u0441\u0438\u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u043e\u0432 \u043a\u043d\u043e\u043f\u043e\u043a, \u0430 \u0435\u0441\u043b\u0438 \u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044c \u043f\u0440\u043e\u0449\u0435, \u043c\u0430\u0441\u0441\u0438\u0432 \u0440\u044f\u0434\u043e\u0432.  \u041f\u0435\u0440\u0435\u043f\u0438\u0448\u0435\u043c \u043d\u0430\u0448 \u043a\u043e\u0434, \u0447\u0442\u043e\u0431\u044b \u0431\u044b\u043b\u043e \u043a\u0440\u0430\u0441\u0438\u0432\u043e, \u0430 \u0434\u043b\u044f  \u043f\u0443\u0449\u0435\u0439 \u0432\u0430\u0436\u043d\u043e\u0441\u0442\u0438 \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>input_field_placeholder</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0437\u0430\u043c\u0435\u043d\u0438\u0442 \u0442\u0435\u043a\u0441\u0442 \u0432 \u043f\u0443\u0441\u0442\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435 \u0432\u0432\u043e\u0434\u0430,  \u043a\u043e\u0433\u0434\u0430 \u0430\u043a\u0442\u0438\u0432\u043d\u0430 \u043e\u0431\u044b\u0447\u043d\u0430\u044f \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430:</p> <pre><code>@dp.message(commands=\"start\")\nasync def cmd_start(message: types.Message):\n    kb = [\n        [\n            types.KeyboardButton(text=\"\u0421 \u043f\u044e\u0440\u0435\u0448\u043a\u043e\u0439\"),\n            types.KeyboardButton(text=\"\u0411\u0435\u0437 \u043f\u044e\u0440\u0435\u0448\u043a\u0438\")\n        ],\n    ]\n    keyboard = types.ReplyKeyboardMarkup(\n        keyboard=kb,\n        resize_keyboard=True,\n        input_field_placeholder=\"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431 \u043f\u043e\u0434\u0430\u0447\u0438\"\n    )\n    await message.answer(\"\u041a\u0430\u043a \u043f\u043e\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u043e\u0442\u043b\u0435\u0442\u044b?\", reply_markup=keyboard)\n</code></pre> <p>\u0421\u043c\u043e\u0442\u0440\u0438\u043c \u2014 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043a\u0440\u0430\u0441\u0438\u0432\u043e:</p> <p></p> <p>\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u043d\u0430\u0443\u0447\u0438\u0442\u044c \u0431\u043e\u0442\u0430 \u0440\u0435\u0430\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u043d\u0430\u0436\u0430\u0442\u0438\u0435 \u0442\u0430\u043a\u0438\u0445 \u043a\u043d\u043e\u043f\u043e\u043a. \u041a\u0430\u043a \u0443\u0436\u0435 \u0431\u044b\u043b\u043e \u0441\u043a\u0430\u0437\u0430\u043d\u043e \u0432\u044b\u0448\u0435, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443  \u043d\u0430 \u043f\u043e\u043b\u043d\u043e\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u0430. \u0421\u0434\u0435\u043b\u0430\u0435\u043c \u044d\u0442\u043e \u0434\u0432\u0443\u043c\u044f \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u043c\u0438: \u0447\u0435\u0440\u0435\u0437 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440 <code>Text</code> \u0438 \u043e\u0431\u044b\u0447\u043d\u043e\u0439 \u043b\u044f\u043c\u0431\u0434\u043e\u0439  (\u043b\u044f\u043c\u0431\u0434\u0443 \u043f\u043e\u0441\u0442\u0430\u0440\u0430\u0435\u043c\u0441\u044f \u0434\u0430\u043b\u0435\u0435 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u0432 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0433\u043b\u0430\u0432\u0430\u0445 \u0435\u0451 \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u043d\u0430 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043c\u0430\u0433\u0438\u0438):</p> <pre><code># \u043d\u043e\u0432\u044b\u0439 \u0438\u043c\u043f\u043e\u0440\u0442!\nfrom aiogram.dispatcher.filters import Text\n\n@dp.message(Text(text=\"\u0421 \u043f\u044e\u0440\u0435\u0448\u043a\u043e\u0439\"))\nasync def with_puree(message: types.Message):\n    await message.reply(\"\u041e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440!\")\n\n@dp.message(lambda message: message.text == \"\u0411\u0435\u0437 \u043f\u044e\u0440\u0435\u0448\u043a\u0438\")\nasync def without_puree(message: types.Message):\n    await message.reply(\"\u0422\u0430\u043a \u043d\u0435\u0432\u043a\u0443\u0441\u043d\u043e!\")\n</code></pre> <p></p> <p>\u0427\u0442\u043e\u0431\u044b \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0438, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u043e \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u00ab\u0443\u0434\u0430\u043b\u044f\u044e\u0449\u0435\u0439\u00bb \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u043e\u0439 \u0442\u0438\u043f\u0430  <code>ReplyKeyboardRemove</code>. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: <code>await message.reply(\"\u041e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440!\", reply_markup=types.ReplyKeyboardRemove())</code></p>"},{"location":"buttons/#reply-builder","title":"Keyboard Builder","text":"<p>\u0414\u043b\u044f \u0431\u043e\u043b\u0435\u0435 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043a\u043d\u043e\u043f\u043e\u043a \u043c\u043e\u0436\u043d\u043e \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u0431\u043e\u0440\u0449\u0438\u043a\u043e\u043c \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440. \u041d\u0430\u043c \u043f\u0440\u0438\u0433\u043e\u0434\u044f\u0442\u0441\u044f  \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043c\u0435\u0442\u043e\u0434\u044b:</p> <ul> <li><code>add(&lt;KeyboardButton&gt;)</code> \u2014 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043d\u043e\u043f\u043a\u0443 \u0432 \u043f\u0430\u043c\u044f\u0442\u044c \u0441\u0431\u043e\u0440\u0449\u0438\u043a\u0430;</li> <li><code>adjust(int1, int2, int3...)</code> \u2014 \u0434\u0435\u043b\u0430\u0435\u0442 \u0441\u0442\u0440\u043e\u043a\u0438 \u043f\u043e <code>int1, int2, int3...</code> \u043a\u043d\u043e\u043f\u043e\u043a;</li> <li><code>as_markup()</code> \u2014 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0433\u043e\u0442\u043e\u0432\u044b\u0439 \u043e\u0431\u044a\u0435\u043a\u0442 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b;</li> <li><code>button(&lt;params&gt;)</code> \u2014 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043a\u043d\u043e\u043f\u043a\u0443 \u0441 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438, \u0442\u0438\u043f \u043a\u043d\u043e\u043f\u043a\u0438 (Reply \u0438\u043b\u0438 Inline) \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438.</li> </ul> <p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u0440\u043e\u043d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443 \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c 4\u00d74:</p> <pre><code># \u043d\u043e\u0432\u044b\u0439 \u0438\u043c\u043f\u043e\u0440\u0442!\nfrom aiogram.utils.keyboard import ReplyKeyboardBuilder\n\n@dp.message(commands=\"reply_builder\")\nasync def reply_builder(message: types.Message):\n    builder = ReplyKeyboardBuilder()\n    for i in range(1, 17):\n        builder.add(types.KeyboardButton(text=str(i)))\n    builder.adjust(4)\n    await message.answer(\n        \"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e:\",\n        reply_markup=builder.as_markup(resize_keyboard=True),\n    )\n</code></pre> <p></p> <p>\u0423 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u043e\u0431\u044b\u0447\u043d\u043e\u0439 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b \u0435\u0441\u0442\u044c \u0435\u0449\u0451 \u0434\u0432\u0435 \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0445 \u043e\u043f\u0446\u0438\u0438:  <code>one_time_keyboard</code> \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0441\u043a\u0440\u044b\u0442\u0438\u044f \u043a\u043d\u043e\u043f\u043e\u043a \u043f\u043e\u0441\u043b\u0435 \u043d\u0430\u0436\u0430\u0442\u0438\u044f \u0438 <code>selective</code> \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b  \u043b\u0438\u0448\u044c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430\u043c \u0433\u0440\u0443\u043f\u043f\u044b. \u0418\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u0434\u043b\u044f \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0433\u043e \u0438\u0437\u0443\u0447\u0435\u043d\u0438\u044f.</p>"},{"location":"buttons/#reply-special","title":"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u043e\u0431\u044b\u0447\u043d\u044b\u0435 \u043a\u043d\u043e\u043f\u043a\u0438","text":"<p>\u041d\u0430 \u043c\u043e\u043c\u0435\u043d\u0442 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u044b \u0432 Telegram \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0445 \u0432\u0438\u0434\u0430 \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u043a\u043d\u043e\u043f\u043e\u043a, \u043d\u0435 \u044f\u0432\u043b\u044f\u044e\u0449\u0438\u0445\u0441\u044f  \u043e\u0431\u044b\u0447\u043d\u044b\u043c\u0438 \u0448\u0430\u0431\u043b\u043e\u043d\u0430\u043c\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439. \u042d\u0442\u043e \u043a\u043d\u043e\u043f\u043a\u0438 \u0434\u043b\u044f:</p> <ul> <li>\u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u0438 (\u0444\u043b\u0430\u0433 <code>request_location</code>); </li> <li>\u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0441\u0432\u043e\u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430 \u0441 \u043d\u043e\u043c\u0435\u0440\u043e\u043c \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 (\u0444\u043b\u0430\u0433 <code>request_contact</code>); </li> <li>\u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u043f\u0440\u043e\u0441\u0430/\u0432\u0438\u043a\u0442\u043e\u0440\u0438\u043d\u044b (\u043e\u0431\u044a\u0435\u043a\u0442 KeyboardButtonPollType). </li> </ul> <p>\u0414\u043b\u044f \u043f\u0435\u0440\u0432\u044b\u0445 \u0434\u0432\u0443\u0445  \u0442\u0438\u043f\u043e\u0432 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0431\u0443\u043b\u0435\u0432\u044b\u0439 \u0444\u043b\u0430\u0433, \u0430 \u0434\u043b\u044f \u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0438 \u0432\u0438\u043a\u0442\u043e\u0440\u0438\u043d \u043d\u0443\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0442\u0438\u043f <code>KeyboardButtonPollType</code>  \u0438, \u043f\u043e \u0436\u0435\u043b\u0430\u043d\u0438\u044e, \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0438\u043f \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0435\u043c\u043e\u0433\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430.</p> <p>\u0412\u043f\u0440\u043e\u0447\u0435\u043c, \u043f\u0440\u043e\u0449\u0435 \u043e\u0434\u0438\u043d \u0440\u0430\u0437 \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u043a\u043e\u0434: <pre><code>@dp.message(commands=[\"special_buttons\"])\nasync def cmd_special_buttons(message: types.Message):\n    builder = ReplyKeyboardBuilder()\n    # \u043c\u0435\u0442\u043e\u0434 row \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u044f\u0432\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u044f\u0434\n    # \u0438\u0437 \u043e\u0434\u043d\u043e\u0439 \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043a\u043d\u043e\u043f\u043e\u043a. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0435\u0440\u0432\u044b\u0439 \u0440\u044f\u0434\n    # \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u0434\u0432\u0443\u0445 \u043a\u043d\u043e\u043f\u043e\u043a...\n    builder.row(\n        types.KeyboardButton(text=\"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044e\", request_location=True),\n        types.KeyboardButton(text=\"\u0417\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u043a\u043e\u043d\u0442\u0430\u043a\u0442\", request_contact=True)\n    )\n    # ... \u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u0438\u0437 \u043e\u0434\u043d\u043e\u0439\n    builder.row(types.KeyboardButton(\n        text=\"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0432\u0438\u043a\u0442\u043e\u0440\u0438\u043d\u0443\",\n        request_poll=types.KeyboardButtonPollType(type=\"quiz\"))\n    )\n    await message.answer(\n        \"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435:\",\n        reply_markup=builder.as_markup(resize_keyboard=True),\n    )\n</code></pre></p> <p></p>"},{"location":"buttons/#inline-buttons","title":"\u0418\u043d\u043b\u0430\u0439\u043d-\u043a\u043d\u043e\u043f\u043a\u0438","text":""},{"location":"buttons/#url-buttons","title":"URL-\u043a\u043d\u043e\u043f\u043a\u0438","text":"<p>\u0412 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 \u043e\u0442 \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u043a\u043d\u043e\u043f\u043e\u043a, \u0438\u043d\u043b\u0430\u0439\u043d\u043e\u0432\u044b\u0435 \u0446\u0435\u043f\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0435 \u043a \u043d\u0438\u0437\u0443 \u044d\u043a\u0440\u0430\u043d\u0430, \u0430 \u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044e, \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0431\u044b\u043b\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u044b.  \u0412 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435 \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0434\u0432\u0430 \u0442\u0438\u043f\u0430 \u0442\u0430\u043a\u0438\u0445 \u043a\u043d\u043e\u043f\u043e\u043a: URL \u0438 Callback. \u0415\u0449\u0451 \u043e\u0434\u0438\u043d \u2014 Switch \u2014 \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d  \u0432 \u0433\u043b\u0430\u0432\u0435 \u043f\u0440\u043e \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c.</p> <p>Login- \u0438 Pay-\u043a\u043d\u043e\u043f\u043a\u0438 \u0432 \u043a\u043d\u0438\u0433\u0435 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0435 \u0431\u0443\u0434\u0443\u0442 \u0432\u043e\u043e\u0431\u0449\u0435. \u0415\u0441\u043b\u0438 \u0443 \u043a\u043e\u0433\u043e-\u0442\u043e \u0435\u0441\u0442\u044c \u0436\u0435\u043b\u0430\u043d\u0438\u0435 \u043f\u043e\u043c\u043e\u0447\u044c \u0445\u043e\u0442\u044f \u0431\u044b  \u0441 \u0440\u0430\u0431\u043e\u0447\u0438\u043c \u043a\u043e\u0434\u043e\u043c \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0438\u043b\u0438 \u043e\u043f\u043b\u0430\u0442\u044b, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 Pull Request \u043d\u0430  GitHub. \u0421\u043f\u0430\u0441\u0438\u0431\u043e!</p> <p>\u0421\u0430\u043c\u044b\u0435 \u043f\u0440\u043e\u0441\u0442\u044b\u0435 \u0438\u043d\u043b\u0430\u0439\u043d-\u043a\u043d\u043e\u043f\u043a\u0438 \u043e\u0442\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043a \u0442\u0438\u043f\u0443 URL, \u0442.\u0435. \u00ab\u0441\u0441\u044b\u043b\u043a\u0430\u00bb. \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e\u0442\u043e\u043a\u043e\u043b\u044b HTTP(S) \u0438 tg://</p> <pre><code>@dp.message(commands=[\"inline_url\"])\nasync def cmd_inline_url(message: types.Message, bot: Bot):\n    builder = InlineKeyboardBuilder()\n    builder.row(types.InlineKeyboardButton(\n        text=\"GitHub\", url=\"https://github.com\")\n    )\n    builder.row(types.InlineKeyboardButton(\n        text=\"\u041e\u0444. \u043a\u0430\u043d\u0430\u043b Telegram\",\n        url=\"tg://resolve?domain=telegram\")\n    )\n\n    # \u0427\u0442\u043e\u0431\u044b \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c ID-\u043a\u043d\u043e\u043f\u043a\u0443,\n    # \u0423 \u044e\u0437\u0435\u0440\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c False \u0444\u043b\u0430\u0433 has_private_forwards\n    user_id = 1234567890\n    chat_info = await bot.get_chat(user_id)\n    if not chat_info.has_private_forwards:\n        builder.row(types.InlineKeyboardButton(\n            text=\"\u041a\u0430\u043a\u043e\u0439-\u0442\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\",\n            url=f\"tg://user?id={user_id}\")\n        )\n\n    await message.answer(\n        '\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443',\n        reply_markup=builder.as_markup(),\n    )\n</code></pre> <p>\u041e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c\u0441\u044f \u043d\u0430 \u0441\u0440\u0435\u0434\u043d\u0435\u043c \u0431\u043b\u043e\u043a\u0435 \u043a\u043e\u0434\u0430. \u0414\u0435\u043b\u043e \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u0432 \u043c\u0430\u0440\u0442\u0435 2019 \u0433\u043e\u0434\u0430 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 Telegram  \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u0445\u043e\u0434  \u043a \u043f\u0440\u043e\u0444\u0438\u043b\u044e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0443 \u043f\u0435\u0440\u0435\u0441\u043b\u0430\u043d\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. \u041f\u0440\u0438 \u043f\u043e\u043f\u044b\u0442\u043a\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c URL-\u043a\u043d\u043e\u043f\u043a\u0443 \u0441 ID \u044e\u0437\u0435\u0440\u0430, \u0443 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d  \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043f\u043e \u0444\u043e\u0440\u0432\u0430\u0440\u0434\u0443, \u0431\u043e\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442 \u043e\u0448\u0438\u0431\u043a\u0443 <code>Bad Request: BUTTON_USER_PRIVACY_RESTRICTED</code>. \u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u043f\u0440\u0435\u0436\u0434\u0435 \u0447\u0435\u043c  \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0430\u043a\u0443\u044e \u043a\u043d\u043e\u043f\u043a\u0443, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u044b\u044f\u0441\u043d\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0443\u043f\u043e\u043c\u044f\u043d\u0443\u0442\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043c\u0435\u0442\u043e\u0434  getChat \u0438 \u0432 \u043e\u0442\u0432\u0435\u0442\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043f\u043e\u043b\u044f <code>has_private_forwards</code>.  \u0415\u0441\u043b\u0438 \u043e\u043d\u043e \u0440\u0430\u0432\u043d\u043e <code>True</code>, \u0437\u043d\u0430\u0447\u0438\u0442, \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c URL-ID \u043a\u043d\u043e\u043f\u043a\u0443 \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u0442 \u043a \u043e\u0448\u0438\u0431\u043a\u0435. </p>"},{"location":"buttons/#callback-buttons","title":"\u041a\u043e\u043b\u0431\u044d\u043a\u0438","text":"<p>\u0421 URL-\u043a\u043d\u043e\u043f\u043a\u0430\u043c\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u043e\u0431\u0441\u0443\u0436\u0434\u0430\u0442\u044c, \u043f\u043e \u0441\u0443\u0442\u0438, \u043d\u0435\u0447\u0435\u0433\u043e, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u0435\u0440\u0435\u0439\u0434\u0451\u043c \u043a \u0433\u0432\u043e\u0437\u0434\u044e \u0441\u0435\u0433\u043e\u0434\u043d\u044f\u0448\u043d\u0435\u0439 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u2014 Callback-\u043a\u043d\u043e\u043f\u043a\u0430\u043c.  \u042d\u0442\u043e \u043e\u0447\u0435\u043d\u044c \u043c\u043e\u0449\u043d\u0430\u044f \u0448\u0442\u0443\u043a\u0430, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u0442\u044c \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0435\u0437\u0434\u0435. \u041a\u043d\u043e\u043f\u043a\u0438-\u0440\u0435\u0430\u043a\u0446\u0438\u0438 \u0443 \u043f\u043e\u0441\u0442\u043e\u0432 (\u043b\u0430\u0439\u043a\u0438), \u043c\u0435\u043d\u044e \u0443 @BotFather  \u0438 \u0442.\u0434. \u0421\u0443\u0442\u044c \u0432 \u0447\u0451\u043c: \u0443 \u043a\u043e\u043b\u0431\u044d\u043a-\u043a\u043d\u043e\u043f\u043e\u043a \u0435\u0441\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 (data), \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u0432\u0430\u0448\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043e\u043f\u043e\u0437\u043d\u0430\u0451\u0442, \u0447\u0442\u043e \u043d\u0430\u0436\u0430\u0442\u043e \u0438 \u0447\u0442\u043e \u043d\u0430\u0434\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c.  \u0418 \u0432\u044b\u0431\u043e\u0440 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0433\u043e data \u043e\u0447\u0435\u043d\u044c \u0432\u0430\u0436\u0435\u043d! \u0421\u0442\u043e\u0438\u0442 \u0442\u0430\u043a\u0436\u0435 \u043e\u0442\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e, \u0432 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 \u043e\u0442 \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u043a\u043d\u043e\u043f\u043e\u043a, \u043d\u0430\u0436\u0430\u0442\u0438\u0435 \u043d\u0430 \u043a\u043e\u043b\u0431\u044d\u043a-\u043a\u043d\u043e\u043f\u043a\u0443  \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0447\u0442\u043e \u0443\u0433\u043e\u0434\u043d\u043e, \u043e\u0442 \u0437\u0430\u043a\u0430\u0437\u0430 \u043f\u0438\u0446\u0446\u044b \u0434\u043e \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0432\u044b\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0439 \u043d\u0430 \u043a\u043b\u0430\u0441\u0442\u0435\u0440\u0435 \u0441\u0443\u043f\u0435\u0440\u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u043e\u0432.</p> <p>\u041d\u0430\u043f\u0438\u0448\u0435\u043c \u0445\u044d\u043d\u0434\u043b\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0435 <code>/random</code> \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u043a\u043e\u043b\u0431\u044d\u043a-\u043a\u043d\u043e\u043f\u043a\u043e\u0439: <pre><code>@dp.message(commands=[\"random\"])\nasync def cmd_random(message: types.Message):\n    builder = InlineKeyboardBuilder()\n    builder.add(types.InlineKeyboardButton(\n        text=\"\u041d\u0430\u0436\u043c\u0438 \u043c\u0435\u043d\u044f\",\n        callback_data=\"random_value\")\n    )\n    await message.answer(\n        \"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443, \u0447\u0442\u043e\u0431\u044b \u0431\u043e\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b \u0447\u0438\u0441\u043b\u043e \u043e\u0442 1 \u0434\u043e 10\",\n        reply_markup=builder.as_markup()\n    )\n</code></pre></p> <p>\u041d\u043e \u043a\u0430\u043a \u0436\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0430\u0436\u0430\u0442\u0438\u0435? \u0415\u0441\u043b\u0438 \u0440\u0430\u043d\u044c\u0448\u0435 \u043c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438 \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 <code>message</code> \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u0442\u043e \u0442\u0435\u043f\u0435\u0440\u044c  \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 <code>callback_query</code> \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043a\u043e\u043b\u0431\u044d\u043a\u043e\u0432. \u041e\u0440\u0438\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0431\u0443\u0434\u0435\u043c \u043d\u0430 \u00ab\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u00bb \u043a\u043d\u043e\u043f\u043a\u0438, \u0442.\u0435. \u043d\u0430  \u0435\u0451 data:</p> <pre><code>@dp.callback_query(text=\"random_value\")\nasync def send_random_value(callback: types.CallbackQuery):\n    await callback.message.answer(str(randint(1, 10)))\n</code></pre> <p>\u0412\u0430\u0436\u043d\u043e</p> <p>\u041d\u0435\u0441\u043c\u043e\u0442\u0440\u044f \u043d\u0430 \u0442\u043e, \u0447\u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u043a\u043d\u043e\u043f\u043a\u0438 <code>callback_data</code>, \u0430 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>data</code> \u043b\u0435\u0436\u0438\u0442 \u0432 \u043e\u0434\u043d\u043e\u0438\u043c\u0451\u043d\u043d\u043e\u043c \u043f\u043e\u043b\u0435 <code>data</code>  \u043e\u0431\u044a\u0435\u043a\u0442\u0430 CallbackQuery, \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440 aiogram \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f <code>text</code>.</p> <p></p> <p>\u041e\u0439, \u0430 \u0447\u0442\u043e \u044d\u0442\u043e \u0437\u0430 \u0447\u0430\u0441\u0438\u043a\u0438? \u041e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u0441\u0435\u0440\u0432\u0435\u0440 Telegram \u0436\u0434\u0451\u0442 \u043e\u0442 \u043d\u0430\u0441 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u043e \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0435 \u043a\u043e\u043b\u0431\u044d\u043a\u0430, \u0438\u043d\u0430\u0447\u0435 \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 30  \u0441\u0435\u043a\u0443\u043d\u0434 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u0443\u044e \u0438\u043a\u043e\u043d\u043a\u0443. \u0427\u0442\u043e\u0431\u044b \u0441\u043a\u0440\u044b\u0442\u044c \u0447\u0430\u0441\u0438\u043a\u0438, \u043d\u0443\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043c\u0435\u0442\u043e\u0434 <code>answer()</code> \u0443 \u043a\u043e\u043b\u0431\u044d\u043a\u0430 (\u0438\u043b\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c  \u043c\u0435\u0442\u043e\u0434 API <code>answer_callback_query()</code>). \u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u0432 \u043c\u0435\u0442\u043e\u0434 <code>answer()</code> \u043c\u043e\u0436\u043d\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c, \u043d\u043e \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c  \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u043a\u043e\u0448\u043a\u043e (\u0432\u0441\u043f\u043b\u044b\u0432\u0430\u044e\u0449\u0435\u0435 \u0441\u0432\u0435\u0440\u0445\u0443 \u0438\u043b\u0438 \u043f\u043e\u0432\u0435\u0440\u0445 \u044d\u043a\u0440\u0430\u043d\u0430):</p> <pre><code>@dp.callback_query(text=\"random_value\")\nasync def send_random_value(callback: types.CallbackQuery):\n    await callback.message.answer(str(randint(1, 10)))\n    await callback.answer(\n        text=\"\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0447\u0442\u043e \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438\u0441\u044c \u0431\u043e\u0442\u043e\u043c!\",\n        show_alert=True\n    )\n    # \u0438\u043b\u0438 \u043f\u0440\u043e\u0441\u0442\u043e await call.answer()\n</code></pre> <p></p> <p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435</p> <p>\u0412 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 <code>send_random_value</code> \u043c\u044b \u0432\u044b\u0437\u044b\u0432\u0430\u043b\u0438 \u043c\u0435\u0442\u043e\u0434 <code>answer()</code> \u043d\u0435 \u0443 <code>message</code>, \u0430 \u0443 <code>callback.message</code>. \u042d\u0442\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u043e \u0441 \u0442\u0435\u043c,  \u0447\u0442\u043e \u043a\u043e\u043b\u0431\u044d\u043a-\u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043d\u0435 \u0441 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438 (\u0442\u0438\u043f Message),  \u0430 \u0441 \u043a\u043e\u043b\u0431\u044d\u043a\u0430\u043c\u0438 (\u0442\u0438\u043f CallbackQuery), \u0443 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u0438\u0435 \u043f\u043e\u043b\u044f, \u0438  \u0441\u0430\u043c\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u2014 \u0432\u0441\u0435\u0433\u043e \u043b\u0438\u0448\u044c \u0435\u0433\u043e \u0447\u0430\u0441\u0442\u044c. \u0423\u0447\u0442\u0438\u0442\u0435 \u0442\u0430\u043a\u0436\u0435, \u0447\u0442\u043e <code>message</code> \u2014 \u044d\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u043a \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u0431\u044b\u043b\u0430 \u043f\u0440\u0438\u0446\u0435\u043f\u043b\u0435\u043d\u0430  \u043a\u043d\u043e\u043f\u043a\u0430 (\u0442.\u0435. \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044c \u0442\u0430\u043a\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u2014 \u0441\u0430\u043c \u0431\u043e\u0442). \u0415\u0441\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0437\u043d\u0430\u0442\u044c, \u043a\u0442\u043e \u043d\u0430\u0436\u0430\u043b \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443, \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435  \u043f\u043e\u043b\u0435 <code>from</code> (\u0432 \u0432\u0430\u0448\u0435\u043c \u043a\u043e\u0434\u0435 \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 <code>callback.from_user</code>, \u0442.\u043a. \u0441\u043b\u043e\u0432\u043e <code>from</code> \u0437\u0430\u0440\u0435\u0437\u0435\u0440\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0432 Python)</p> <p>\u041a\u043e\u0433\u0434\u0430 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c <code>answer()</code>?</p> <p>\u0412 \u043e\u0431\u0449\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u0433\u043b\u0430\u0432\u043d\u043e\u0435 \u2014 \u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0435 \u0437\u0430\u0431\u044b\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u044c Telegram \u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u043a\u043e\u043b\u0431\u044d\u043a-\u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u043d\u043e \u044f \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u0441\u0442\u0430\u0432\u0438\u0442\u044c  \u0432\u044b\u0437\u043e\u0432 <code>answer()</code> \u0432 \u0441\u0430\u043c\u043e\u043c \u043a\u043e\u043d\u0446\u0435, \u0438 \u0432\u043e\u0442 \u043f\u043e\u0447\u0435\u043c\u0443: \u0435\u0441\u043b\u0438 \u0432\u0434\u0440\u0443\u0433 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043a\u043e\u043b\u0431\u044d\u043a\u0430 \u0441\u043b\u0443\u0447\u0438\u0442\u0441\u044f \u043a\u0430\u043a\u0430\u044f-\u0442\u043e \u043e\u0448\u0438\u0431\u043a\u0430 \u0438  \u0431\u043e\u0442 \u043d\u0430\u0440\u0432\u0451\u0442\u0441\u044f \u043d\u0430 \u043d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u043e\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435, \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u0432\u0438\u0434\u0438\u0442 \u043d\u0435\u0443\u0431\u0438\u0440\u0430\u044e\u0449\u0438\u0435\u0441\u044f \u043f\u043e\u043b\u043c\u0438\u043d\u0443\u0442\u044b \u0447\u0430\u0441\u0438\u043a\u0438 \u0438 \u043f\u043e\u0439\u043c\u0451\u0442, \u0447\u0442\u043e \u0447\u0442\u043e-\u0442\u043e  \u043d\u0435 \u0442\u0430\u043a. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u0447\u0430\u0441\u0438\u043a\u0438 \u0438\u0441\u0447\u0435\u0437\u043d\u0443\u0442, \u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0441\u0442\u0430\u043d\u0435\u0442\u0441\u044f \u0432 \u043d\u0435\u0432\u0435\u0434\u0435\u043d\u0438\u0438, \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u043b\u0441\u044f \u0435\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u043b\u0438 \u043d\u0435\u0442.</p> <p>\u041f\u0435\u0440\u0435\u0439\u0434\u0451\u043c \u043a \u043f\u0440\u0438\u043c\u0435\u0440\u0443 \u043f\u043e\u0441\u043b\u043e\u0436\u043d\u0435\u0435. \u041f\u0443\u0441\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u0447\u0438\u0441\u043b\u043e\u043c 0, \u0430 \u0432\u043d\u0438\u0437\u0443 \u0442\u0440\u0438 \u043a\u043d\u043e\u043f\u043a\u0438: +1, -1 \u0438 \u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c.  \u041f\u0435\u0440\u0432\u044b\u043c\u0438 \u0434\u0432\u0443\u043c\u044f \u043e\u043d \u043c\u043e\u0436\u0435\u0442 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0447\u0438\u0441\u043b\u043e, \u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044f\u044f \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u0432\u0441\u044e \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443, \u0444\u0438\u043a\u0441\u0438\u0440\u0443\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f. \u0425\u0440\u0430\u043d\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0435\u043c  \u0432 \u043f\u0430\u043c\u044f\u0442\u0438 \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u0435 (\u043f\u0440\u043e \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u044b \u043f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u043c \u043a\u0430\u043a-\u043d\u0438\u0431\u0443\u0434\u044c \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0440\u0430\u0437).</p> <pre><code># \u0417\u0434\u0435\u0441\u044c \u0445\u0440\u0430\u043d\u044f\u0442\u0441\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.\n# \u0422.\u043a. \u044d\u0442\u043e \u0441\u043b\u043e\u0432\u0430\u0440\u044c \u0432 \u043f\u0430\u043c\u044f\u0442\u0438, \u0442\u043e \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u043e\u043d \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0441\u044f\nuser_data = {}\n\ndef get_keyboard():\n    buttons = [\n        [\n            types.InlineKeyboardButton(text=\"-1\", callback_data=\"num_decr\"),\n            types.InlineKeyboardButton(text=\"+1\", callback_data=\"num_incr\")\n        ],\n        [types.InlineKeyboardButton(text=\"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c\", callback_data=\"num_finish\")]\n    ]\n    keyboard = types.InlineKeyboardMarkup(inline_keyboard=buttons)\n    return keyboard\n\n\nasync def update_num_text(message: types.Message, new_value: int):\n    await message.edit_text(\n        f\"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e: {new_value}\",\n        reply_markup=get_keyboard()\n    )\n\n\n@dp.message(commands=[\"numbers\"])\nasync def cmd_numbers(message: types.Message):\n    user_data[message.from_user.id] = 0\n    await message.answer(\"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e: 0\", reply_markup=get_keyboard())\n\n\n@dp.callback_query(Text(text_startswith=\"num_\"))\nasync def callbacks_num(callback: types.CallbackQuery):\n    user_value = user_data.get(callback.from_user.id, 0)\n    action = callback.data.split(\"_\")[1]\n\n    if action == \"incr\":\n        user_data[callback.from_user.id] = user_value+1\n        await update_num_text(callback.message, user_value+1)\n    elif action == \"decr\":\n        user_data[callback.from_user.id] = user_value-1\n        await update_num_text(callback.message, user_value-1)\n    elif action == \"finish\":\n        await callback.message.edit_text(f\"\u0418\u0442\u043e\u0433\u043e: {user_value}\")\n\n    await callback.answer()\n</code></pre> <p>\u0418, \u043a\u0430\u0437\u0430\u043b\u043e\u0441\u044c \u0431\u044b, \u0432\u0441\u0451 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442: </p> <p></p> <p>\u041d\u043e \u0442\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u043c, \u0447\u0442\u043e \u0443\u0448\u043b\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441\u0434\u0435\u043b\u0430\u043b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435: \u0432\u044b\u0437\u0432\u0430\u043b \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/numbers</code> (\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 0), \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u043b \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435  \u0434\u043e 1, \u0441\u043d\u043e\u0432\u0430 \u0432\u044b\u0437\u0432\u0430\u043b <code>/numbers</code> (\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0441\u0431\u0440\u043e\u0441\u0438\u043b\u043e\u0441\u044c \u0434\u043e 0) \u0438 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043b \u0438 \u043d\u0430\u0436\u0430\u043b \u043a\u043d\u043e\u043f\u043a\u0443 \"+1\" \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438.  \u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0437\u043e\u0439\u0434\u0451\u0442? \u0411\u043e\u0442 \u043f\u043e-\u0447\u0435\u0441\u0442\u043d\u043e\u043c\u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c 1, \u043d\u043e \u0442.\u043a. \u043d\u0430 \u0442\u043e\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438  \u0443\u0436\u0435 \u0441\u0442\u043e\u0438\u0442 \u0446\u0438\u0444\u0440\u0430 1, \u0442\u043e Bot API \u0432\u0435\u0440\u043d\u0451\u0442 \u043e\u0448\u0438\u0431\u043a\u0443, \u0447\u0442\u043e \u0441\u0442\u0430\u0440\u044b\u0439 \u0438 \u043d\u043e\u0432\u044b\u0439 \u0442\u0435\u043a\u0441\u0442\u044b \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442, \u0430 \u0431\u043e\u0442 \u0441\u043b\u043e\u0432\u0438\u0442 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435:  <code>Bad Request: message is not modified: specified new message content and reply markup are exactly the same  as a current content and reply markup of the message</code></p> <p></p> <p>\u0421 \u044d\u0442\u043e\u0439 \u043e\u0448\u0438\u0431\u043a\u043e\u0439 \u0432\u044b, \u0441\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e, \u0431\u0443\u0434\u0435\u0442\u0435 \u043f\u043e\u043d\u0430\u0447\u0430\u043b\u0443 \u0447\u0430\u0441\u0442\u043e \u0441\u0442\u0430\u043b\u043a\u0438\u0432\u0430\u0442\u044c\u0441\u044f, \u043f\u044b\u0442\u0430\u044f\u0441\u044c \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.  \u0412\u043e\u043e\u0431\u0449\u0435 \u0433\u043e\u0432\u043e\u0440\u044f, \u043f\u043e\u0434\u043e\u0431\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430 \u0447\u0430\u0441\u0442\u043e \u0433\u043e\u0432\u043e\u0440\u0438\u0442 \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430\u0445 \u0441 \u043b\u043e\u0433\u0438\u043a\u043e\u0439 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438/\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438, \u043d\u043e \u0438\u043d\u043e\u0433\u0434\u0430,  \u043a\u0430\u043a \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u0432\u044b\u0448\u0435, \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0436\u0438\u0434\u0430\u0435\u043c\u044b\u043c \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435\u043c. </p> <p>\u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u0440\u043e\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u043c \u043e\u0448\u0438\u0431\u043a\u0443 \u0446\u0435\u043b\u0438\u043a\u043e\u043c, \u0442.\u043a. \u043d\u0430\u043c \u0432\u0430\u0436\u0435\u043d  \u043b\u0438\u0448\u044c \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0442\u043e\u0447\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u043c. \u041e\u0448\u0438\u0431\u043a\u0430 MessageNotModified \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0441\u044f \u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438 Bad Request,  \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u0432\u044b\u0431\u043e\u0440: \u043f\u0440\u043e\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0435\u0441\u044c \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441 \u043e\u0448\u0438\u0431\u043e\u043a, \u043b\u0438\u0431\u043e \u043e\u0442\u043b\u043e\u0432\u0438\u0442\u044c \u0432\u0435\u0441\u044c \u043a\u043b\u0430\u0441\u0441 BadRequest  \u0438 \u043f\u043e\u043f\u044b\u0442\u0430\u0442\u044c\u0441\u044f \u043f\u043e \u0442\u0435\u043a\u0441\u0442\u0443 \u043e\u0448\u0438\u0431\u043a\u0438 \u043e\u043f\u043e\u0437\u043d\u0430\u0442\u044c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0443\u044e \u043f\u0440\u0438\u0447\u0438\u043d\u0443.  \u0427\u0442\u043e\u0431\u044b \u043d\u0435 \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0443\u0441\u043b\u043e\u0436\u043d\u044f\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440, \u043e\u0431\u043e\u0439\u0434\u0451\u043c\u0441\u044f \u043f\u0435\u0440\u0432\u044b\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u043c \u0438 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e\u0431\u043d\u043e\u0432\u0438\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>update_num_text()</code>:</p> <pre><code># \u041d\u043e\u0432\u044b\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u044b!\nfrom contextlib import suppress\nfrom aiogram.exceptions import TelegramBadRequest\n\nasync def update_num_text(message: types.Message, new_value: int):\n    with suppress(TelegramBadRequest):\n        await message.edit_text(\n            f\"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e: {new_value}\",\n            reply_markup=get_keyboard()\n        )\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u0442\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440 \u0432\u044b\u0448\u0435, \u0442\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u0432 \u044d\u0442\u043e\u043c \u0431\u043b\u043e\u043a\u0435 \u043a\u043e\u0434\u0430 \u0431\u043e\u0442 \u043f\u0440\u043e\u0441\u0442\u043e-\u043d\u0430\u043f\u0440\u043e\u0441\u0442\u043e \u043f\u0440\u043e\u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442.</p>"},{"location":"buttons/#callback-factory","title":"\u0424\u0430\u0431\u0440\u0438\u043a\u0430 \u043a\u043e\u043b\u0431\u044d\u043a\u043e\u0432","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u0432\u044b \u043e\u043f\u0435\u0440\u0438\u0440\u0443\u0435\u0442\u0435 \u043a\u0430\u043a\u0438\u043c\u0438-\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u044b\u043c\u0438 \u043a\u043e\u043b\u0431\u044d\u043a\u0430\u043c\u0438 \u0441 \u043e\u0431\u0449\u0438\u043c \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c, \u0442\u0438\u043f\u0430 <code>order_1</code>, <code>order_2</code>... \u0432\u0430\u043c \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f,  \u0447\u0442\u043e \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u043b\u0435\u0433\u043a\u043e \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c <code>split()</code> \u0438 \u0434\u0435\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u043e \u043a\u0430\u043a\u043e\u043c\u0443-\u0442\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044e. \u0410 \u0442\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u044c\u0442\u0435, \u0447\u0442\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e  \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0435 \u043e\u0434\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0430 \u0442\u0440\u0438: <code>order_1_1994_2731519</code>. \u0427\u0442\u043e \u0437\u0434\u0435\u0441\u044c \u0430\u0440\u0442\u0438\u043a\u0443\u043b, \u0446\u0435\u043d\u0430, \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e? \u0410 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c, \u0442\u0443\u0442 \u0432\u043e\u043e\u0431\u0449\u0435  \u0433\u043e\u0434 \u0432\u044b\u043f\u0443\u0441\u043a\u0430? \u0414\u0430 \u0438 \u0440\u0430\u0437\u0431\u0438\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u043e\u043a\u0438 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u0441\u0442\u0440\u0430\u0448\u043d\u043e: <code>.split(\"_\")[2]</code>. \u0410 \u043f\u043e\u0447\u0435\u043c\u0443 \u043d\u0435 1 \u0438\u043b\u0438 3? </p> <p>\u0412 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043c\u043e\u043c\u0435\u043d\u0442 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0442\u0430\u043a\u0438\u0445 callback data, \u0438 \u0432 aiogram \u0435\u0441\u0442\u044c \u0440\u0435\u0448\u0435\u043d\u0438\u0435!  \u0412\u044b \u0441\u043e\u0437\u0434\u0430\u0451\u0442\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0442\u0438\u043f\u0430 <code>CallbackData</code>, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441, \u043e\u043f\u0438\u0441\u044b\u0432\u0430\u0435\u0442\u0435 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443, \u0430 \u0434\u0430\u043b\u044c\u0448\u0435 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442  \u0441\u0442\u0440\u043e\u043a\u0443 \u0441 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043a\u043e\u043b\u0431\u044d\u043a\u0430 \u0438, \u0447\u0442\u043e \u0432\u0430\u0436\u043d\u0435\u0435, \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0435\u0442 \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435. \u0421\u043d\u043e\u0432\u0430 \u0440\u0430\u0437\u0431\u0435\u0440\u0451\u043c\u0441\u044f \u043d\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435;  \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043a\u043b\u0430\u0441\u0441 <code>NumbersCallbackFactory</code> \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c <code>fabnum</code> \u0438 \u0434\u0432\u0443\u043c\u044f \u043f\u043e\u043b\u044f\u043c\u0438 <code>action</code> \u0438 <code>value</code>. \u041f\u043e\u043b\u0435 <code>action</code> \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442,  \u0447\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c, \u043c\u0435\u043d\u044f\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 (change) \u0438\u043b\u0438 \u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c (finish), \u0430 \u043f\u043e\u043b\u0435 <code>value</code> \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442, \u043d\u0430 \u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0438\u0437\u043c\u0435\u043d\u044f\u0442\u044c  \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435. \u041e\u043d\u043e \u043f\u043e\u043c\u0435\u0447\u0435\u043d\u043e \u043a\u0430\u043a <code>Optional[int]</code>, \u0442.\u043a. \u0435\u0441\u043b\u0438 action \u0440\u0430\u0432\u0435\u043d \"finish\", \u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0431\u0435\u0441\u0441\u043c\u044b\u0441\u043b\u0435\u043d\u043d\u043e. \u041a\u043e\u0434:</p> <pre><code># \u043d\u043e\u0432\u044b\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u044b!\nfrom typing import Optional\nfrom aiogram.dispatcher.filters.callback_data import CallbackData\n\nclass NumbersCallbackFactory(CallbackData, prefix=\"fabnum\"):\n    action: str\n    value: Optional[int]\n</code></pre> <p>\u041d\u0430\u0448 \u043a\u043b\u0430\u0441\u0441 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043e\u043b\u0436\u0435\u043d \u043d\u0430\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0442 <code>CallbackData</code> \u0438 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430. \u041f\u0440\u0435\u0444\u0438\u043a\u0441 \u2014 \u044d\u0442\u043e  \u043e\u0431\u0449\u0430\u044f \u043f\u043e\u0434\u0441\u0442\u0440\u043e\u043a\u0430 \u0432 \u043d\u0430\u0447\u0430\u043b\u0435, \u043f\u043e \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a \u0431\u0443\u0434\u0435\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c, \u043a\u0430\u043a\u0430\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043b\u0435\u0436\u0438\u0442 \u0432 \u043a\u043e\u043b\u0431\u044d\u043a\u0435. </p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u0438 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b. \u0417\u0434\u0435\u0441\u044c \u043d\u0430\u043c \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u0442\u0441\u044f \u043c\u0435\u0442\u043e\u0434 <code>button()</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438  \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0443 \u0441 \u043d\u0443\u0436\u043d\u044b\u043c \u0442\u0438\u043f\u043e\u043c, \u0430 \u043e\u0442 \u043d\u0430\u0441 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b.  \u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430 <code>callback_data</code> \u0432\u043c\u0435\u0441\u0442\u043e \u0441\u0442\u0440\u043e\u043a\u0438 \u0431\u0443\u0434\u0435\u043c \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c  \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043d\u0430\u0448\u0435\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430 <code>NumbersCallbackFactory</code>:</p> <pre><code>def get_keyboard_fab():\n    builder = InlineKeyboardBuilder()\n    builder.button(\n        text=\"-2\", callback_data=NumbersCallbackFactory(action=\"change\", value=-2)\n    )\n    builder.button(\n        text=\"-1\", callback_data=NumbersCallbackFactory(action=\"change\", value=-1)\n    )\n    builder.button(\n        text=\"+1\", callback_data=NumbersCallbackFactory(action=\"change\", value=1)\n    )\n    builder.button(\n        text=\"+2\", callback_data=NumbersCallbackFactory(action=\"change\", value=2)\n    )\n    builder.button(\n        text=\"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c\", callback_data=NumbersCallbackFactory(action=\"finish\")\n    )\n    # \u0412\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u0435\u043c \u043a\u043d\u043e\u043f\u043a\u0438 \u043f\u043e 4 \u0432 \u0440\u044f\u0434, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c 4 + 1\n    builder.adjust(4)\n    return builder.as_markup()\n</code></pre> <p>\u041c\u0435\u0442\u043e\u0434\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0438 \u0435\u0433\u043e \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u0442\u0435\u043c\u0438 \u0436\u0435 (\u0432 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f\u0445 \u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u0445 \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0441\u0443\u0444\u0444\u0438\u043a\u0441 <code>_fab</code>):</p> <pre><code>async def update_num_text_fab(message: types.Message, new_value: int):\n    with suppress(TelegramBadRequest):\n        await message.edit_text(\n            f\"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e: {new_value}\",\n            reply_markup=get_keyboard_fab()\n        )\n\n@dp.message(commands=[\"numbers_fab\"])\nasync def cmd_numbers_fab(message: types.Message):\n    user_data[message.from_user.id] = 0\n    await message.answer(\"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0447\u0438\u0441\u043b\u043e: 0\", reply_markup=get_keyboard_fab())\n</code></pre> <p>\u041d\u0430\u043a\u043e\u043d\u0435\u0446, \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u043c \u043a \u0433\u043b\u0430\u0432\u043d\u043e\u043c\u0443 \u2014 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u043a\u043e\u043b\u0431\u044d\u043a\u043e\u0432. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0432 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440 \u043d\u0430\u0434\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u043a\u043b\u0430\u0441\u0441, \u043a\u043e\u043b\u0431\u044d\u043a\u0438 \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u043c  \u043c\u044b \u043b\u043e\u0432\u0438\u043c, \u0441 \u0432\u044b\u0437\u0432\u0430\u043d\u043d\u044b\u043c \u043c\u0435\u0442\u043e\u0434\u043e\u043c <code>filter()</code>. \u0422\u0430\u043a\u0436\u0435 \u043f\u043e\u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 \u0441 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c <code>callback_data</code>  (\u0438\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0438\u043c\u0435\u043d\u043d\u043e \u0442\u0430\u043a\u0438\u043c!), \u0438 \u0438\u043c\u0435\u044e\u0449\u0438\u043c \u0442\u043e\u0442 \u0436\u0435 \u0442\u0438\u043f, \u0447\u0442\u043e \u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u043c\u044b\u0439 \u043a\u043b\u0430\u0441\u0441:</p> <pre><code>@dp.callback_query(NumbersCallbackFactory.filter())\nasync def callbacks_num_change_fab(\n        callback: types.CallbackQuery, \n        callback_data: NumbersCallbackFactory\n):\n    # \u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\n    user_value = user_data.get(callback.from_user.id, 0)\n    # \u0415\u0441\u043b\u0438 \u0447\u0438\u0441\u043b\u043e \u043d\u0443\u0436\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c\n    if callback_data.action == \"change\":\n        user_data[callback.from_user.id] = user_value + callback_data.value\n        await update_num_text_fab(callback.message, user_value + callback_data.value)\n    # \u0415\u0441\u043b\u0438 \u0447\u0438\u0441\u043b\u043e \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0444\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u0442\u044c\n    else:\n        await callback.message.edit_text(f\"\u0418\u0442\u043e\u0433\u043e: {user_value}\")\n    await callback.answer()\n</code></pre> <p>\u0415\u0449\u0451 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u0438\u0437\u0438\u0440\u0443\u0435\u043c \u043d\u0430\u0448\u0438 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b \u0438 \u0441\u0434\u0435\u043b\u0430\u0435\u043c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a  \u0434\u043b\u044f \u0447\u0438\u0441\u043b\u043e\u0432\u044b\u0445 \u043a\u043d\u043e\u043f\u043e\u043a \u0438 \u0434\u043b\u044f \u043a\u043d\u043e\u043f\u043a\u0438 \u00ab\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c\u00bb. \u0424\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c \u0431\u0443\u0434\u0435\u043c \u043f\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e <code>action</code> \u0438 \u0432 \u044d\u0442\u043e\u043c \u043d\u0430\u043c \u043f\u043e\u043c\u043e\u0433\u0443\u0442  \u00ab\u043c\u0430\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b\u00bb aiogram 3.x. \u0421\u0435\u0440\u044c\u0451\u0437\u043d\u043e, \u043e\u043d\u0438 \u0442\u0430\u043a \u0438 \u043d\u0430\u0437\u044b\u0432\u0430\u044e\u0442\u0441\u044f: Magic Filter. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0441\u0438\u0435 \u0447\u0430\u0440\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u043e \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c  \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0433\u043b\u0430\u0432\u0435, \u0430 \u0441\u0435\u0439\u0447\u0430\u0441 \u043f\u0440\u043e\u0441\u0442\u043e \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u0441\u044f \u00ab\u043c\u0430\u0433\u0438\u0435\u0439\u00bb \u0438 \u043f\u0440\u0438\u043c\u0435\u043c \u044d\u0442\u043e \u043d\u0430 \u0432\u0435\u0440\u0443:</p> <pre><code># \u043d\u043e\u0432\u044b\u0439 \u0438\u043c\u043f\u043e\u0440\u0442!\nfrom magic_filter import F\n\n# \u041d\u0430\u0436\u0430\u0442\u0438\u0435 \u043d\u0430 \u043e\u0434\u043d\u0443 \u0438\u0437 \u043a\u043d\u043e\u043f\u043e\u043a: -2, -1, +1, +2\n@dp.callback_query(NumbersCallbackFactory.filter(F.action == \"change\"))\nasync def callbacks_num_change_fab(\n        callback: types.CallbackQuery, \n        callback_data: NumbersCallbackFactory\n):\n    # \u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\n    user_value = user_data.get(callback.from_user.id, 0)\n\n    user_data[callback.from_user.id] = user_value + callback_data.value\n    await update_num_text_fab(callback.message, user_value + callback_data.value)\n    await callback.answer()\n\n\n# \u041d\u0430\u0436\u0430\u0442\u0438\u0435 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \"\u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c\"\n@dp.callback_query(NumbersCallbackFactory.filter(F.action == \"finish\"))\nasync def callbacks_num_finish_fab(callback: types.CallbackQuery):\n    # \u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\n    user_value = user_data.get(callback.from_user.id, 0)\n\n    await callback.message.edit_text(f\"\u0418\u0442\u043e\u0433\u043e: {user_value}\")\n    await callback.answer()\n</code></pre> <p></p> <p>\u041d\u0430 \u043f\u0435\u0440\u0432\u044b\u0439 \u0432\u0437\u0433\u043b\u044f\u0434 \u0442\u043e, \u0447\u0442\u043e \u043c\u044b \u0441\u0434\u0435\u043b\u0430\u043b\u0438, \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c\u0441\u044f \u0441\u043b\u043e\u0436\u043d\u044b\u043c, \u043d\u043e \u0432 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0444\u0430\u0431\u0440\u0438\u043a\u0430 \u043a\u043e\u043b\u0431\u044d\u043a\u043e\u0432 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442  \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u044b\u0435 \u043a\u043e\u043b\u0431\u044d\u043a-\u043a\u043d\u043e\u043f\u043a\u0438 \u0438 \u0443\u0434\u043e\u0431\u043d\u043e \u0434\u0440\u043e\u0431\u0438\u0442\u044c \u043a\u043e\u0434 \u043d\u0430 \u043b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438. \u0423\u0432\u0438\u0434\u0435\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0444\u0430\u0431\u0440\u0438\u043a\u0438  \u043d\u0430 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432 \u0431\u043e\u0442\u0435 \u0434\u043b\u044f \u0438\u0433\u0440\u044b \u0432 \u00ab\u0421\u0430\u043f\u0451\u0440\u0430\u00bb,  \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u043c \u0432\u0430\u0448\u0438\u043c \u043b\u044e\u0431\u0438\u043c\u044b\u043c \u0430\u0432\u0442\u043e\u0440\u043e\u043c :)</p> <p>\u0410 \u0441 \u043a\u043d\u043e\u043f\u043a\u0430\u043c\u0438 \u043c\u044b \u043f\u043e\u043a\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0435\u043c \u0437\u043d\u0430\u043a\u043e\u043c\u0441\u0442\u0432\u043e.</p>"},{"location":"filters-and-middlewares/","title":"\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u0438 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438","text":"<p>\u041e \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u0435\u0440\u0441\u0438\u0439</p> <p>\u041a\u043e\u0434 \u0432 \u0433\u043b\u0430\u0432\u0430\u0445 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 aiogram 3.0 beta3. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438.</p> <p>\u041d\u0430\u0441\u0442\u0430\u043b\u043e \u0432\u0440\u0435\u043c\u044f \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0441\u044f, \u043a\u0430\u043a \u0443\u0441\u0442\u0440\u043e\u0435\u043d\u044b \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u0438 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438 \u0432 aiogram 3.x, \u0430 \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441  \u00ab\u0443\u0431\u0438\u0439\u0446\u0435\u0439 \u043b\u044f\u043c\u0431\u0434\u0430-\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439\u00bb \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u0430 \u2014 \u043c\u0430\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u043c\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c\u0438.</p>"},{"location":"filters-and-middlewares/#filters","title":"\u0424\u0438\u043b\u044c\u0442\u0440\u044b","text":""},{"location":"filters-and-middlewares/#why-filters","title":"\u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u043d\u044b \u0444\u0438\u043b\u044c\u0442\u0440\u044b?","text":"<p>\u0415\u0441\u043b\u0438 \u0432\u044b \u043d\u0430\u043f\u0438\u0441\u0430\u043b\u0438 \u0441\u0432\u043e\u0435\u0433\u043e \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0431\u043e\u0442\u0430, \u0442\u043e \u043c\u043e\u0433\u0443 \u043f\u043e\u0437\u0434\u0440\u0430\u0432\u0438\u0442\u044c: \u0432\u044b \u0443\u0436\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438\u0441\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c\u0438,  \u043f\u0440\u043e\u0441\u0442\u043e \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u043c\u0438, \u0430 \u043d\u0435 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u043c\u0438. \u0414\u0430-\u0434\u0430, \u0442\u043e \u0441\u0430\u043c\u043e\u0435 <code>commands=[\"start\"]</code> \u0438 \u0435\u0441\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440. \u041e\u043d\u0438 \u043d\u0443\u0436\u043d\u044b \u0434\u043b\u044f \u0442\u043e\u0433\u043e,  \u0447\u0442\u043e\u0431\u044b \u043e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0439 \u0430\u043f\u0434\u0435\u0439\u0442 \u043e\u0442 \u0442\u0435\u043b\u0435\u0433\u0438 \u043f\u043e\u043f\u0430\u043b \u0432 \u043d\u0443\u0436\u043d\u044b\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, \u0442.\u0435. \u0442\u0443\u0434\u0430, \u0433\u0434\u0435 \u0435\u0433\u043e [\u0430\u043f\u0434\u0435\u0439\u0442] \u0436\u0434\u0443\u0442. </p> <p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0441\u0430\u043c\u044b\u0439 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043f\u0440\u0438\u043c\u0435\u0440, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043d\u044f\u0442\u044c \u0432\u0430\u0436\u043d\u043e\u0441\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432. \u041f\u0443\u0441\u0442\u044c \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0410\u043b\u0438\u0441\u0430 \u0441 ID 111  \u0438 \u0411\u043e\u0431 \u0441 ID 777. \u0418 \u0435\u0441\u0442\u044c \u0431\u043e\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0430 \u043b\u044e\u0431\u043e\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0440\u0430\u0434\u0443\u0435\u0442 \u043d\u0430\u0448\u0438\u0445 \u0434\u0432\u0443\u0445 \u0440\u0435\u0431\u044f\u0442 \u043a\u0430\u043a\u043e\u0439-\u043d\u0438\u0431\u0443\u0434\u044c  \u043c\u043e\u0442\u0438\u0432\u0438\u0440\u0443\u044e\u0449\u0435\u0439 \u0444\u0440\u0430\u0437\u043e\u0439, \u0430 \u0432\u0441\u0435\u0445 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445 \u043e\u0442\u0448\u0438\u0432\u0430\u0435\u0442:</p> <pre><code>from random import choice\n\n@router.message(content_types=\"text\")\nasync def my_text_handler(message: Message):\n    phrases = [\n        \"\u041f\u0440\u0438\u0432\u0435\u0442! \u041e\u0442\u043b\u0438\u0447\u043d\u043e \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0448\u044c :)\",\n        \"\u0425\u044d\u043b\u043b\u043e\u0443, \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0439 \u0434\u0435\u043d\u044c!\",\n        \"\u0417\u0434\u0440\u0430\u0432\u0441\u0442\u0432\u0443\u0439)) \u0443\u043b\u044b\u0431\u043d\u0438\u0441\u044c :)\"\n    ]\n    if message.from_user.id in (111, 777):\n        await message.answer(choice(phrases))\n    else:\n        await message.answer(\"\u042f \u0441 \u0442\u043e\u0431\u043e\u0439 \u043d\u0435 \u0440\u0430\u0437\u0433\u043e\u0432\u0430\u0440\u0438\u0432\u0430\u044e!\")\n</code></pre> <p>\u0417\u0430\u0442\u0435\u043c \u0432 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u043c\u043e\u043c\u0435\u043d\u0442 \u043c\u044b \u0440\u0435\u0448\u0430\u0435\u043c, \u0447\u0442\u043e \u043d\u0430\u0434\u043e \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0438\u0437 \u0440\u0435\u0431\u044f\u0442 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0435 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435,  \u0430 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0440\u0430\u0437\u0431\u0438\u0432\u0430\u0435\u043c \u043d\u0430\u0448 \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 \u0442\u0440\u0438: \u0434\u043b\u044f \u0410\u043b\u0438\u0441\u044b, \u0434\u043b\u044f \u0411\u043e\u0431\u0430 \u0438 \u0434\u043b\u044f \u0432\u0441\u0435\u0445 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0445:</p> <pre><code>@router.message(content_types=\"text\")\nasync def greet_alice(message: Message):\n    # print(\"\u0425\u044d\u043d\u0434\u043b\u0435\u0440 \u0434\u043b\u044f \u0410\u043b\u0438\u0441\u044b\")\n    phrases = [\n        \"\u041f\u0440\u0438\u0432\u0435\u0442, {name}. \u0422\u044b \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u043a\u0440\u0430\u0441\u043e\u0442\u043a\u0430!\",\n        \"\u0422\u044b \u0441\u0430\u043c\u0430\u044f \u0443\u043c\u043d\u0430\u044f, {name}\",\n    ]\n    if message.from_user.id == 111:\n        await message.answer(\n            choice(phrases).format(name=\"\u0410\u043b\u0438\u0441\u0430\")\n        )\n\n@router.message(content_types=\"text\")\nasync def greet_bob(message: Message):\n    phrases = [\n        \"\u041f\u0440\u0438\u0432\u0435\u0442, {name}. \u0422\u044b \u0441\u0430\u043c\u044b\u0439 \u0441\u0438\u043b\u044c\u043d\u044b\u0439!\",\n        \"\u0422\u044b \u043a\u0440\u0443\u0442, {name}!\",\n    ]\n    if message.from_user.id == 777:\n        await message.answer(\n            choice(phrases).format(name=\"\u0411\u043e\u0431\")\n        )\n\n@router.message(content_types=\"text\")\nasync def stranger_go_away(message: Message):\n    if message.from_user.id not in (111, 777):\n        await message.answer(\"\u042f \u0441 \u0442\u043e\u0431\u043e\u0439 \u043d\u0435 \u0440\u0430\u0437\u0433\u043e\u0432\u0430\u0440\u0438\u0432\u0430\u044e!\")\n</code></pre> <p>\u041f\u0440\u0438 \u0442\u0430\u043a\u043e\u043c \u0440\u0430\u0441\u043a\u043b\u0430\u0434\u0435 \u0410\u043b\u0438\u0441\u0430 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0438 \u0440\u0430\u0434\u043e\u0432\u0430\u0442\u044c\u0441\u044f. \u0410 \u0432\u043e\u0442 \u0432\u0441\u0435 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442 \u043d\u0438\u0447\u0435\u0433\u043e, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443  \u043a\u043e\u0434 \u0431\u0443\u0434\u0435\u0442 \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u043e\u043f\u0430\u0434\u0430\u0442\u044c \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>greet_alice()</code>, \u0438 \u043d\u0435 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442\u044c \u043f\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044e <code>if message.from_user.id == 111</code>.  \u0412 \u044d\u0442\u043e\u043c \u043b\u0435\u0433\u043a\u043e \u0443\u0431\u0435\u0434\u0438\u0442\u044c\u0441\u044f, \u0440\u0430\u0441\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0432 \u0432\u044b\u0437\u043e\u0432 <code>print()</code>. </p> <p>\u041d\u043e \u043f\u043e\u0447\u0435\u043c\u0443 \u0442\u0430\u043a? \u041e\u0442\u0432\u0435\u0442 \u043f\u0440\u043e\u0441\u0442: \u043b\u044e\u0431\u043e\u0435 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u043e\u043f\u0430\u0434\u0451\u0442 \u0432 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 <code>content_types=\"text\"</code> \u043d\u0430\u0434 \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439  <code>greet_alice()</code>, \u044d\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432\u0435\u0440\u043d\u0451\u0442 <code>True</code> \u0438 \u0430\u043f\u0434\u0435\u0439\u0442 \u043f\u043e\u043f\u0430\u0434\u0451\u0442 \u0438\u043c\u0435\u043d\u043d\u043e \u0432 \u044d\u0442\u0443 \u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u043e\u0442\u043a\u0443\u0434\u0430, \u043d\u0435 \u043f\u0440\u043e\u0439\u0434\u044f \u043f\u043e \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0435\u043c\u0443  \u0443\u0441\u043b\u043e\u0432\u0438\u044e <code>if</code>, \u0432\u044b\u0439\u0434\u0435\u0442 \u0438 \u043a\u0430\u043d\u0435\u0442 \u0432 \u041b\u0435\u0442\u0443. </p> <p>\u0427\u0442\u043e\u0431\u044b \u0438\u0437\u0431\u0435\u0436\u0430\u0442\u044c \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u0445 \u043a\u0430\u0437\u0443\u0441\u043e\u0432, \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0444\u0438\u043b\u044c\u0442\u0440\u044b. \u0412 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0439 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u043e\u0439 \u0431\u0443\u0434\u0435\u0442  \u00ab\u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u0442\u0430\u0439\u043f \u0442\u0435\u043a\u0441\u0442 \u0418 \u0430\u0439\u0434\u0438 \u044e\u0437\u0435\u0440\u0430 111\u00bb. \u0422\u043e\u0433\u0434\u0430 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435, \u043a\u043e\u0433\u0434\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442 \u0411\u043e\u0431 \u0441 \u0430\u0439\u0434\u0438 777, \u0441\u043e\u0432\u043e\u043a\u0443\u043f\u043d\u043e\u0441\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432  \u0432\u0435\u0440\u043d\u0451\u0442 False, \u0438 \u0440\u043e\u0443\u0442\u0435\u0440 \u043f\u043e\u0439\u0434\u0451\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0445\u044d\u043d\u0434\u043b\u0435\u0440, \u0433\u0434\u0435 \u043e\u0431\u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u0432\u0435\u0440\u043d\u0443\u0442 True \u0438 \u0430\u043f\u0434\u0435\u0439\u0442 \u0443\u043f\u0430\u0434\u0451\u0442 \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440.  \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u043d\u0430 \u043f\u0435\u0440\u0432\u044b\u0439 \u0432\u0437\u0433\u043b\u044f\u0434 \u0432\u044b\u0448\u0435\u043e\u043f\u0438\u0441\u0430\u043d\u043d\u043e\u0435 \u0437\u0432\u0443\u0447\u0438\u0442 \u043e\u0447\u0435\u043d\u044c \u0441\u043b\u043e\u0436\u043d\u043e, \u043d\u043e \u043a \u043a\u043e\u043d\u0446\u0443 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u044b \u0432\u044b \u043f\u043e\u0439\u043c\u0451\u0442\u0435, \u043a\u0430\u043a \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u043e\u0432\u0430\u0442\u044c  \u043f\u043e\u0434\u043e\u0431\u043d\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443.</p>"},{"location":"filters-and-middlewares/#filters-as-classes","title":"\u0424\u0438\u043b\u044c\u0442\u0440\u044b \u043a\u0430\u043a \u043a\u043b\u0430\u0441\u0441\u044b","text":"<p>\u0412 aiogram \u0432\u0435\u0440\u0441\u0438\u0438 3.0.0b2 \u043d\u0435\u0442 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u043d\u0430 \u0442\u0438\u043f \u0447\u0430\u0442\u0430 (\u043b\u0438\u0447\u043a\u0430, \u0433\u0440\u0443\u043f\u043f\u0430, \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0430 \u0438\u043b\u0438 \u043a\u0430\u043d\u0430\u043b).  \u0422\u0430\u043a \u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0435\u0433\u043e \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0441\u0430\u043c\u0438! \u041f\u0443\u0441\u0442\u044c \u0443 \u044e\u0437\u0435\u0440\u0430 \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0438\u043f \u0447\u0430\u0442\u0430 \u043b\u0438\u0431\u043e \u0441\u0442\u0440\u043e\u043a\u043e\u0439, \u043b\u0438\u0431\u043e \u0441\u043f\u0438\u0441\u043a\u043e\u043c (list).  \u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u0442\u0441\u044f \u0434\u043b\u044f \u0433\u0440\u0443\u043f\u043f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u044b\u0432\u0430\u044e\u0442 \u0435\u0449\u0451 \u0438 \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0430\u043c\u0438.</p> <p>\u041d\u0430\u0448\u0430 \u0442\u043e\u0447\u043a\u0430 \u0432\u0445\u043e\u0434\u0430 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u0430 \u0438\u043c\u0435\u043d\u043d\u043e \u0444\u0430\u0439\u043b <code>bot.py</code>, \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u0437\u043d\u0430\u043a\u043e\u043c\u043e:</p> bot.py<pre><code>import asyncio\n\nfrom aiogram import Bot, Dispatcher\n\n\nasync def main():\n    bot = Bot(token=\"TOKEN\")\n    dp = Dispatcher()\n\n    # \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0431\u043e\u0442\u0430 \u0438 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0432\u0441\u0435 \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435\n    # \u0414\u0430, \u044d\u0442\u043e\u0442 \u043c\u0435\u0442\u043e\u0434 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u043f\u043e\u043b\u043b\u0438\u043d\u0433\n    await bot.delete_webhook(drop_pending_updates=True)\n    await dp.start_polling(bot)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre> <p>\u0420\u044f\u0434\u043e\u043c \u0441 \u043d\u0438\u043c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433 <code>filters</code>, \u0430 \u0432 \u043d\u0451\u043c \u0444\u0430\u0439\u043b <code>chat_type.py</code>:</p> filters/chat_type.py<pre><code>from typing import Union\n\nfrom aiogram.dispatcher.filters import BaseFilter\nfrom aiogram.types import Message\n\n\nclass ChatTypeFilter(BaseFilter):  # [1]\nchat_type: Union[str, list]    # [2]\nasync def __call__(self, message: Message) -&gt; bool:  # [3]\nif isinstance(self.chat_type, str):\n            return message.chat.type == self.chat_type\n        else:\n            return message.chat.type in self.chat_type\n</code></pre> <p>\u041e\u0431\u0440\u0430\u0442\u0438\u043c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 \u043f\u043e\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438:</p> <ol> <li>\u041d\u0430\u0448\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u043d\u0430\u0441\u043b\u0435\u0434\u0443\u044e\u0442\u0441\u044f \u043e\u0442 \u0431\u0430\u0437\u043e\u0432\u043e\u0433\u043e \u043a\u043b\u0430\u0441\u0441\u0430 <code>BaseFilter</code></li> <li>\u041f\u043e\u043b\u044f \u043a\u043b\u0430\u0441\u0441\u0430 \u2014 \u0431\u0443\u0434\u0443\u0449\u0438\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u0444\u0438\u043b\u044c\u0442\u0440\u0430. \u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043c\u044b \u0437\u0430\u044f\u0432\u043b\u044f\u0435\u043c \u043e \u043d\u0430\u043b\u0438\u0447\u0438\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430 <code>chat_type</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043a\u0430\u043a \u0441\u0442\u0440\u043e\u043a\u043e\u0439 (<code>str</code>), \u0442\u0430\u043a \u0438 \u0441\u043f\u0438\u0441\u043a\u043e\u043c (<code>list</code>).</li> <li>\u0412\u0441\u0451 \u0434\u0435\u0439\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0432 \u043c\u0435\u0442\u043e\u0434\u0435 <code>__call__()</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442, \u043a\u043e\u0433\u0434\u0430 \u0441\u0430\u043c \u043a\u043b\u0430\u0441\u0441  <code>ChatTypeFilter()</code> \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0442 \u043a\u0430\u043a \u0444\u0443\u043d\u043a\u0446\u0438\u044e.  \u0412\u043d\u0443\u0442\u0440\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0433\u043e: \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0442\u0438\u043f \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0438 \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u043c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443.  \u041c\u044b \u0441\u0442\u0440\u0435\u043c\u0438\u043c\u0441\u044f \u043a \u0442\u043e\u043c\u0443, \u0447\u0442\u043e\u0431\u044b \u0444\u0438\u043b\u044c\u0442\u0440 \u0432\u0435\u0440\u043d\u0443\u043b \u0431\u0443\u043b\u0435\u0432\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0434\u0430\u043b\u0435\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u043e\u0442 \u0445\u044d\u043d\u0434\u043b\u0435\u0440,  \u0432\u0441\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0432\u0435\u0440\u043d\u0443\u043b\u0438 <code>True</code>.</li> </ol> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u043f\u0430\u0440\u0443 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c <code>/dice</code> \u0438 <code>/basketball</code> \u0431\u0443\u0434\u0435\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0434\u0430\u0439\u0441  \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e \u0442\u0438\u043f\u0430, \u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0433\u0440\u0443\u043f\u043f\u0443. \u0421\u043e\u0437\u0434\u0430\u0451\u043c \u0444\u0430\u0439\u043b <code>handlers/group_games.py</code> \u0438 \u043f\u0438\u0448\u0435\u043c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430\u0440\u043d\u044b\u0439 \u043a\u043e\u0434:</p> handlers/group_games.py<pre><code>from aiogram import Router\nfrom aiogram.types import Message\nfrom aiogram.dispatcher.filters import Command\nfrom filters.chat_type import ChatTypeFilter\nrouter = Router()\n\n\n@router.message(\nChatTypeFilter(chat_type=[\"group\", \"supergroup\"]),\ncommands=[\"dice\"],\n)\nasync def cmd_dice_in_group(message: Message):\n    await message.answer_dice(emoji=\"\ud83c\udfb2\")\n\n\n@router.message(\nChatTypeFilter(chat_type=[\"group\", \"supergroup\"]),\nCommand(commands=[\"basketball\"]),\n)\nasync def cmd_basketball_in_group(message: Message):\n    await message.answer_dice(emoji=\"\ud83c\udfc0\")\n</code></pre> <p>\u0427\u0442\u043e \u0436, \u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044c\u0441\u044f. \u0412\u043e-\u043f\u0435\u0440\u0432\u044b\u0445, \u043c\u044b \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043b\u0438 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440 <code>Command</code> \u0438 \u043d\u0430\u0448 \u0441\u0432\u0435\u0436\u0435\u043d\u0430\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439  <code>ChatTypeFilter</code>. \u0412\u043e-\u0432\u0442\u043e\u0440\u044b\u0445, \u043c\u044b \u043f\u0435\u0440\u0435\u0434\u0430\u043b\u0438 \u043d\u0430\u0448 \u0444\u0438\u043b\u044c\u0442\u0440 \u043a\u0430\u043a \u043f\u043e\u0437\u0438\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 \u0432 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440, \u0443\u043a\u0430\u0437\u0430\u0432  \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0435\u0433\u043e \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0445 (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e!) \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0436\u0435\u043b\u0430\u0435\u043c\u044b\u0435 \u0442\u0438\u043f\u044b \u0447\u0430\u0442\u043e\u0432. \u0412-\u0442\u0440\u0435\u0442\u044c\u0438\u0445, \u0432\u044b \u043d\u0430\u0432\u0435\u0440\u043d\u044f\u043a\u0430  \u043f\u0440\u0438\u0432\u044b\u043a\u043b\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043a\u0430\u043a <code>commands=...</code>, \u043e\u0434\u043d\u0430\u043a\u043e \u0433\u0434\u0435-\u0442\u043e \u0432 \u0440\u0430\u0439\u043e\u043d\u0435 aiogram 3.2 \u043f\u043e\u0434\u043e\u0431\u043d\u0430\u044f \u0444\u0438\u0447\u0430 \u0438\u0441\u0447\u0435\u0437\u043d\u0435\u0442,  \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u0442\u0430\u043a \u0436\u0435, \u043a\u0430\u043a \u0438 \u0441\u0432\u043e\u0438, \u0447\u0435\u0440\u0435\u0437 \u0438\u043c\u043f\u043e\u0440\u0442 \u0438 \u0432\u044b\u0437\u043e\u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043a\u043b\u0430\u0441\u0441\u043e\u0432.  \u0420\u043e\u0432\u043d\u043e \u044d\u0442\u043e \u043c\u044b \u0432\u0438\u0434\u0438\u043c \u0432\u043e \u0432\u0442\u043e\u0440\u043e\u043c \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0435 \u0441 \u0432\u044b\u0437\u043e\u0432\u043e\u043c <code>Command(commands=\"...\")</code></p> <p>\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b \u0441 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u043c\u0438 \u0432 \u0442\u043e\u0447\u043a\u0443 \u0432\u0445\u043e\u0434\u0430 \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0440\u043e\u0443\u0442\u0435\u0440 \u043a \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0443 (\u0432\u044b\u0434\u0435\u043b\u0435\u043d\u044b \u043d\u043e\u0432\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438):</p> bot.py<pre><code>import asyncio\n\nfrom aiogram import Bot, Dispatcher\n\nfrom handlers import group_games\nasync def main():\n    bot = Bot(token=\"TOKEN\")\n    dp = Dispatcher()\n\ndp.include_router(group_games.router)\n# \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0431\u043e\u0442\u0430 \u0438 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0432\u0441\u0435 \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435\n    # \u0414\u0430, \u044d\u0442\u043e\u0442 \u043c\u0435\u0442\u043e\u0434 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u043f\u043e\u043b\u043b\u0438\u043d\u0433\n    await bot.delete_webhook(drop_pending_updates=True)\n    await dp.start_polling(bot)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c:</p> <p></p> <p>\u0412\u0440\u043e\u0434\u0435 \u0432\u0441\u0451 \u0445\u043e\u0440\u043e\u0448\u043e, \u043d\u043e \u0447\u0442\u043e, \u0435\u0441\u043b\u0438 \u0443 \u043d\u0430\u0441 \u0431\u0443\u0434\u0435\u0442 \u043d\u0435 2 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430, \u0430 10? \u041f\u0440\u0438\u0434\u0451\u0442\u0441\u044f \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0430\u0448  \u0444\u0438\u043b\u044c\u0442\u0440 \u0438 \u043d\u0438\u0433\u0434\u0435 \u043d\u0435 \u0437\u0430\u0431\u044b\u0442\u044c. \u041a \u0441\u0447\u0430\u0441\u0442\u044c\u044e, \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u043c\u043e\u0436\u043d\u043e \u0446\u0435\u043f\u043b\u044f\u0442\u044c \u043f\u0440\u044f\u043c\u043e \u043d\u0430 \u0440\u043e\u0443\u0442\u0435\u0440\u044b! \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430  \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430 \u0440\u043e\u0432\u043d\u043e \u043e\u0434\u0438\u043d \u0440\u0430\u0437, \u043a\u043e\u0433\u0434\u0430 \u0430\u043f\u0434\u0435\u0439\u0442 \u0434\u043e\u043b\u0435\u0442\u0438\u0442 \u0434\u043e \u044d\u0442\u043e\u0433\u043e \u0440\u043e\u0443\u0442\u0435\u0440\u0430. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u043e,  \u0435\u0441\u043b\u0438 \u0432 \u0444\u0438\u043b\u044c\u0442\u0440\u0435 \u0432\u044b \u0434\u0435\u043b\u0430\u0435\u0442\u0435 \u0440\u0430\u0437\u043d\u044b\u0435 \u00ab\u0442\u044f\u0436\u0435\u043b\u044b\u0435\u00bb \u0437\u0430\u0434\u0430\u0447\u0438, \u0442\u0438\u043f\u0430 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043a Bot API; \u0438\u043d\u0430\u0447\u0435 \u043c\u043e\u0436\u043d\u043e  \u043b\u0435\u0433\u043a\u043e \u0441\u043b\u043e\u0432\u0438\u0442\u044c \u0444\u043b\u0443\u0434\u0432\u0435\u0439\u0442.</p> <p>\u0422\u0430\u043a \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043d\u0430\u0448 \u0444\u0430\u0439\u043b \u0441 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u043c\u0438 \u0434\u043b\u044f \u0434\u0430\u0439\u0441\u043e\u0432 \u0432 \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u043c \u0432\u0438\u0434\u0435:</p> handlers/group_games.py<pre><code>from aiogram import Router\nfrom aiogram.types import Message\nfrom aiogram.dispatcher.filters import Command\n\nfrom filters.chat_type import ChatTypeFilter\n\nrouter = Router()\nrouter.message.filter(\nChatTypeFilter(chat_type=[\"group\", \"supergroup\"])\n)\n@router.message(\ncommands=[\"dice\"]\n)\nasync def cmd_dice_in_group(message: Message):\n    await message.answer_dice(emoji=\"\ud83c\udfb2\")\n\n\n@router.message(\nCommand(commands=[\"basketball\"])\n)\nasync def cmd_basketball_in_group(message: Message):\n    await message.answer_dice(emoji=\"\ud83c\udfc0\")\n</code></pre> <p>\u0412\u043e\u043e\u0431\u0449\u0435 \u0433\u043e\u0432\u043e\u0440\u044f, \u0442\u0430\u043a\u043e\u0439 \u0444\u0438\u043b\u044c\u0442\u0440 \u043d\u0430 \u0442\u0438\u043f \u0447\u0430\u0442\u0430 \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0447\u0443\u0442\u044c \u0438\u043d\u0430\u0447\u0435. \u041d\u0435\u0441\u043c\u043e\u0442\u0440\u044f \u043d\u0430 \u0442\u043e,  \u0447\u0442\u043e \u0442\u0438\u043f\u043e\u0432 \u0447\u0430\u0442\u043e\u0432 \u0443 \u043d\u0430\u0441 \u0447\u0435\u0442\u044b\u0440\u0435 (\u041b\u0421, \u0433\u0440\u0443\u043f\u043f\u0430, \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0430, \u043a\u0430\u043d\u0430\u043b), \u0430\u043f\u0434\u0435\u0439\u0442 \u0442\u0438\u043f\u0430 <code>message</code>  \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u043b\u0435\u0442\u0430\u0442\u044c \u0438\u0437 \u043a\u0430\u043d\u0430\u043b\u043e\u0432, \u0442.\u043a. \u0443 \u043d\u0438\u0445 \u0441\u0432\u043e\u0439 \u0430\u043f\u0434\u0435\u0439\u0442 <code>channel_post</code>. \u0410 \u043a\u043e\u0433\u0434\u0430 \u043c\u044b  \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u043c \u0433\u0440\u0443\u043f\u043f\u044b, \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e, \u043e\u0431\u044b\u0447\u043d\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430 \u0438\u043b\u0438 \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0430, \u043b\u0438\u0448\u044c \u0431\u044b \u043d\u0435 \u043b\u0438\u0447\u043a\u0430.</p> <p>\u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0441\u0430\u043c \u0444\u0438\u043b\u044c\u0442\u0440 \u043c\u043e\u0436\u043d\u043e \u0441\u0432\u0435\u0441\u0442\u0438 \u043a \u0443\u0441\u043b\u043e\u0432\u043d\u043e\u043c\u0443 <code>ChatTypeFilter(is_group=True/False)</code> \u0438 \u043f\u0440\u043e\u0441\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c, \u041b\u0421 \u0438\u043b\u0438 \u043d\u0435 \u041b\u0421. \u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0430\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u043d\u0430 \u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0435 \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f.</p> <p>\u041f\u043e\u043c\u0438\u043c\u043e True/False, \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u043c\u043e\u0433\u0443\u0442 \u0447\u0442\u043e-\u0442\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u0432 \u0445\u044d\u043d\u0434\u0435\u043b\u0440\u044b, \u043f\u0440\u043e\u0448\u0435\u0434\u0448\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u0442\u044c\u0441\u044f,  \u043a\u043e\u0433\u0434\u0430 \u043c\u044b \u043d\u0435 \u0445\u043e\u0442\u0438\u043c \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0443\u0436\u0435 \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u0432 \u0444\u0438\u043b\u044c\u0442\u0440\u0435. \u0427\u0442\u043e\u0431\u044b  \u0441\u0442\u0430\u043b\u043e \u043f\u043e\u043d\u044f\u0442\u043d\u0435\u0435, \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0444\u0438\u043b\u044c\u0442\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u0435\u0441\u043b\u0438 \u0432 \u043d\u0451\u043c \u0435\u0441\u0442\u044c \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u044b, \u0430 \u0437\u0430\u043e\u0434\u043d\u043e  \u00ab\u043f\u0440\u043e\u0442\u043e\u043b\u043a\u043d\u0451\u0442\u00bb \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f.</p> <p>\u0412 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0435 filters \u0441\u043e\u0437\u0434\u0430\u0451\u043c \u043d\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b <code>find_usernames.py</code>:</p> filters/find_usernames.py<pre><code>from typing import Union, Dict, Any\n\nfrom aiogram.dispatcher.filters import BaseFilter\nfrom aiogram.types import Message\n\n\nclass HasUsernamesFilter(BaseFilter):\n    async def __call__(self, message: Message) -&gt; Union[bool, Dict[str, Any]]:\n        # \u0415\u0441\u043b\u0438 entities \u0432\u043e\u043e\u0431\u0449\u0435 \u043d\u0435\u0442, \u0432\u0435\u0440\u043d\u0451\u0442\u0441\u044f None,\n        # \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u0447\u0438\u0442\u0430\u0435\u043c, \u0447\u0442\u043e \u044d\u0442\u043e \u043f\u0443\u0441\u0442\u043e\u0439 \u0441\u043f\u0438\u0441\u043e\u043a\n        entities = message.entities or []\n\n        # \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u043b\u044e\u0431\u044b\u0435 \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u044b \u0438 \u0438\u0437\u0432\u043b\u0435\u043a\u0430\u0435\u043c \u0438\u0445 \u0438\u0437 \u0442\u0435\u043a\u0441\u0442\u0430\n        # \u043c\u0435\u0442\u043e\u0434\u043e\u043c extract(). \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0441\u043c. \u0433\u043b\u0430\u0432\u0443\n        # \u043f\u0440\u043e \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438\n        found_usernames = [\n            item.extract(message.text) for item in entities\n            if item.type == \"mention\"\n        ]\n\n        # \u0415\u0441\u043b\u0438 \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u044b \u0435\u0441\u0442\u044c, \u0442\u043e \"\u043f\u0440\u043e\u0442\u0430\u043b\u043a\u0438\u0432\u0430\u0435\u043c\" \u0438\u0445 \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\n        # \u043f\u043e \u0438\u043c\u0435\u043d\u0438 \"usernames\"\n        if len(found_usernames) &gt; 0:\nreturn {\"usernames\": found_usernames}\n# \u0415\u0441\u043b\u0438 \u043d\u0435 \u043d\u0430\u0448\u043b\u0438 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0430, \u0432\u0435\u0440\u043d\u0451\u043c False\nreturn False\n</code></pre> <p>\u0418 \u0441\u043e\u0437\u0434\u0430\u0451\u043c \u043d\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b \u0441 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u043c:</p> handlers/usernames.py<pre><code>from typing import List\n\nfrom aiogram import Router\nfrom aiogram.dispatcher.filters import ContentTypesFilter\nfrom aiogram.types import Message\n\nfrom filters.find_usernames import HasUsernamesFilter\nrouter = Router()\n\n\n@router.message(\n    ContentTypesFilter(content_types=\"text\"),\nHasUsernamesFilter(),\n)\nasync def message_with_usernames(\n        message: Message,\nusernames: List[str]\n):\n    await message.answer(\n        f'\u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u0434\u043f\u0438\u0448\u0443\u0441\u044c \u043d\u0430 '\nf'{\", \".join(usernames)}'\n)\n</code></pre> <p>\u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u043e\u0433\u043e \u044e\u0437\u0435\u0440\u0435\u043d\u0435\u0439\u043c\u0430 \u0444\u0438\u043b\u044c\u0442\u0440 <code>HasUsernamesFilter</code> \u0432\u0435\u0440\u043d\u0451\u0442 \u043d\u0435 \u043f\u0440\u043e\u0441\u0442\u043e <code>True</code>, \u0430  \u0441\u043b\u043e\u0432\u0430\u0440\u044c, \u0433\u0434\u0435 \u0438\u0437\u0432\u043b\u0435\u0447\u0451\u043d\u043d\u044b\u0435 \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u044b \u0431\u0443\u0434\u0443\u0442 \u043b\u0435\u0436\u0430\u0442\u044c \u043f\u043e\u0434 \u043a\u043b\u044e\u0447\u043e\u043c <code>usernames</code>. \u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0435, \u043d\u0430  \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043d\u0430\u0432\u0435\u0448\u0430\u043d \u044d\u0442\u043e\u0442 \u0444\u0438\u043b\u044c\u0442\u0440, \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 \u0441 \u0442\u043e\u0447\u043d\u043e \u0442\u0430\u043a\u0438\u043c \u0436\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u044e-\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a. \u0412\u0443\u0430\u043b\u044f!  \u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0435\u0442 \u043d\u0443\u0436\u0434\u044b \u0435\u0449\u0451 \u0440\u0430\u0437 \u043f\u0430\u0440\u0441\u0438\u0442\u044c \u0432\u0441\u0451 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0438 \u0441\u043d\u043e\u0432\u0430 \u0432\u044b\u0442\u0430\u0441\u043a\u0438\u0432\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u043e\u0432: </p> <p></p>"},{"location":"filters-and-middlewares/#magic-filters","title":"\u041c\u0430\u0433\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u0437\u043d\u0430\u043a\u043e\u043c\u0441\u0442\u0432\u0430 \u0441 <code>ChatTypeFilter</code> \u0438\u0437 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0433\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0430, \u043a\u0442\u043e-\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0432\u043e\u0441\u043a\u043b\u0438\u043a\u043d\u0443\u0442\u044c:  \u00ab\u0430 \u0437\u0430\u0447\u0435\u043c \u0432\u043e\u043e\u0431\u0449\u0435 \u0442\u0430\u043a \u0441\u043b\u043e\u0436\u043d\u043e, \u0435\u0441\u043b\u0438 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u043b\u044f\u043c\u0431\u0434\u043e\u0439:  <code>lambda m: m.chat.type in (\"group\", \"supergroup\")</code>\u00bb? \u0418 \u0432\u044b \u043f\u0440\u0430\u0432\u044b! \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e, \u0434\u043b\u044f \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445  \u043f\u0440\u043e\u0441\u0442\u044b\u0445 \u0441\u043b\u0443\u0447\u0430\u0435\u0432, \u043a\u043e\u0433\u0434\u0430 \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u0430, \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439  \u0444\u0430\u0439\u043b \u0441 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u043c, \u043f\u043e\u0442\u043e\u043c \u0435\u0433\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c, \u0441\u043c\u044b\u0441\u043b\u0430 \u043c\u0430\u043b\u043e. </p> <p>\u0410\u043b\u0435\u043a\u0441, \u043e\u0441\u043d\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0438 \u0433\u043b\u0430\u0432\u043d\u044b\u0439 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a aiogram, \u043d\u0430\u043f\u0438\u0441\u0430\u043b \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443  magic-filter, \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u044e\u0449\u0443\u044e \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435  \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u043e\u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432. \u0411\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e, \u043e\u043d\u0430 \u0443\u0436\u0435 \u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 aiogram 3.x.  \u0415\u0441\u043b\u0438 \u0432\u044b \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043b\u0438 \u0441\u0435\u0431\u0435 \u00ab\u0442\u0440\u043e\u0439\u043a\u0443\u00bb, \u0437\u043d\u0430\u0447\u0438\u0442, \u0443 \u0432\u0430\u0441 \u0443\u0436\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d magic-filter.</p> <p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 magic-filter \u0442\u0430\u043a\u0436\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u0432 PyPi  \u0438 \u043c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u043e\u0442 aiogram \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u0432\u0430\u0448\u0438\u0445 \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445. \u041f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438  \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0432 aiogram \u0432\u0430\u043c \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043e\u0434\u043d\u0430 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u0430\u044f \u0444\u0438\u0447\u0430, \u043e \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0440\u0435\u0447\u044c \u043f\u043e\u0439\u0434\u0451\u0442  \u0434\u0430\u043b\u0435\u0435 \u0432 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435</p> <p>\u0414\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u00ab\u043c\u0430\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u00bb \u043e\u043f\u0438\u0441\u0430\u043d\u044b \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 aiogram, \u0437\u0434\u0435\u0441\u044c \u0436\u0435  \u043c\u044b \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c\u0441\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u043c\u043e\u043c\u0435\u043d\u0442\u0430\u0445.</p> <p>\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0432\u0441\u043f\u043e\u043c\u043d\u0438\u043c, \u0447\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u00ab\u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u0442\u0430\u0439\u043f\u00bb \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. \u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043d\u044f\u0442\u0438\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 Bot API, \u043d\u043e \u043e\u043d\u043e  \u0435\u0441\u0442\u044c \u0438 \u0432 pyTelegramBotAPI, \u0438 \u0432 aiogram. \u0418\u0434\u0435\u044f \u043f\u0440\u043e\u0441\u0442\u0430\u044f: \u0435\u0441\u043b\u0438 \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435  Message \u043f\u043e\u043b\u0435 <code>photo</code> \u043d\u0435\u043f\u0443\u0441\u0442\u043e\u0435 (\u0442.\u0435. \u043d\u0435 \u0440\u0430\u0432\u043d\u043e <code>None</code>  \u0432 Python), \u0437\u043d\u0430\u0447\u0438\u0442, \u044d\u0442\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435, \u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e, \u0441\u0447\u0438\u0442\u0430\u0435\u043c, \u0447\u0442\u043e \u0435\u0433\u043e  \u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u0442\u0430\u0439\u043f \u0440\u0430\u0432\u0435\u043d <code>photo</code>. \u0418 \u0444\u0438\u043b\u044c\u0442\u0440 <code>content_types=\"photo\"</code> \u0431\u0443\u0434\u0435\u0442 \u043b\u043e\u0432\u0438\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0430\u043a\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f,  \u0438\u0437\u0431\u0430\u0432\u043b\u044f\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u043e\u0442 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u044d\u0442\u043e\u0442 \u0430\u0442\u0440\u0438\u0431\u0443\u0442 \u0432\u043d\u0443\u0442\u0440\u0438 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0435\u0442\u0440\u0443\u0434\u043d\u043e \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u044c, \u0447\u0442\u043e \u043b\u044f\u043c\u0431\u0434\u0430-\u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u043e\u043c \u044f\u0437\u044b\u043a\u0435 \u0437\u0432\u0443\u0447\u0438\u0442 \u043a\u0430\u043a  \u00ab\u0430\u0442\u0440\u0438\u0431\u0443\u0442 'photo' \u0443 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u043e\u0439 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 'm' \u043d\u0435 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0440\u0430\u0432\u0435\u043d None\u00bb, \u043d\u0430 Python \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043a\u0430\u043a  <code>lambda m: m.photo is not None</code>, \u0438\u043b\u0438, \u0447\u0443\u0442\u044c \u0443\u043f\u0440\u043e\u0441\u0442\u0438\u0432, <code>lambda m: m.photo</code>. \u0410 \u0441\u0430\u043c <code>m</code> \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f  \u0442\u0435\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u043c, \u043a\u043e\u0433\u043e \u043c\u044b \u0444\u0438\u043b\u044c\u0442\u0440\u0443\u0435\u043c. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043e\u0431\u044a\u0435\u043a\u0442 \u0442\u0438\u043f\u0430 <code>Message</code></p> <p>Magic-filter \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u0443\u044e \u0432\u0435\u0449\u044c. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043d\u0430\u0434\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043b\u0430\u0441\u0441 <code>MagicFilter</code> \u0438\u0437 aiogram,  \u043d\u043e \u043c\u044b \u0435\u0433\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u043d\u0435 \u043f\u043e \u043f\u043e\u043b\u043d\u043e\u043c\u0443 \u0438\u043c\u0435\u043d\u0438, \u0430 \u043f\u043e \u043e\u0434\u043d\u043e\u0431\u0443\u043a\u0432\u0435\u043d\u043d\u043e\u043c\u0443 \u0430\u043b\u0438\u0430\u0441\u0443 <code>F</code>:</p> <pre><code># \u043d\u043e\u0432\u044b\u0439 \u0438\u043c\u043f\u043e\u0440\u0442!\nfrom aiogram import F\n\n# \u0417\u0434\u0435\u0441\u044c F - \u044d\u0442\u043e message\n@router.message(F.photo)\nasync def photo_msg(message: Message):\n    await message.answer(\"\u042d\u0442\u043e \u0442\u043e\u0447\u043d\u043e \u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435!\")\n</code></pre> <p>\u0418\u0442\u043e\u0433\u043e \u043c\u044b \u0437\u0430\u043c\u0435\u043d\u0438\u043b\u0438 <code>ContentTypesFilter(content_types=\"photo\")</code> \u043d\u0430 <code>F.photo</code>. \u0423\u0434\u043e\u0431\u043d\u043e! \u0418 \u0442\u0435\u043f\u0435\u0440\u044c,  \u043e\u0431\u043b\u0430\u0434\u0430\u044f \u0442\u0430\u043a\u0438\u043c \u0441\u0430\u043a\u0440\u0430\u043b\u044c\u043d\u044b\u043c \u0437\u043d\u0430\u043d\u0438\u0435\u043c, \u043c\u044b \u043b\u0435\u0433\u043a\u043e \u043c\u043e\u0436\u0435\u043c \u0437\u0430\u043c\u0435\u043d\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 <code>ChatTypeFilter</code> \u043d\u0430 \u043c\u0430\u0433\u0438\u044e: <code>router.message.filter(F.chat.type.in_({\"group\", \"supergroup\"}))</code>. \u0411\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e, \u0434\u0430\u0436\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u043d\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u0442\u0430\u0439\u043f\u044b \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0432\u0438\u0434\u0435 \u043c\u0430\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0433\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430: <code>F.content_type.in_({'text', 'sticker', 'photo'})</code></p> <p>\u0422\u0430\u043a\u0436\u0435 \u0441\u0442\u043e\u0438\u0442 \u043f\u043e\u043c\u043d\u0438\u0442\u044c, \u0447\u0442\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u043c\u043e\u0436\u043d\u043e \u0432\u0435\u0448\u0430\u0442\u044c \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 Message, \u043d\u043e \u0438 \u043d\u0430 \u043b\u044e\u0431\u044b\u0435 \u0434\u0440\u0443\u0433\u0438\u0435  \u0442\u0438\u043f\u044b \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432: \u043a\u043e\u043b\u0431\u044d\u043a\u0438, \u0438\u043d\u043b\u0430\u0439\u043d-\u0437\u0430\u043f\u0440\u043e\u0441\u044b, (my_)chat_member \u0438 \u0434\u0440\u0443\u0433\u0438\u0435.</p> <p>\u041d\u0430\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u043a, \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430 \u0442\u0443 \u0441\u0430\u043c\u0443\u044e \u00ab\u044d\u043a\u0441\u043a\u043b\u044e\u0437\u0438\u0432\u043d\u0443\u044e\u00bb \u0444\u0438\u0447\u0443 magic-filter \u0432 \u0441\u043e\u0441\u0442\u0430\u0432\u0435 aiogram 3.x. \u0420\u0435\u0447\u044c \u043f\u0440\u043e  \u043c\u0435\u0442\u043e\u0434 <code>as_(&lt;some text&gt;)</code>, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0449\u0438\u0439 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430. \u041a\u043e\u0440\u043e\u0442\u043a\u0438\u0439  \u043f\u0440\u0438\u043c\u0435\u0440, \u0447\u0442\u043e\u0431\u044b \u0441\u0442\u0430\u043b\u043e \u043f\u043e\u043d\u044f\u0442\u043d\u043e: \u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0441 \u0444\u043e\u0442\u043e \u044d\u0442\u0438 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u043b\u0435\u0442\u0430\u044e\u0442 \u043c\u0430\u0441\u0441\u0438\u0432\u043e\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u044b\u0447\u043d\u043e  \u043e\u0442\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u0443\u0432\u0435\u043b\u0438\u0447\u0435\u043d\u0438\u044f \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0430. \u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0432\u0435\u043d\u043d\u043e, \u043c\u043e\u0436\u043d\u043e \u0441\u0440\u0430\u0437\u0443 \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442 \u0444\u043e\u0442\u043a\u0438  \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c:</p> <pre><code>from aiogram.types import Message, PhotoSize\n\n@router.message(F.photo[-1].as_(\"largest_photo\"))\nasync def forward_from_channel_handler(message: Message, largest_photo: PhotoSize) -&gt; None:\n    print(largest_photo.width, largest_photo.height)\n</code></pre> <p>\u0427\u0443\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u0441\u043b\u043e\u0436\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440. \u0415\u0441\u043b\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0441\u043b\u0430\u043d\u043e \u043e\u0442 \u0430\u043d\u043e\u043d\u0438\u043c\u043d\u044b\u0445 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u0433\u0440\u0443\u043f\u043f\u044b  \u0438\u043b\u0438 \u0438\u0437 \u043a\u0430\u043a\u043e\u0433\u043e-\u043b\u0438\u0431\u043e \u043a\u0430\u043d\u0430\u043b\u0430, \u0442\u043e \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 <code>Message</code> \u0431\u0443\u0434\u0435\u0442 \u043d\u0435\u043f\u0443\u0441\u0442\u044b\u043c \u043f\u043e\u043b\u0435 <code>forward_from_chat</code> \u0441 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u043c  \u0442\u0438\u043f\u0430 <code>Chat</code> \u0432\u043d\u0443\u0442\u0440\u0438. \u0412\u043e\u0442 \u043a\u0430\u043a \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0433\u043b\u044f\u0434\u0435\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u043f\u043e\u043b\u0435 <code>forward_from_chat</code>  \u043d\u0435\u043f\u0443\u0441\u0442\u043e\u0435, \u0430 \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 <code>Chat</code> \u043f\u043e\u043b\u0435 <code>type</code> \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0432\u043d\u043e <code>channel</code> (\u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u043e\u0442\u0441\u0435\u043a\u0430\u0435\u043c \u0444\u043e\u0440\u0432\u0430\u0440\u0434\u044b \u043e\u0442 \u0430\u043d\u043e\u043d\u0438\u043c\u043d\u044b\u0445  \u0430\u0434\u043c\u0438\u043d\u043e\u0432, \u0440\u0435\u0430\u0433\u0438\u0440\u0443\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0444\u043e\u0440\u0432\u0430\u0440\u0434\u044b \u0438\u0437 \u043a\u0430\u043d\u0430\u043b\u043e\u0432):</p> <pre><code>from aiogram import F\nfrom aiogram.types import Message, Chat\n\n@router.message(F.forward_from_chat[F.type == \"channel\"].as_(\"channel\"))\nasync def forwarded_from_channel(message: Message, channel: Chat):\n    await message.answer(f\"This channel's ID is {channel.id}\")\n</code></pre> <p>\u0415\u0449\u0451 \u0440\u0430\u0437 \u043d\u0430\u043f\u043e\u043c\u043d\u044e \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 magic-filter \u0432 aiogram:  \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f</p>"},{"location":"filters-and-middlewares/#middlewares","title":"\u041c\u0438\u0434\u043b\u0432\u0430\u0440\u0438","text":""},{"location":"filters-and-middlewares/#why-middlewares","title":"\u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u043d\u044b \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438?","text":"<p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u044c\u0442\u0435, \u0447\u0442\u043e \u0432\u044b \u043f\u0440\u0438\u0448\u043b\u0438 \u0432 \u043d\u043e\u0447\u043d\u043e\u0439 \u043a\u043b\u0443\u0431 \u0441 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0446\u0435\u043b\u044c\u044e (\u043f\u043e\u0441\u043b\u0443\u0448\u0430\u0442\u044c \u043c\u0443\u0437\u044b\u043a\u0443, \u0432\u044b\u043f\u0438\u0442\u044c \u043a\u043e\u043a\u0442\u0435\u0439\u043b\u044c,  \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441 \u043d\u043e\u0432\u044b\u043c\u0438 \u043b\u044e\u0434\u044c\u043c\u0438). \u0410 \u043d\u0430 \u0432\u0445\u043e\u0434\u0435 \u0441\u0442\u043e\u0438\u0442 \u043e\u0445\u0440\u0430\u043d\u043d\u0438\u043a. \u041e\u043d \u043c\u043e\u0436\u0435\u0442 \u0432\u0430\u0441 \u043f\u0440\u043e\u0441\u0442\u043e \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c,  \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u0430\u0441\u043f\u043e\u0440\u0442 \u0438 \u043f\u0440\u0438\u043d\u044f\u0442\u044c \u0440\u0435\u0448\u0435\u043d\u0438\u0435, \u0437\u0430\u0439\u0434\u0451\u0442\u0435 \u0432\u044b \u0438\u043b\u0438 \u043d\u0435\u0442, \u043c\u043e\u0436\u0435\u0442 \u0432\u044b\u0434\u0430\u0442\u044c \u0431\u0443\u043c\u0430\u0436\u043d\u044b\u0439 \u0431\u0440\u0430\u0441\u043b\u0435\u0442, \u0447\u0442\u043e\u0431\u044b  \u043f\u043e\u0442\u043e\u043c \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u0445 \u0433\u043e\u0441\u0442\u0435\u0439 \u043e\u0442 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e \u0437\u0430\u0431\u043b\u0443\u0434\u0448\u0438\u0445, \u0430 \u043c\u043e\u0436\u0435\u0442 \u0432\u043e\u043e\u0431\u0449\u0435 \u043d\u0435 \u043f\u0443\u0441\u0442\u0438\u0442\u044c, \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0432 \u0434\u043e\u043c\u043e\u0439.</p> <p>\u0412 \u0442\u0435\u0440\u043c\u0438\u043d\u043e\u043b\u043e\u0433\u0438\u0438 aiogram \u0432\u044b \u2014 \u044d\u0442\u043e \u0430\u043f\u0434\u0435\u0439\u0442, \u043d\u043e\u0447\u043d\u043e\u0439 \u043a\u043b\u0443\u0431 \u2014 \u043d\u0430\u0431\u043e\u0440 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432, \u0430 \u043e\u0445\u0440\u0430\u043d\u043d\u0438\u043a \u043d\u0430 \u0432\u0445\u043e\u0434\u0435 \u2014 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c. \u0417\u0430\u0434\u0430\u0447\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e  \u0432\u043a\u043b\u0438\u043d\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432 \u0434\u043b\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043a\u0430\u043a\u043e\u0439-\u043b\u0438\u0431\u043e \u043b\u043e\u0433\u0438\u043a\u0438. \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044f\u0441\u044c \u043a \u043f\u0440\u0438\u043c\u0435\u0440\u0443 \u0432\u044b\u0448\u0435, \u0447\u0442\u043e \u043c\u043e\u0436\u043d\u043e  \u0434\u0435\u043b\u0430\u0442\u044c \u0432\u043d\u0443\u0442\u0440\u0438 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0435\u0439? </p> <ul> <li>\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u044f;</li> <li>\u043f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u0442\u044c \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u044b (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441\u0435\u0441\u0441\u0438\u044e \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u043f\u0443\u043b\u0430 \u0441\u0435\u0441\u0441\u0438\u0439);</li> <li>\u043f\u043e\u0434\u043c\u0435\u043d\u044f\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432, \u043d\u0435 \u0434\u043e\u0432\u043e\u0434\u044f \u0434\u043e \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432;</li> <li>\u043f\u043e-\u0442\u0438\u0445\u043e\u043c\u0443 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0430\u043f\u0434\u0435\u0439\u0442\u044b, \u043a\u0430\u043a \u0431\u0443\u0434\u0442\u043e \u0438\u0445 \u0438 \u043d\u0435 \u0431\u044b\u043b\u043e;</li> <li>... \u0447\u0442\u043e \u0443\u0433\u043e\u0434\u043d\u043e \u0435\u0449\u0451!</li> </ul>"},{"location":"filters-and-middlewares/#middlewares-structure","title":"\u0412\u0438\u0434\u044b \u0438 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0435\u0439","text":"<p>\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430 \u043e\u0431\u0440\u0430\u0442\u0438\u043c\u0441\u044f \u043a \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 aiogram 3.x, \u043d\u043e \u0443\u0436\u0435 \u0432  \u0434\u0440\u0443\u0433\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430  \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435:</p> <p></p> <p>\u041e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0435\u0439 \u0434\u0432\u0430 \u0432\u0438\u0434\u0430: \u0432\u043d\u0435\u0448\u043d\u0438\u0435 (outer) \u0438 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0435 (inner \u0438\u043b\u0438 \u043f\u0440\u043e\u0441\u0442\u043e \u00ab\u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438\u00bb). \u0412 \u0447\u0451\u043c \u0440\u0430\u0437\u043d\u0438\u0446\u0430?  Outer \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0434\u043e \u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c\u0438, \u0432 inner \u2014 \u043f\u043e\u0441\u043b\u0435. \u041d\u0430 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0435 \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442, \u0447\u0442\u043e \u0430\u043f\u0434\u0435\u0439\u0442/\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435/\u043a\u043e\u043b\u0431\u044d\u043a,  \u043f\u0440\u043e\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u0447\u0435\u0440\u0435\u0437 outer-\u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c, \u043c\u043e\u0436\u0435\u0442 \u0442\u0430\u043a \u043d\u0438 \u0432 \u043e\u0434\u0438\u043d \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u0438 \u043d\u0435 \u043f\u043e\u043f\u0430\u0441\u0442\u044c, \u0430 \u0435\u0441\u043b\u0438 \u043e\u043d \u043f\u043e\u043f\u0430\u043b \u0432 inner, \u0442\u043e \u0434\u0430\u043b\u044c\u0448\u0435  100% \u0431\u0443\u0434\u0435\u0442 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0445\u044d\u043d\u0434\u043b\u0435\u0440.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u0440\u043e\u0441\u0442\u0435\u0439\u0448\u0443\u044e \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u0441 \u0442\u043e\u0447\u043a\u0438 \u0437\u0440\u0435\u043d\u0438\u044f \u043a\u043e\u0434\u0430:</p> <pre><code># \u043d\u043e\u0432\u044b\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u044b!\nfrom typing import Callable, Dict, Any, Awaitable\nfrom aiogram import BaseMiddleware\nfrom aiogram.types import TelegramObject\n\nclass SomeMiddleware(BaseMiddleware):\n    async def __call__(\n        self,\n        handler: Callable[[TelegramObject, Dict[str, Any]], Awaitable[Any]],\n        event: TelegramObject,\n        data: Dict[str, Any]\n    ) -&gt; Any:\n        print(\"Before handler\")\n        result = await handler(event, data)\n        print(\"After handler\")\n        return result\n</code></pre> <p>\u041a\u0430\u0436\u0434\u0430\u044f \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c, \u043f\u043e\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u0430\u044f \u043d\u0430 \u043a\u043b\u0430\u0441\u0441\u0430\u0445 (\u0432\u043f\u0440\u043e\u0447\u0435\u043c, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b \u0438  \u0438\u043d\u044b\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u044b), \u0434\u043e\u043b\u0436\u043d\u0430 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c  \u043c\u0435\u0442\u043e\u0434 <code>__call__()</code> \u0441 \u0442\u0440\u0435\u043c\u044f \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u043c\u0438:</p> <ol> <li>handler \u2014 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u043e\u0431\u044a\u0435\u043a\u0442 \u0445\u044d\u043d\u043b\u0434\u043b\u0435\u0440\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d. \u0418\u043c\u0435\u0435\u0442 \u0441\u043c\u044b\u0441\u043b \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f inner-\u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0435\u0439,  \u0442.\u043a. outer-\u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u0435\u0449\u0451 \u043d\u0435 \u0437\u043d\u0430\u0435\u0442, \u0432 \u043a\u0430\u043a\u043e\u0439 \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043f\u043e\u043f\u0430\u0434\u0451\u0442 \u0430\u043f\u0434\u0435\u0439\u0442.</li> <li>event \u2014 \u0442\u0438\u043f Telegram-\u043e\u0431\u044a\u0435\u043a\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u043c. \u041e\u0431\u044b\u0447\u043d\u043e \u044d\u0442\u043e Update, Message, CallbackQuery \u0438\u043b\u0438 InlineQuery  (\u043d\u043e \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e). \u0415\u0441\u043b\u0438 \u0442\u043e\u0447\u043d\u043e \u0437\u043d\u0430\u0435\u0442\u0435, \u043a\u0430\u043a\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0435, \u0441\u043c\u0435\u043b\u043e \u043f\u0438\u0448\u0438\u0442\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <code>Message</code> \u0432\u043c\u0435\u0441\u0442\u043e  <code>TelegramObject</code>.</li> <li>data \u2014 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u0442\u0435\u043a\u0443\u0449\u0438\u043c \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u043c \u0434\u0430\u043d\u043d\u044b\u0435: FSM, \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043e\u043f. \u043f\u043e\u043b\u044f \u0438\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432, \u0444\u043b\u0430\u0433\u0438 (\u043e \u043d\u0438\u0445 \u043f\u043e\u0437\u0436\u0435) \u0438 \u0442.\u0434.  \u0412 \u044d\u0442\u043e\u0442 \u0436\u0435 <code>data</code> \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u043a\u043b\u0430\u0441\u0442\u044c \u0438\u0437 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0435\u0439 \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u0441\u0432\u043e\u0438 \u0434\u0430\u043d\u043d\u044b\u0435, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u0432 \u0432\u0438\u0434\u0435  \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u0445 (\u0442\u0430\u043a \u0436\u0435, \u043a\u0430\u043a \u0432 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0445).</li> </ol> <p>\u0421 \u0442\u0435\u043b\u043e\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0435\u0449\u0451 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u0435\u0435. </p> <ul> <li>\u0412\u0441\u0451, \u0447\u0442\u043e \u0432\u044b \u043d\u0430\u043f\u0438\u0448\u0435\u0442\u0435 \u0414\u041e 14-\u0439 \u0441\u0442\u0440\u043e\u043a\u0438, \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0434\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f  \u043d\u0438\u0436\u0435\u0441\u0442\u043e\u044f\u0449\u0435\u043c\u0443 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0443 (\u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0434\u0440\u0443\u0433\u0430\u044f \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u0438\u043b\u0438 \u043d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0445\u044d\u043d\u0434\u043b\u0435\u0440). </li> <li>\u0412\u0441\u0451, \u0447\u0442\u043e \u0432\u044b \u043d\u0430\u043f\u0438\u0448\u0435\u0442\u0435 \u041f\u041e\u0421\u041b\u0415 14-\u0439 \u0441\u0442\u0440\u043e\u043a\u0438, \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0443\u0436\u0435 \u043f\u043e\u0441\u043b\u0435 \u0432\u044b\u0445\u043e\u0434\u0430 \u0438\u0437 \u043d\u0438\u0436\u0435\u0441\u0442\u043e\u044f\u0449\u0435\u0433\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430.</li> <li>\u0415\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u043b\u0430\u0441\u044c, \u0432\u044b \u041e\u0411\u042f\u0417\u0410\u041d\u042b \u0432\u044b\u0437\u0432\u0430\u0442\u044c <code>await handler(event, data)</code>. \u0415\u0441\u043b\u0438 \u0445\u043e\u0442\u0438\u0442\u0435  \u00ab\u0434\u0440\u043e\u043f\u043d\u0443\u0442\u044c\u00bb \u0430\u043f\u0434\u0435\u0439\u0442, \u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0435 \u0432\u044b\u0437\u044b\u0432\u0430\u0439\u0442\u0435 \u0435\u0433\u043e.</li> <li>\u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u0441\u043b\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0438 <code>handler(...)</code>, \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c  <code>return await handler(event, data)</code> \u0438 \u0432\u044b\u0439\u0442\u0438 \u0438\u0437 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 <code>__call__()</code>.</li> </ul> <p>\u0412\u0441\u0435 \u043f\u0440\u0438\u0432\u044b\u0447\u043d\u044b\u0435 \u043d\u0430\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u044b (<code>Message</code>, <code>CallbackQuery</code> \u0438 \u0442.\u0434.) \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0430\u043f\u0434\u0435\u0439\u0442\u0430\u043c\u0438 (<code>Update</code>), \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0434\u043b\u044f <code>Message</code> \u0441\u043d\u0430\u0447\u0430\u043b\u0430  \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u0441\u044f \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438 \u0434\u043b\u044f <code>Update</code>, \u0430 \u0443\u0436\u0435 \u0437\u0430\u0442\u0435\u043c \u0434\u043b\u044f \u0441\u0430\u043c\u043e\u0433\u043e <code>Message</code>. \u041e\u0441\u0442\u0430\u0432\u0438\u043c \u043d\u0430 \u043c\u0435\u0441\u0442\u0435 \u043d\u0430\u0448\u0438 <code>print()</code> \u0438\u0437 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u0432\u044b\u0448\u0435 \u0438  \u043f\u0440\u043e\u0441\u043b\u0435\u0434\u0438\u043c, \u043a\u0430\u043a \u0431\u0443\u0434\u0443\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438, \u0435\u0441\u043b\u0438 \u043c\u044b \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u043c \u043f\u043e \u043e\u0434\u043d\u043e\u0439 outer- \u0438 inner-\u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438 \u0434\u043b\u044f \u0442\u0438\u043f\u043e\u0432  <code>Update</code> \u0438 <code>Message</code>.</p> <p>\u0415\u0441\u043b\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 (<code>Message</code>) \u0432 \u043a\u043e\u043d\u0435\u0447\u043d\u043e\u043c \u0441\u0447\u0451\u0442\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e\u0441\u044c \u043a\u0430\u043a\u0438\u043c-\u0442\u043e \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u043c:</p> <ol> <li><code>[Update Outer] Before handler</code></li> <li><code>[Update Inner] Before handler</code></li> <li><code>[Message Outer] Before handler</code></li> <li><code>[Message Inner] Before handler</code></li> <li><code>[Message Inner] After handler</code></li> <li><code>[Message Outer] After handler</code></li> <li><code>[Update Inner] After handler</code></li> <li><code>[Update Outer] After handler</code></li> </ol> <p>\u0415\u0441\u043b\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435 \u043d\u0430\u0448\u043b\u043e \u043d\u0443\u0436\u043d\u044b\u0439 \u0445\u044d\u043d\u0434\u043b\u0435\u0440:</p> <ol> <li><code>[Update Outer] Before handler</code></li> <li><code>[Update Inner] Before handler</code></li> <li><code>[Message Outer] Before handler</code></li> <li><code>[Message Outer] After handler</code></li> <li><code>[Update Inner] After handler</code></li> <li><code>[Update Outer] After handler</code></li> </ol> <p>\u0411\u0430\u043d\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432 \u0431\u043e\u0442\u0435</p> <p>\u041e\u0447\u0435\u043d\u044c \u0447\u0430\u0441\u0442\u043e \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445 \u043f\u043e Telegram-\u0431\u043e\u0442\u0430\u043c \u0437\u0430\u0434\u0430\u044e\u0442 \u043e\u0434\u0438\u043d \u0438 \u0442\u043e\u0442 \u0436\u0435 \u0432\u043e\u043f\u0440\u043e\u0441: \u00ab\u0430 \u043a\u0430\u043a \u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0431\u043e\u0442\u0435, \u0447\u0442\u043e\u0431\u044b  \u0442\u043e\u0442 \u043d\u0435 \u043c\u043e\u0433 \u0431\u043e\u0442\u0443 \u043f\u0438\u0441\u0430\u0442\u044c?\u00bb. \u0421\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e, \u043b\u0443\u0447\u0448\u0438\u043c \u043c\u0435\u0441\u0442\u043e\u043c \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0431\u0443\u0434\u0435\u0442 outer-\u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u043d\u0430 Update, \u043a\u0430\u043a \u0441\u0430\u043c\u044b\u0439 \u0440\u0430\u043d\u043d\u0438\u0439  \u044d\u0442\u0430\u043f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u044e\u0437\u0435\u0440\u0430. \u0411\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e, \u043e\u0434\u043d\u0430 \u0438\u0437 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u0432 aiogram \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0435\u0439 \u043a\u043b\u0430\u0434\u0451\u0442 \u0432 <code>data</code> \u0441\u043b\u043e\u0432\u0430\u0440\u0438\u043a  \u0441 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439 \u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 \u043f\u043e \u043a\u043b\u044e\u0447\u0443 <code>event_from_user</code>. \u0414\u0430\u043b\u0435\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0441\u0442\u0430\u0442\u044c \u043e\u0442\u0442\u0443\u0434\u0430 ID \u044e\u0437\u0435\u0440\u0430, \u0441\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0441  \u043a\u0430\u043a\u0438\u043c-\u043d\u0438\u0431\u0443\u0434\u044c \u0441\u0432\u043e\u0438\u043c \u00ab\u0441\u043f\u0438\u0441\u043a\u043e\u043c \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445\u00bb \u0438 \u043f\u0440\u043e\u0441\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c <code>return</code>, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0443\u044e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443  \u043f\u043e \u0446\u0435\u043f\u043e\u0447\u043a\u0435.</p>"},{"location":"filters-and-middlewares/#middlewares-example","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0435\u0439","text":"<p>\u0420\u0430\u0437\u044b\u0433\u0440\u0430\u0435\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e: \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0435 <code>/checkin</code> \u0432 \u041b\u0421 \u0431\u0443\u0434\u0435\u043c \u043f\u0440\u0438\u0441\u044b\u043b\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u043a\u043d\u043e\u043f\u043a\u043e\u0439, \u043f\u043e \u043d\u0430\u0436\u0430\u0442\u0438\u044e \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435.  \u041d\u043e \u043c\u044b \u0445\u043e\u0442\u0438\u043c, \u0447\u0442\u043e\u0431\u044b \u043f\u043e \u0432\u044b\u0445\u043e\u0434\u043d\u044b\u043c \u0434\u043d\u044f\u043c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e \u044d\u0442\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432\u043e\u043e\u0431\u0449\u0435 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u043b\u0430,  \u0430 \u043f\u043e \u043d\u0430\u0436\u0430\u0442\u0438\u044e \u043b\u044e\u0431\u044b\u0435 \u0438\u043d\u043b\u0430\u0439\u043d-\u043a\u043d\u043e\u043f\u043a\u0438 \u044e\u0437\u0435\u0440\u0443 \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u043b\u043e \u043e\u043a\u043d\u043e \u0441 \u043d\u0430\u0434\u043f\u0438\u0441\u044c\u044e \u201c\u0431\u043e\u0442 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442\u201d. </p> <p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043d\u043e\u0432\u044b\u0439 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 middlewares \u0438 \u0432 \u043d\u0451\u043c \u0444\u0430\u0439\u043b weekend.py:</p> middlewares/weekend.py<pre><code>from datetime import datetime\nfrom typing import Callable, Dict, Any, Awaitable\n\nfrom aiogram import BaseMiddleware\nfrom aiogram.types import Message, CallbackQuery\n\n\ndef _is_weekend() -&gt; bool:\n    # 5 - \u0441\u0443\u0431\u0431\u043e\u0442\u0430, 6 - \u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435\n    return datetime.utcnow().weekday() in (5, 6)\n\n\n# \u042d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 inner-\u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\nclass WeekendMessageMiddleware(BaseMiddleware):\n    async def __call__(\n        self,\n        handler: Callable[[Message, Dict[str, Any]], Awaitable[Any]],\n        event: Message,\n        data: Dict[str, Any]\n    ) -&gt; Any:\n        # \u0415\u0441\u043b\u0438 \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u043d\u0435 \u0441\u0443\u0431\u0431\u043e\u0442\u0430 \u0438 \u043d\u0435 \u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435,\n        # \u0442\u043e \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443.\n        if not _is_weekend():\n            return await handler(event, data)\n        # \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u0440\u043e\u0441\u0442\u043e \u0432\u0435\u0440\u043d\u0451\u0442\u0441\u044f None\n        # \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043f\u0440\u0435\u043a\u0440\u0430\u0442\u0438\u0442\u0441\u044f\n\n\n# \u042d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 outer-\u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u043d\u0430 \u043b\u044e\u0431\u044b\u0435 \u043a\u043e\u043b\u0431\u044d\u043a\u0438\nclass WeekendCallbackMiddleware(BaseMiddleware):\n    async def __call__(\n        self,\n        handler: Callable[[CallbackQuery, Dict[str, Any]], Awaitable[Any]],\n        event: CallbackQuery,\n        data: Dict[str, Any]\n    ) -&gt; Any:\n        # \u0415\u0441\u043b\u0438 \u0441\u0435\u0433\u043e\u0434\u043d\u044f \u043d\u0435 \u0441\u0443\u0431\u0431\u043e\u0442\u0430 \u0438 \u043d\u0435 \u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435,\n        # \u0442\u043e \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443.\n        if not _is_weekend():\n            return await handler(event, data)\n        # \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u043c \u043d\u0430 \u043a\u043e\u043b\u0431\u044d\u043a \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e\n        # \u0438 \u043f\u0440\u0435\u043a\u0440\u0430\u0449\u0430\u0435\u043c \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0443\u044e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443\n        await event.answer(\n            \"\u0411\u043e\u0442 \u043f\u043e \u0432\u044b\u0445\u043e\u0434\u043d\u044b\u043c \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442!\",\n            show_alert=True\n        )\n        return\n</code></pre> <p>\u0410 \u0437\u0430\u043e\u0434\u043d\u043e \u0438 \u043f\u0440\u043e\u0441\u0442\u0435\u043d\u044c\u043a\u0443\u044e \u0438\u043d\u043b\u0430\u0439\u043d-\u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443 \u0441 \u043e\u0434\u043d\u043e\u0439 callback-\u043a\u043d\u043e\u043f\u043a\u043e\u0439:</p> keyboards/checkin.py<pre><code>from aiogram.types import InlineKeyboardMarkup\nfrom aiogram.utils.keyboard import InlineKeyboardBuilder\n\n\ndef get_checkin_kb() -&gt; InlineKeyboardMarkup:\n    kb = InlineKeyboardBuilder()\n    kb.button(text=\"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c\", callback_data=\"confirm\")\n    return kb.as_markup()\n</code></pre> <p>\u0418, \u043d\u0430\u043a\u043e\u043d\u0435\u0446, \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043d\u043e\u0432\u044b\u0439 \u0444\u0430\u0439\u043b \u0441 \u0440\u043e\u0443\u0442\u0435\u0440\u043e\u043c \u0438 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u043c\u0438:</p> handlers/checkin.py<pre><code>from aiogram import F\nfrom aiogram import Router\nfrom aiogram.dispatcher.filters import Command\nfrom aiogram.types import Message, CallbackQuery\n\nfrom keyboards.checkin import get_checkin_kb\nfrom middlewares.weekend import WeekendMessageMiddleware\n\nrouter = Router()\nrouter.message.filter(F.chat.type == \"private\")\nrouter.message.middleware(WeekendMessageMiddleware())\n@router.message(\n    Command(commands=[\"checkin\"])\n)\nasync def cmd_checkin(message: Message):\n    await message.answer(\n        \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043d\u0438\u0436\u0435:\",\n        reply_markup=get_checkin_kb()\n    )\n\n\n@router.callback_query(\n    text=\"confirm\"\n)\nasync def checkin_confirm(callback: CallbackQuery):\n    await callback.answer(\n        \"\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u043e!\",\n        show_alert=True\n    )\n</code></pre> <p>\u041a\u0430\u043a \u0432\u0438\u0434\u0438\u0442\u0435, \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u044e\u0442\u0441\u044f \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c. \u0415\u0441\u043b\u0438 \u043f\u0440\u043e\u0441\u0442\u043e <code>middleware(...)</code>, \u0437\u043d\u0430\u0447\u0438\u0442, \u044d\u0442\u043e \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f  \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c, \u0430 \u0435\u0441\u043b\u0438 <code>outer_middleware(...)</code>, \u0442\u043e \u044d\u0442\u043e \u0432\u043d\u0435\u0448\u043d\u044f\u044f.</p> <p>\u041c\u044b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043b\u0438 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u0434\u043b\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u0430 \u0434\u043b\u044f \u043a\u043e\u043b\u0431\u044d\u043a\u043e\u0432 \u0433\u0434\u0435? \u0420\u0430\u0437 \u043c\u044b \u0443\u0441\u043b\u043e\u0432\u0438\u043b\u0438\u0441\u044c, \u0447\u0442\u043e \u0431\u0443\u0434\u0435\u043c \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u043e\u043e\u0431\u0449\u0435  \u0432\u0441\u0435 \u043a\u043e\u043b\u0431\u044d\u043a\u0438, \u0442\u043e \u043b\u043e\u0433\u0438\u0447\u043d\u043e \u043d\u0430\u0432\u0435\u0441\u0438\u0442\u044c \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u043f\u0440\u044f\u043c\u043e \u043d\u0430 \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440, \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0432 bot.py \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c  \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u0438 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443: <code>dp.callback_query.outer_middleware(WeekendCallbackMiddleware())</code>.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c, \u0435\u0441\u043b\u0438 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u0431\u0430\u043b\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441 \u043f\u0435\u0440\u0435\u043c\u0435\u0449\u0435\u043d\u0438\u044f\u043c\u0438 \u0432\u043e \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0430 <code>/checkin</code> \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442  \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a\u0430 \u043f\u043e \u043f\u044f\u0442\u043d\u0438\u0446\u0443, \u0430 \u043f\u043e\u043f\u044b\u0442\u043a\u0430 \u043d\u0430\u0436\u0430\u0442\u044c \u043d\u0430 \u0438\u043d\u043b\u0430\u0439\u043d-\u043a\u043d\u043e\u043f\u043a\u0443 \u00ab\u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c\u00bb \u043f\u043e \u0432\u044b\u0445\u043e\u0434\u043d\u044b\u043c \u043f\u043e\u043a\u0430\u0436\u0435\u0442  \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u0448\u043a\u0443 \u0441 \u0442\u0435\u043a\u0441\u0442\u043e\u043c \u00ab\u0411\u043e\u0442 \u043f\u043e \u0432\u044b\u0445\u043e\u0434\u043d\u044b\u043c \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442!\u00bb.</p>"},{"location":"filters-and-middlewares/#flags","title":"\u0424\u043b\u0430\u0433\u0438","text":"<p>\u0415\u0449\u0451 \u043e\u0434\u043d\u0430 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u0430\u044f \u0444\u0438\u0447\u0430 aiogram 3.x \u2014 \u0444\u043b\u0430\u0433\u0438. \u041f\u043e \u0441\u0443\u0442\u0438,  \u044d\u0442\u043e \u043d\u0435\u043a\u0438\u0435 \u00ab\u043c\u0430\u0440\u043a\u0435\u0440\u044b\u00bb \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u0447\u0438\u0442\u0430\u0442\u044c \u0432 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044f\u0445 \u0438 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e. \u0421 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0444\u043b\u0430\u0433\u043e\u0432 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043c\u0435\u0442\u0438\u0442\u044c \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b,  \u043d\u0435 \u0432\u043b\u0435\u0437\u0430\u044f \u0432 \u0438\u0445 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044e\u044e \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0442\u0435\u043c \u0447\u0442\u043e-\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0432 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044f\u0445, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0442\u0440\u043e\u0442\u0442\u043b\u0438\u043d\u0433. </p> <p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0438\u0437\u043c\u0435\u043d\u0451\u043d\u043d\u044b\u0439 \u043a\u043e\u0434  \u0438\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438. \u041f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0438\u043c,  \u0432 \u0432\u0430\u0448\u0435\u043c \u0431\u043e\u0442\u0435 \u043c\u043d\u043e\u0433\u043e \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0437\u0430\u043d\u0438\u043c\u0430\u044e\u0442\u0441\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u043e\u0439 \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u043e\u0432 \u0438\u043b\u0438 \u043f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u043e\u0439 \u0442\u0435\u043a\u0441\u0442\u0430 \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439  \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438. \u0415\u0441\u043b\u0438 \u0442\u0430\u043a\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0434\u043e\u043b\u0433\u043e, \u0442\u043e \u0445\u043e\u0440\u043e\u0448\u0438\u043c \u0442\u043e\u043d\u043e\u043c \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442  \u0438\u043b\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0444\u043e\u0442\u043e \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438 \u043c\u0435\u0442\u043e\u0434\u0430 sendChatAction.  \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u0442\u0430\u043a\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u0441\u0435\u0433\u043e \u043d\u0430 5 \u0441\u0435\u043a\u0443\u043d\u0434, \u043d\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u0441\u044f, \u0435\u0441\u043b\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435  \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0440\u0430\u043d\u044c\u0448\u0435. \u0423 aiogram \u0435\u0441\u0442\u044c \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441 <code>ChatActionSender</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c  \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441 \u0434\u043e \u0442\u0435\u0445 \u043f\u043e\u0440, \u043f\u043e\u043a\u0430 \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0441\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.</p> <p>\u041c\u044b \u0442\u0430\u043a\u0436\u0435 \u043d\u0435 \u0445\u043e\u0442\u0438\u043c \u0432\u043d\u0443\u0442\u0440\u044c \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430 \u0437\u0430\u043f\u0438\u0445\u0438\u0432\u0430\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 <code>ChatActionSender</code>, \u043f\u0443\u0441\u0442\u044c \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u0435\u0442 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u0441 \u0442\u0435\u043c\u0438  \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u043c\u0438, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d \u0444\u043b\u0430\u0433 <code>long_operation</code> \u0441\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u0441\u0442\u0430\u0442\u0443\u0441\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <code>typing</code>, <code>choose_sticker</code>...).  \u0410 \u0432\u043e\u0442 \u0438 \u0441\u0430\u043c\u0430 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044c:</p> <pre><code>from aiogram.dispatcher.flags.getter import get_flag\nfrom aiogram.utils.chat_action import ChatActionSender\n\nclass ChatActionMiddleware(BaseMiddleware):\n    async def __call__(\n        self,\n        handler: Callable[[Message, Dict[str, Any]], Awaitable[Any]],\n        event: Message,\n        data: Dict[str, Any]\n    ) -&gt; Any:\n        long_operation_type = get_flag(data, \"long_operation\")\n\n        # \u0415\u0441\u043b\u0438 \u0442\u0430\u043a\u043e\u0433\u043e \u0444\u043b\u0430\u0433\u0430 \u043d\u0430 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0435 \u043d\u0435\u0442\n        if not long_operation_type:\n            return await handler(event, data)\n\n        # \u0415\u0441\u043b\u0438 \u0444\u043b\u0430\u0433 \u0435\u0441\u0442\u044c\n        async with ChatActionSender(\n                action=long_operation_type, \n                chat_id=event.chat.id\n        ):\n            return await handler(event, data)\n</code></pre> <p>\u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u0447\u0442\u043e\u0431\u044b \u0444\u043b\u0430\u0433 \u0431\u044b\u043b \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d, \u0435\u0433\u043e \u043d\u0430\u0434\u043e \u0433\u0434\u0435-\u0442\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c.  \u0412\u0430\u0440\u0438\u0430\u043d\u0442: <code>@dp.message(&lt;\u0442\u0443\u0442 \u0432\u0430\u0448\u0438 \u0444\u0438\u043b\u044c\u0442\u0440\u044b&gt;, flags={\"long_operation\": \"upload_video_note\"})</code></p> <p>\u041f\u0440\u0438\u043c\u0435\u0440 throttling-\u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438 \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0432 \u043c\u043e\u0451\u043c  \u043a\u0430\u0437\u0438\u043d\u043e-\u0431\u043e\u0442\u0435.</p>"},{"location":"fsm/","title":"\u041a\u043e\u043d\u0435\u0447\u043d\u044b\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u044b (FSM)","text":"<p>\u041e \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u0435\u0440\u0441\u0438\u0439</p> <p>\u041a\u043e\u0434 \u0432 \u0433\u043b\u0430\u0432\u0430\u0445 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 aiogram 3.0 beta3. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438.</p>"},{"location":"fsm/#theory","title":"\u0422\u0435\u043e\u0440\u0438\u044f","text":"<p>\u0412 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435 \u043c\u044b \u043f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u043c \u043e \u0435\u0449\u0451 \u043e\u0434\u043d\u043e\u0439 \u0432\u0430\u0436\u043d\u043e\u0439 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0431\u043e\u0442\u043e\u0432: \u043e \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432. \u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0434\u0430\u043b\u0435\u043a\u043e \u043d\u0435 \u0432\u0441\u0435  \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0432 \u0431\u043e\u0442\u0435 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c \u0437\u0430 \u043e\u0434\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0438\u043b\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u0443. \u041f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0438\u043c, \u0435\u0441\u0442\u044c \u0431\u043e\u0442 \u0434\u043b\u044f \u0437\u043d\u0430\u043a\u043e\u043c\u0441\u0442\u0432, \u0433\u0434\u0435 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043d\u0443\u0436\u043d\u043e  \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u043c\u044f, \u0432\u043e\u0437\u0440\u0430\u0441\u0442 \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e \u0441 \u043b\u0438\u0446\u043e\u043c. \u041c\u043e\u0436\u043d\u043e, \u043a\u043e\u043d\u0435\u0447\u043d\u043e, \u043f\u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e, \u0430 \u0432 \u043f\u043e\u0434\u043f\u0438\u0441\u0438  \u043a \u043d\u0435\u0439 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u043d\u043e \u044d\u0442\u043e \u043d\u0435\u0443\u0434\u043e\u0431\u043d\u043e \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0432\u0432\u043e\u0434\u0430. \u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u043c \u043f\u043e\u0448\u0430\u0433\u043e\u0432\u044b\u0439 \u0432\u0432\u043e\u0434 \u0434\u0430\u043d\u043d\u044b\u0445, \u0433\u0434\u0435 \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u0431\u043e\u0442 \u00ab\u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u00bb \u0440\u0435\u0436\u0438\u043c \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e  \u044e\u0437\u0435\u0440\u0430, \u0434\u0430\u043b\u0435\u0435 \u043d\u0430 \u043a\u0430\u0436\u0434\u043e\u043c \u044d\u0442\u0430\u043f\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0432\u0432\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u0430 \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0435 <code>/cancel</code> \u043f\u0440\u0435\u043a\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u0436\u0438\u0434\u0430\u0442\u044c \u043e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0439 \u0448\u0430\u0433 \u0438  \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0440\u0435\u0436\u0438\u043c. \u0412\u0437\u0433\u043b\u044f\u043d\u0438\u0442\u0435 \u043d\u0430 \u0441\u0445\u0435\u043c\u0443 \u043d\u0438\u0436\u0435:</p> <p></p> <p>\u0417\u0435\u043b\u0451\u043d\u043e\u0439 \u0441\u0442\u0440\u0435\u043b\u043a\u043e\u0439 \u043e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u043f\u043e \u0448\u0430\u0433\u0430\u043c \u0431\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a, \u0441\u0438\u043d\u0438\u0435 \u0441\u0442\u0440\u0435\u043b\u043a\u0438 \u043e\u0437\u043d\u0430\u0447\u0430\u044e\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0438  \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0432\u0432\u043e\u0434\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u044e\u0437\u0435\u0440 \u0443\u043a\u0430\u0437\u0430\u043b, \u0447\u0442\u043e \u0435\u043c\u0443 250 \u043b\u0435\u0442, \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u043e\u0437\u0440\u0430\u0441\u0442 \u0437\u0430\u043d\u043e\u0432\u043e), \u0430 \u043a\u0440\u0430\u0441\u043d\u044b\u0435  \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u0432\u044b\u0445\u043e\u0434 \u0438\u0437 \u0432\u0441\u0435\u0433\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 \u0438\u0437-\u0437\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u044b <code>/cancel</code> \u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439, \u043e\u0437\u043d\u0430\u0447\u0430\u044e\u0449\u0435\u0439 \u043e\u0442\u043c\u0435\u043d\u0443.</p> <p>\u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u0441\u043e \u0441\u0445\u0435\u043c\u044b \u0432\u044b\u0448\u0435 \u0432 \u0442\u0435\u043e\u0440\u0438\u0438 \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c\u043e\u0432 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u043c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u043c (\u0438\u043b\u0438 FSM \u2014 Finite State Machine). \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e\u0431 \u044d\u0442\u043e\u043c \u043c\u043e\u0436\u043d\u043e  \u043f\u0440\u043e\u0447\u0435\u0441\u0442\u044c \u0437\u0434\u0435\u0441\u044c.</p> <p>\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432</p> <p>\u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u043f\u043e\u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u0435\u0442\u0435\u0441\u044c \u0441 FSM \u0432 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435, \u0432\u044b \u043d\u0430\u0432\u0435\u0440\u043d\u044f\u043a\u0430 \u043e\u0449\u0443\u0442\u0438\u0442\u0435, \u043a\u0430\u043a \u043c\u043d\u043e\u0433\u043e \u0432\u0441\u0435\u0433\u043e \u043f\u0440\u0438\u0434\u0451\u0442\u0441\u044f \u0441\u0434\u0435\u043b\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b  \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043b\u043e\u0436\u043d\u043e\u0440\u0430\u0437\u0432\u0435\u0442\u0432\u043b\u0451\u043d\u043d\u0443\u044e \u0446\u0435\u043f\u043e\u0447\u043a\u0443 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439. \u041a \u0441\u0447\u0430\u0441\u0442\u044c\u044e, \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430  aiogram-dialog \u043e\u0442 Tishka17, \u0443\u043f\u0440\u043e\u0449\u0430\u044e\u0449\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 \u043c\u0430\u0448\u0438\u043d\u043e\u0439 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439.</p>"},{"location":"fsm/#practice","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430","text":"<p>\u0412 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0445 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u0432 \u0432 aiogram \u0443\u0436\u0435 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u0432 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439  \u043c\u0435\u0436\u0434\u0443 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0430\u043c\u0438 \u0431\u043e\u0442\u0430 (\u0432\u043f\u0440\u043e\u0447\u0435\u043c, \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043c\u0435\u0448\u0430\u0435\u0442 \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u0432\u043e\u0439), \u0430 \u043f\u043e\u043c\u0438\u043c\u043e, \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439  \u043c\u043e\u0436\u043d\u043e \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u044b\u0448\u0435\u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0438\u043c\u044f \u0438 \u0432\u043e\u0437\u0440\u0430\u0441\u0442 \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f  \u0433\u0434\u0435-\u043b\u0438\u0431\u043e. \u0421\u043f\u0438\u0441\u043e\u043a \u0438\u043c\u0435\u044e\u0449\u0438\u0445\u0441\u044f \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449 FSM \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438  \u0432 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438 aiogram,  \u0430 \u0432 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435 \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u0430\u043c\u044b\u043c \u043f\u0440\u043e\u0441\u0442\u044b\u043c \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c  MemoryStorage, \u043a\u043e\u0442\u043e\u0440\u044b\u0439  \u0445\u0440\u0430\u043d\u0438\u0442 \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438. \u041e\u043d \u0438\u0434\u0435\u0430\u043b\u044c\u043d\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432, \u043d\u043e \u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0445  \u043f\u0440\u043e\u0435\u043a\u0442\u0430\u0445, \u0442.\u043a. MemoryStorage \u0445\u0440\u0430\u043d\u0438\u0442 \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 \u0431\u0435\u0437 \u0441\u0431\u0440\u043e\u0441\u0430 \u043d\u0430 \u0434\u0438\u0441\u043a. \u0422\u0430\u043a\u0436\u0435 \u0441\u0442\u043e\u0438\u0442 \u043e\u0442\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0435  \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u044b \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 (<code>message_handler</code>, <code>edited_message_handler</code>), \u043d\u043e \u0442\u0430\u043a\u0436\u0435  \u0441 \u043a\u043e\u043b\u0431\u044d\u043a\u0430\u043c\u0438 \u0438 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u043e\u043c.</p> <p>\u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043c\u044b \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0438\u043c\u0438\u0442\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430 \u0435\u0434\u044b \u0438 \u043d\u0430\u043f\u0438\u0442\u043a\u043e\u0432 \u0432 \u043a\u0430\u0444\u0435. </p>"},{"location":"fsm/#define-states","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0448\u0430\u0433\u043e\u0432","text":"<p>\u041f\u0440\u0435\u0436\u0434\u0435, \u0447\u0435\u043c \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0438\u043c \u043d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043a FSM, \u043e\u043f\u0438\u0448\u0435\u043c \u043f\u043e-\u0431\u044b\u0441\u0442\u0440\u043e\u043c\u0443 \u043f\u0440\u043e\u0441\u0442\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c  \u043e\u0431\u044b\u0447\u043d\u0443\u044e \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443 \u0441 \u043a\u043d\u043e\u043f\u043a\u0430\u043c\u0438 \u0432 \u043e\u0434\u0438\u043d \u0440\u044f\u0434, \u043e\u043d\u0430 \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u0442\u0441\u044f \u043d\u0430\u043c \u0432 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u043c:</p> keyboards/simple_row.py<pre><code>from aiogram.utils.keyboard import ReplyKeyboardMarkup, KeyboardButton\n\n\ndef make_row_keyboard(items: list[str]) -&gt; ReplyKeyboardMarkup:\n\"\"\"\n    \u0421\u043e\u0437\u0434\u0430\u0451\u0442 \u0440\u0435\u043f\u043b\u0430\u0439-\u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443 \u0441 \u043a\u043d\u043e\u043f\u043a\u0430\u043c\u0438 \u0432 \u043e\u0434\u0438\u043d \u0440\u044f\u0434\n    :param items: \u0441\u043f\u0438\u0441\u043e\u043a \u0442\u0435\u043a\u0441\u0442\u043e\u0432 \u0434\u043b\u044f \u043a\u043d\u043e\u043f\u043e\u043a\n    :return: \u043e\u0431\u044a\u0435\u043a\u0442 \u0440\u0435\u043f\u043b\u0430\u0439-\u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b\n    \"\"\"\n    row = [KeyboardButton(text=item) for item in items]\n    return ReplyKeyboardMarkup(keyboard=[row], resize_keyboard=True)\n</code></pre> <p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0448\u0430\u0433\u043e\u0432 \u0434\u043b\u044f \u00ab\u0437\u0430\u043a\u0430\u0437\u0430\u00bb \u0435\u0434\u044b. \u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0444\u0430\u0439\u043b <code>handlers/ordering_food.py</code>, \u0433\u0434\u0435 \u043e\u043f\u0438\u0448\u0435\u043c \u0441\u043f\u0438\u0441\u043a\u0438 \u0431\u043b\u044e\u0434 \u0438 \u0438\u0445 \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u0432  (\u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0439 \u0436\u0438\u0437\u043d\u0438 \u044d\u0442\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0430\u0442\u044c\u0441\u044f \u0438\u0437 \u043a\u0430\u043a\u043e\u0439-\u043b\u0438\u0431\u043e \u0411\u0414):</p> <pre><code># \u042d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043b\u0435\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0432 \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0442\u0435\u043a\u0441\u0442, \u043e\u0442\u0441\u044e\u0434\u0430 \n# \u0442\u0430\u043a\u0430\u044f \u043d\u0430 \u043f\u0435\u0440\u0432\u044b\u0439 \u0432\u0437\u0433\u043b\u044f\u0434 \u0441\u0442\u0440\u0430\u043d\u043d\u0430\u044f \u0444\u043e\u0440\u043c\u0430 \u043f\u0440\u0438\u043b\u0430\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445\navailable_food_names = [\"\u0421\u0443\u0448\u0438\", \"\u0421\u043f\u0430\u0433\u0435\u0442\u0442\u0438\", \"\u0425\u0430\u0447\u0430\u043f\u0443\u0440\u0438\"]\navailable_food_sizes = [\"\u041c\u0430\u043b\u0435\u043d\u044c\u043a\u0443\u044e\", \"\u0421\u0440\u0435\u0434\u043d\u044e\u044e\", \"\u0411\u043e\u043b\u044c\u0448\u0443\u044e\"]\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043e\u043f\u0438\u0448\u0435\u043c \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u00ab\u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\u00bb \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 (\u0432\u044b\u0431\u043e\u0440 \u0435\u0434\u044b). \u041d\u0430 \u0441\u043b\u043e\u0432\u0430\u0445 \u043c\u043e\u0436\u043d\u043e \u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0442\u0430\u043a: \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442  \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/food</code>, \u0431\u043e\u0442 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435\u043c \u0441 \u043f\u0440\u043e\u0441\u044c\u0431\u043e\u0439 \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0431\u043b\u044e\u0434\u043e \u0438 \u0432\u0441\u0442\u0430\u0451\u0442 \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 *\u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0432\u044b\u0431\u043e\u0440 \u0431\u043b\u044e\u0434\u0430* \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e  \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f. \u041a\u0430\u043a \u0442\u043e\u043b\u044c\u043a\u043e \u044e\u0437\u0435\u0440 \u0434\u0435\u043b\u0430\u0435\u0442 \u0432\u044b\u0431\u043e\u0440, \u0431\u043e\u0442, \u043d\u0430\u0445\u043e\u0434\u044f\u0441\u044c \u0432 \u044d\u0442\u043e\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438, \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0430, \u0430 \u0437\u0430\u0442\u0435\u043c \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0440\u0435\u0448\u0435\u043d\u0438\u0435,  \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u0432\u043e\u0434 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e (\u0431\u0435\u0437 \u0441\u043c\u0435\u043d\u044b \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f) \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c\u0443 \u0448\u0430\u0433\u0443 *\u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0432\u044b\u0431\u043e\u0440 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043f\u043e\u0440\u0446\u0438\u0438*. \u041a\u043e\u0433\u0434\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c  \u0438 \u0437\u0434\u0435\u0441\u044c \u0432\u0432\u043e\u0434\u0438\u0442 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u0431\u043e\u0442 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442 \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 (\u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0437\u0430\u043a\u0430\u0437\u0430) \u0438 \u0441\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435. \u041f\u043e\u0437\u0434\u043d\u0435\u0435  \u0432 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435 \u043c\u044b \u043d\u0430\u0443\u0447\u0438\u043c\u0441\u044f \u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u0438\u043d\u0443\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0441\u0431\u0440\u043e\u0441 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u044d\u0442\u0430\u043f\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <code>/cancel</code>.</p>"},{"location":"fsm/#step-1","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0448\u0430\u0433\u0430 1","text":"<p>\u0418\u0442\u0430\u043a, \u043f\u0435\u0440\u0435\u0439\u0434\u0451\u043c \u043d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043a \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439. \u0414\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043b\u0430\u0441\u0441, \u043d\u0430\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439\u0441\u044f  \u043e\u0442 \u043a\u043b\u0430\u0441\u0441\u0430 <code>StatesGroup</code>, \u0432\u043d\u0443\u0442\u0440\u0438 \u043d\u0435\u0433\u043e \u043d\u0443\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435, \u043f\u0440\u0438\u0441\u0432\u043e\u0438\u0432 \u0438\u043c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b \u043a\u043b\u0430\u0441\u0441\u0430 <code>State</code>:</p> <pre><code>class OrderFood(StatesGroup):\n    choosing_food_name = State()\n    choosing_food_size = State()\n</code></pre> <p>\u041d\u0430\u043f\u0438\u0448\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0448\u0430\u0433\u0430, \u0440\u0435\u0430\u0433\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/food</code>:</p> <pre><code>from aiogram.dispatcher.fsm.context import FSMContext \n\n@router.message(Command(commands=[\"food\"]))\nasync def cmd_food(message: Message, state: FSMContext):\nawait message.answer(\n        text=\"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u043b\u044e\u0434\u043e:\",\n        reply_markup=make_row_keyboard(available_food_names)\n    )\n    # \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \"\u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\"\nawait state.set_state(OrderFood.choosing_food_name)\n</code></pre> <p>\u0427\u0442\u043e\u0431\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u043e\u043c FSM, \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c <code>state</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0438\u043c\u0435\u0442\u044c  \u0442\u0438\u043f <code>FSMContext</code>. \u0410 \u0432 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0441\u0442\u0440\u043e\u043a\u0435 \u043c\u044b \u044f\u0432\u043d\u043e \u0433\u043e\u0432\u043e\u0440\u0438\u043c \u0431\u043e\u0442\u0443 \u0432\u0441\u0442\u0430\u0442\u044c \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 <code>choosing_food_name</code> \u0438\u0437 \u0433\u0440\u0443\u043f\u043f\u044b <code>OrderFood</code>. </p> <p>\u041e\u0442\u043b\u0438\u0447\u0438\u0435 \u043e\u0442 aiogram 2.x</p> <p>\u0412 aiogram 2.x \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u043d\u0430 state \u043e\u0437\u043d\u0430\u0447\u0430\u043b\u043e \u00ab\u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0438 \u044f\u0432\u043d\u043e \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\u00bb  (\u0438\u043d\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, <code>state=None</code>). \u0412 aiogram 3.x \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \u00ab\u043f\u0440\u0438 \u043b\u044e\u0431\u043e\u043c \u0441\u0442\u0435\u0439\u0442\u0435\u00bb. \u041d\u0430\u043f\u043e\u043c\u043d\u044e, \u0447\u0442\u043e \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u0439  \u043f\u043e\u0434\u0445\u043e\u0434 \u0432 \u00ab\u0442\u0440\u043e\u0439\u043a\u0435\u00bb \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0441 \u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u0442\u0430\u0439\u043f\u0430\u043c\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439.</p> <p>\u0414\u0430\u043b\u0435\u0435 \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0445\u044d\u043d\u0434\u043b\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043b\u043e\u0432\u0438\u0442 \u043e\u0434\u0438\u043d \u0438\u0437 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432 \u0431\u043b\u044e\u0434 \u0438\u0437 \u043d\u0430\u0448\u0435\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430:</p> <pre><code>@router.message(\n    OrderFood.choosing_food_name, \n    F.text.in_(available_food_names)\n)\nasync def food_chosen(message: Message, state: FSMContext):\n    await state.update_data(chosen_food=message.text.lower())\n    await message.answer(\n        text=\"\u0421\u043f\u0430\u0441\u0438\u0431\u043e. \u0422\u0435\u043f\u0435\u0440\u044c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0440 \u043f\u043e\u0440\u0446\u0438\u0438:\",\n        reply_markup=make_row_keyboard(available_food_sizes)\n    )\n    await state.set_state(OrderFood.choosing_food_size)\n</code></pre> <p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430. \u0424\u0438\u043b\u044c\u0442\u0440\u044b (\u0441\u0442\u0440\u043e\u043a\u0438 2-3) \u0441\u043e\u043e\u0431\u0449\u0430\u044e\u0442, \u0447\u0442\u043e \u043d\u0438\u0436\u0435\u0441\u0442\u043e\u044f\u0449\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442  \u0442\u043e\u0433\u0434\u0430 \u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u043e\u0433\u0434\u0430, \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0431\u0443\u0434\u0435\u0442 \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 <code>OrderFood.choosing_food_name</code> \u0438 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0435\u0442  \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0442\u044c \u0441 \u043e\u0434\u043d\u0438\u043c \u0438\u0437 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0441\u043f\u0438\u0441\u043a\u0430 <code>available_food_names</code>. \u0412 \u0441\u0442\u0440\u043e\u043a\u0435 6 \u043c\u044b \u043f\u0438\u0448\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 (\u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f)  \u0432 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 FSM, \u0438 \u044d\u0442\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b \u0434\u043b\u044f \u043f\u0430\u0440\u044b <code>(chat_id, user_id)</code> (\u0435\u0441\u0442\u044c \u043d\u044e\u0430\u043d\u0441, \u043e \u043d\u0451\u043c \u043f\u043e\u0437\u0436\u0435). \u041d\u0430\u043a\u043e\u043d\u0435\u0446,  \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 11 \u043c\u044b \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0438\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 <code>OrderFood.choosing_food_size</code>.</p> <p>\u0410 \u0435\u0441\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0440\u0435\u0448\u0438\u0442 \u0432\u0432\u0435\u0441\u0442\u0438 \u0447\u0442\u043e-\u0442\u043e \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e, \u0431\u0435\u0437 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b? \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u043d\u0430\u0434\u043e \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e  \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435 \u0438 \u0434\u0430\u0442\u044c \u0435\u043c\u0443 \u0435\u0449\u0451 \u043f\u043e\u043f\u044b\u0442\u043a\u0443. \u041e\u0447\u0435\u043d\u044c \u0447\u0430\u0441\u0442\u043e \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u043a\u0438 \u0431\u043e\u0442\u043e\u0432 \u043d\u0430 \u044d\u0442\u043e\u043c \u043c\u043e\u043c\u0435\u043d\u0442\u0435 \u0437\u0430\u0434\u0430\u044e\u0442 \u0432\u043e\u043f\u0440\u043e\u0441:  \u00ab\u0430 \u043a\u0430\u043a \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u044e\u0437\u0435\u0440\u0430 \u0432 \u0442\u043e\u043c \u0436\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438?\u00bb. \u041e\u0442\u0432\u0435\u0442 \u043f\u0440\u043e\u0441\u0442\u043e\u0439: \u0447\u0442\u043e\u0431\u044b \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438, \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e  \u0435\u0433\u043e [\u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435] \u043d\u0435 \u043c\u0435\u043d\u044f\u0442\u044c, \u0442.\u0435. \u0431\u0443\u043a\u0432\u0430\u043b\u044c\u043d\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c. </p> <p>\u041d\u0430\u043f\u0438\u0448\u0435\u043c \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0445\u044d\u043d\u0434\u043b\u0435\u0440, \u0443 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0431\u0443\u0434\u0435\u0442 \u0444\u0438\u043b\u044c\u0442\u0440 \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 <code>OrderFood.choosing_food_name</code>, \u0430 \u0444\u0438\u043b\u044c\u0442\u0440\u0430  \u043d\u0430 \u0442\u0435\u043a\u0441\u0442 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. \u0415\u0441\u043b\u0438 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u044c \u0435\u0433\u043e \u043f\u043e\u0434 \u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439 <code>food_chosen()</code>,  \u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f \u00ab\u0440\u0435\u0430\u0433\u0438\u0440\u0443\u0439 \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 choosing_food_name, \u043d\u0430 \u0432\u0441\u0435 \u0442\u0435\u043a\u0441\u0442\u044b, \u043a\u0440\u043e\u043c\u0435 \u0442\u0435\u0445, \u0447\u0442\u043e \u043b\u043e\u0432\u0438\u0442 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u00bb  (\u0438\u043d\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u00ab\u043b\u043e\u0432\u0438 \u0432\u0441\u0435 \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u044b\u00bb).</p> <pre><code>@router.message(OrderFood.choosing_food_name)\nasync def food_chosen_incorrectly(message: Message):\n    await message.answer(\n        text=\"\u042f \u043d\u0435 \u0437\u043d\u0430\u044e \u0442\u0430\u043a\u043e\u0433\u043e \u0431\u043b\u044e\u0434\u0430.\\n\\n\"\n             \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u043e \u0438\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0439 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0438\u0436\u0435:\",\n        reply_markup=make_row_keyboard(available_food_names)\n    )\n</code></pre>"},{"location":"fsm/#step-2","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0448\u0430\u0433\u0430 2","text":"<p>\u0412\u0442\u043e\u0440\u043e\u0439 \u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u044d\u0442\u0430\u043f \u2014 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0432\u0432\u043e\u0434 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043f\u043e\u0440\u0446\u0438\u0438 \u044e\u0437\u0435\u0440\u043e\u043c. \u0410\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u043c\u0443 \u044d\u0442\u0430\u043f\u0443 \u0441\u0434\u0435\u043b\u0430\u0435\u043c \u0434\u0432\u0430 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430  (\u043d\u0430 \u0432\u0435\u0440\u043d\u044b\u0439 \u0438 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442\u044b), \u043d\u043e \u0432 \u043f\u0435\u0440\u0432\u043e\u043c \u0438\u0437 \u043d\u0438\u0445 \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0432\u044b\u0431\u043e\u0440 \u0441\u0432\u043e\u0434\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u043e \u0437\u0430\u043a\u0430\u0437\u0435:</p> <pre><code>@router.message(OrderFood.choosing_food_size, F.text.in_(available_food_sizes))\nasync def food_size_chosen(message: Message, state: FSMContext):\nuser_data = await state.get_data()\nawait message.answer(\n        text=f\"\u0412\u044b \u0432\u044b\u0431\u0440\u0430\u043b\u0438 {message.text.lower()} \u043f\u043e\u0440\u0446\u0438\u044e {user_data['chosen_food']}.\\n\"\n             f\"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0442\u0435\u043f\u0435\u0440\u044c \u0437\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0430\u043f\u0438\u0442\u043a\u0438: /drinks\",\n        reply_markup=ReplyKeyboardRemove()\n    )\nawait state.clear()\n@router.message(OrderFood.choosing_food_size)\nasync def food_size_chosen_incorrectly(message: Message):\n    await message.answer(\n        text=\"\u042f \u043d\u0435 \u0437\u043d\u0430\u044e \u0442\u0430\u043a\u043e\u0433\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043f\u043e\u0440\u0446\u0438\u0438.\\n\\n\"\n             \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0438\u0436\u0435:\",\n        reply_markup=make_row_keyboard(available_food_sizes)\n    )\n</code></pre> <p>\u0412\u044b\u0437\u043e\u0432 <code>get_data()</code> \u0432 \u0441\u0442\u0440\u043e\u043a\u0435 \u21163 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043e\u0431\u044a\u0435\u043a\u0442 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0447\u0430\u0442\u0435. \u0418\u0437 \u043d\u0435\u0433\u043e  [\u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430] \u043c\u044b \u0434\u043e\u0441\u0442\u0430\u0451\u043c \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0431\u043b\u044e\u0434\u0430 \u0438 \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435. \u041c\u0435\u0442\u043e\u0434 <code>clear()</code> \u0443 \u0441\u0442\u0435\u0439\u0442\u0430  \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u00ab\u043f\u0443\u0441\u0442\u043e\u0435\u00bb \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0438 \u0443\u0434\u0430\u043b\u044f\u0435\u0442 \u0432\u0441\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c, \u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c  \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0438\u043b\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430\u0442\u0435\u0440\u0435\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435? \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u0440\u043e\u0432\u0430\u043b\u0438\u043c\u0441\u044f \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 <code>clear()</code> \u0432 \u0438\u0441\u0445\u043e\u0434\u043d\u0438\u043a\u0430\u0445 aiogram 3.x:</p> <pre><code>class FSMContext:\n    # \u0427\u0430\u0441\u0442\u044c \u043a\u043e\u0434\u0430 \u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u0430\n\n    async def clear(self) -&gt; None:\n        await self.set_state(state=None)\n        await self.set_data({})\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u0437\u043d\u0430\u0435\u0442\u0435, \u043a\u0430\u043a \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0447\u0442\u043e-\u0442\u043e \u043e\u0434\u043d\u043e :)</p> <p>\u0428\u0430\u0433\u0438 \u0434\u043b\u044f \u0432\u044b\u0431\u043e\u0440\u0430 \u043d\u0430\u043f\u0438\u0442\u043a\u043e\u0432 \u0434\u0435\u043b\u0430\u044e\u0442\u0441\u044f \u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u043d\u043e \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u043b\u0438 \u0437\u0430\u0433\u043b\u044f\u043d\u0438\u0442\u0435 \u0432 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0435 \u0442\u0435\u043a\u0441\u0442\u044b  \u043a \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435.</p> <p>\u041f\u043e\u043b\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u0444\u0430\u0439\u043b\u0430 \u0441 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u043c\u0438 \u0434\u043b\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u0435\u0434\u044b:</p> handlers/ordering_food.py<pre><code>from aiogram import Router, F\nfrom aiogram.dispatcher.filters.command import Command\nfrom aiogram.dispatcher.fsm.context import FSMContext\nfrom aiogram.dispatcher.fsm.state import StatesGroup, State\nfrom aiogram.types import Message, ReplyKeyboardRemove\n\nfrom keyboards.simple_row import make_row_keyboard\n\nrouter = Router()\n\n# \u042d\u0442\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043b\u0435\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0432 \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0442\u0435\u043a\u0441\u0442, \u043e\u0442\u0441\u044e\u0434\u0430\n# \u0442\u0430\u043a\u0430\u044f \u043d\u0430 \u043f\u0435\u0440\u0432\u044b\u0439 \u0432\u0437\u0433\u043b\u044f\u0434 \u0441\u0442\u0440\u0430\u043d\u043d\u0430\u044f \u0444\u043e\u0440\u043c\u0430 \u043f\u0440\u0438\u043b\u0430\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445\navailable_food_names = [\"\u0421\u0443\u0448\u0438\", \"\u0421\u043f\u0430\u0433\u0435\u0442\u0442\u0438\", \"\u0425\u0430\u0447\u0430\u043f\u0443\u0440\u0438\"]\navailable_food_sizes = [\"\u041c\u0430\u043b\u0435\u043d\u044c\u043a\u0443\u044e\", \"\u0421\u0440\u0435\u0434\u043d\u044e\u044e\", \"\u0411\u043e\u043b\u044c\u0448\u0443\u044e\"]\n\n\nclass OrderFood(StatesGroup):\n    choosing_food_name = State()\n    choosing_food_size = State()\n\n\n@router.message(Command(commands=[\"food\"]))\nasync def cmd_food(message: Message, state: FSMContext):\n    await message.answer(\n        text=\"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u043b\u044e\u0434\u043e:\",\n        reply_markup=make_row_keyboard(available_food_names)\n    )\n    # \u0423\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \"\u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\"\n    await state.set_state(OrderFood.choosing_food_name)\n\n# \u042d\u0442\u0430\u043f \u0432\u044b\u0431\u043e\u0440\u0430 \u0431\u043b\u044e\u0434\u0430 #\n\n\n@router.message(OrderFood.choosing_food_name, F.text.in_(available_food_names))\nasync def food_chosen(message: Message, state: FSMContext):\n    await state.update_data(chosen_food=message.text.lower())\n    await message.answer(\n        text=\"\u0421\u043f\u0430\u0441\u0438\u0431\u043e. \u0422\u0435\u043f\u0435\u0440\u044c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0440 \u043f\u043e\u0440\u0446\u0438\u0438:\",\n        reply_markup=make_row_keyboard(available_food_sizes)\n    )\n    await state.set_state(OrderFood.choosing_food_size)\n\n\n@router.message(OrderFood.choosing_food_name)\nasync def food_chosen_incorrectly(message: Message):\n    await message.answer(\n        text=\"\u042f \u043d\u0435 \u0437\u043d\u0430\u044e \u0442\u0430\u043a\u043e\u0433\u043e \u0431\u043b\u044e\u0434\u0430.\\n\\n\"\n             \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u043d\u043e \u0438\u0437 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0439 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0438\u0436\u0435:\",\n        reply_markup=make_row_keyboard(available_food_names)\n    )\n\n# \u042d\u0442\u0430\u043f \u0432\u044b\u0431\u043e\u0440\u0430 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043f\u043e\u0440\u0446\u0438\u0438 \u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u0432\u043e\u0434\u043d\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 #\n\n\n@router.message(OrderFood.choosing_food_size, F.text.in_(available_food_sizes))\nasync def food_size_chosen(message: Message, state: FSMContext):\n    user_data = await state.get_data()\n    await message.answer(\n        text=f\"\u0412\u044b \u0432\u044b\u0431\u0440\u0430\u043b\u0438 {message.text.lower()} \u043f\u043e\u0440\u0446\u0438\u044e {user_data['chosen_food']}.\\n\"\n             f\"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0442\u0435\u043f\u0435\u0440\u044c \u0437\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0430\u043f\u0438\u0442\u043a\u0438: /drinks\",\n        reply_markup=ReplyKeyboardRemove()\n    )\n    # \u0421\u0431\u0440\u043e\u0441 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n    await state.clear()\n\n\n@router.message(OrderFood.choosing_food_size)\nasync def food_size_chosen_incorrectly(message: Message):\n    await message.answer(\n        text=\"\u042f \u043d\u0435 \u0437\u043d\u0430\u044e \u0442\u0430\u043a\u043e\u0433\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u043f\u043e\u0440\u0446\u0438\u0438.\\n\\n\"\n             \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u043e\u0432 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u043d\u0438\u0436\u0435:\",\n        reply_markup=make_row_keyboard(available_food_sizes)\n    )\n</code></pre>"},{"location":"fsm/#common-commands","title":"\u041e\u0431\u0449\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<p>\u0420\u0430\u0437 \u0443\u0436 \u0437\u0430\u0433\u043e\u0432\u043e\u0440\u0438\u043b\u0438 \u043e \u0441\u0431\u0440\u043e\u0441\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439, \u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0432 \u0444\u0430\u0439\u043b\u0435 <code>handlers/common.py</code> \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u044b <code>/start</code> \u0438  \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u00ab\u043e\u0442\u043c\u0435\u043d\u044b\u00bb. \u041f\u0435\u0440\u0432\u0430\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0435\u043a\u0438\u0439 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439/\u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442, \u0430 \u0432\u0442\u043e\u0440\u0430\u044f \u043f\u0440\u043e\u0441\u0442\u043e \u043f\u0438\u0448\u0435\u0442 \"\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e\".  \u041e\u0431\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0441\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u044e\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0438 \u0434\u0430\u043d\u043d\u044b\u0435, \u0438 \u0443\u0431\u0438\u0440\u0430\u044e\u0442 \u043e\u0431\u044b\u0447\u043d\u0443\u044e \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443, \u0435\u0441\u043b\u0438 \u0432\u0434\u0440\u0443\u0433 \u043e\u043d\u0430 \u0435\u0441\u0442\u044c:</p> handlers/common.py<pre><code>from aiogram import Router\nfrom aiogram.dispatcher.filters.command import Command\nfrom aiogram.dispatcher.filters.text import Text\nfrom aiogram.dispatcher.fsm.context import FSMContext\nfrom aiogram.types import Message, ReplyKeyboardRemove\n\nrouter = Router()\n\n\n@router.message(Command(commands=[\"start\"]))\nasync def cmd_start(message: Message, state: FSMContext):\n    await state.clear()\n    await message.answer(\n        text=\"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043a\u0430\u0437\u0430\u0442\u044c: \"\n             \"\u0431\u043b\u044e\u0434\u0430 (/food) \u0438\u043b\u0438 \u043d\u0430\u043f\u0438\u0442\u043a\u0438 (/drinks).\",\n        reply_markup=ReplyKeyboardRemove()\n    )\n\n\n@router.message(Command(commands=[\"cancel\"]))\n@router.message(Text(text=\"\u043e\u0442\u043c\u0435\u043d\u0430\", text_ignore_case=True))\nasync def cmd_cancel(message: Message, state: FSMContext):\n    await state.clear()\n    await message.answer(\n        text=\"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e\",\n        reply_markup=ReplyKeyboardRemove()\n    )\n</code></pre>"},{"location":"fsm/#entrypoint","title":"\u0424\u0430\u0439\u043b bot.py","text":"<p>\u041d\u0430\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u043a \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0442\u043e\u0447\u043a\u0443 \u0432\u0445\u043e\u0434\u0430 \u2014 \u0444\u0430\u0439\u043b <code>bot.py</code> \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0430\u043c\u0438 \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u043d\u044b\u043c\u0438 \u0440\u043e\u0443\u0442\u0435\u0440\u0430\u043c\u0438:</p> bot.py<pre><code>import asyncio\nimport logging\n\nfrom aiogram import Bot, Dispatcher\nfrom aiogram.dispatcher.fsm.storage.memory import MemoryStorage\n\n# \u0444\u0430\u0439\u043b config_reader.py \u043c\u043e\u0436\u043d\u043e \u0432\u0437\u044f\u0442\u044c \u0438\u0437 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u044f\n# \u043f\u0440\u0438\u043c\u0435\u0440 \u2014 \u0432 \u043f\u0435\u0440\u0432\u043e\u0439 \u0433\u043b\u0430\u0432\u0435\nfrom config_reader import config\nfrom handlers import common, ordering_food\n\n\nasync def main():\n    logging.basicConfig(\n        level=logging.INFO,\n        format=\"%(asctime)s - %(levelname)s - %(name)s - %(message)s\",\n    )\n\n    # \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u044c storage, \u0442\u043e \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e \u0431\u0443\u0434\u0435\u0442 MemoryStorage\n    # \u041d\u043e \u044f\u0432\u043d\u043e\u0435 \u043b\u0443\u0447\u0448\u0435 \u043d\u0435\u044f\u0432\u043d\u043e\u0433\u043e =]\n    dp = Dispatcher(storage=MemoryStorage())\n    bot = Bot(config.bot_token.get_secret_value())\n\n    dp.include_router(common.router)\n    dp.include_router(ordering_food.router)\n    # \u0441\u044e\u0434\u0430 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0439\u0442\u0435 \u0432\u0430\u0448 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0440\u043e\u0443\u0442\u0435\u0440 \u0434\u043b\u044f \u043d\u0430\u043f\u0438\u0442\u043a\u043e\u0432\n\n    await dp.start_polling(bot, allowed_updates=dp.resolve_used_update_types())\n\n\nif __name__ == '__main__':\n    asyncio.run(main())\n</code></pre>"},{"location":"fsm/#strategies","title":"\u0420\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438 FSM","text":"<p>Aiogram 3.x \u043f\u0440\u0438\u0432\u043d\u0451\u0441 \u043d\u0435\u043e\u0431\u044b\u0447\u043d\u043e\u0435, \u043d\u043e \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u0435 \u043d\u043e\u0432\u043e\u0432\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0432 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0445 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u043e\u0432 \u2014 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438 FSM. \u041e\u043d\u0438 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442  \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443 \u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0430\u0440 \u0434\u043b\u044f \u0441\u0442\u0435\u0439\u0442\u043e\u0432 \u0438 \u0434\u0430\u043d\u043d\u044b\u0445. \u0412\u0441\u0435\u0433\u043e \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0439 \u0442\u0440\u0438, \u0432\u043e\u0442 \u043e\u043d\u0438:</p> <ul> <li>USER_IN_CHAT \u2014 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u0421\u0442\u0435\u0439\u0442 \u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0440\u0430\u0437\u043d\u044b\u0435 \u0443 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044e\u0437\u0435\u0440\u0430 \u0432 \u043a\u0430\u0436\u0434\u043e\u043c \u0447\u0430\u0442\u0435. \u0422\u043e \u0435\u0441\u0442\u044c, \u0443 \u044e\u0437\u0435\u0440\u0430 \u0431\u0443\u0434\u0443\u0442  \u0440\u0430\u0437\u043d\u044b\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u0433\u0440\u0443\u043f\u043f\u0430\u0445, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0432 \u041b\u0421 \u0441 \u0431\u043e\u0442\u043e\u043c.</li> <li>CHAT \u2014 \u0441\u0442\u0435\u0439\u0442 \u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u0449\u0438\u0435 \u0434\u043b\u044f \u0432\u0441\u0435\u0433\u043e \u0447\u0430\u0442\u0430 \u0446\u0435\u043b\u0438\u043a\u043e\u043c. \u0412 \u041b\u0421 \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043d\u0435\u0437\u0430\u043c\u0435\u0442\u043d\u0430, \u043d\u043e \u0432 \u0433\u0440\u0443\u043f\u043f\u0435 \u0443 \u0432\u0441\u0435\u0445 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0431\u0443\u0434\u0435\u0442  \u043e\u0434\u0438\u043d \u0441\u0442\u0435\u0439\u0442 \u0438 \u043e\u0431\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435.</li> <li>GLOBAL_USER \u2014 \u0432\u043e \u0432\u0441\u0435\u0445 \u0447\u0430\u0442\u0430\u0445 \u0443 \u043e\u0434\u043d\u043e\u0433\u043e \u0438 \u0442\u043e\u0433\u043e \u0436\u0435 \u044e\u0437\u0435\u0440\u0430 \u0431\u0443\u0434\u0435\u0442 \u043e\u0434\u0438\u043d \u0438 \u0442\u043e\u0442 \u0436\u0435 \u0441\u0442\u0435\u0439\u0442 \u0438 \u0434\u0430\u043d\u043d\u044b\u0435.</li> </ul> <p>\u0427\u0435\u0441\u0442\u043d\u043e \u0433\u043e\u0432\u043e\u0440\u044f, \u044f \u043d\u0435 \u043c\u043e\u0433\u0443 \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0442\u044c \u0445\u043e\u0440\u043e\u0448\u0438\u0439 use-case \u0434\u043b\u044f GLOBAL_USER, \u043e\u0434\u043d\u0430\u043a\u043e CHAT \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u0431\u043e\u0442\u043e\u0432,  \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u044e\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0438\u0433\u0440\u044b \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445. \u0415\u0441\u043b\u0438 \u0432\u044b \u0437\u043d\u0430\u0435\u0442\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0440\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u043d\u0438\u0445  \u0432 \u043d\u0430\u0448\u0435\u043c \u0447\u0430\u0442\u0438\u043a\u0435!</p> <p>\u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e, \u043a\u043e\u0433\u0434\u0430 \u0431\u043e\u0442 \u0434\u043b\u044f \u0437\u0430\u043a\u0430\u0437\u0430 \u0435\u0434\u044b \u043f\u043e\u0447\u0435\u043c\u0443-\u0442\u043e \u043e\u043a\u0430\u0437\u0430\u043b\u0441\u044f \u0432 \u0433\u0440\u0443\u043f\u043f\u0435 \u0438 \u0438\u043c\u0435\u0435\u0442 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e CHAT.  \u0410 \u0447\u0442\u043e\u0431\u044b \u044d\u0442\u043e \u0441\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0432\u043d\u0435\u0441\u0442\u0438 \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u043f\u0440\u0430\u0432\u043a\u0438 \u0432 \u0444\u0430\u0439\u043b <code>bot.py</code>:</p> <pre><code># \u043d\u043e\u0432\u044b\u0439 \u0438\u043c\u043f\u043e\u0440\u0442\nfrom aiogram.dispatcher.fsm.strategy import FSMStrategy\n\nasync def main():\n    # \u0442\u0443\u0442 \u043a\u043e\u0434\n    dp = Dispatcher(storage=MemoryStorage(), fsm_strategy=FSMStrategy.CHAT)\n    # \u0442\u0443\u0442 \u0442\u043e\u0436\u0435 \u043a\u043e\u0434\n</code></pre> <p>\u041f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0431\u043e\u0442\u0430 \u043f\u043e\u043f\u0440\u043e\u0441\u0438\u043c \u043b\u044e\u0434\u0435\u0439 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435 \u043f\u043e\u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u0441 \u043d\u0438\u043c:</p> <p></p> <p>\u0412\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u0441\u0442\u0440\u0430\u043d\u043d\u043e, \u043d\u0435 \u043f\u0440\u0430\u0432\u0434\u0430 \u043b\u0438?</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c, \u0432\u043e\u043e\u0440\u0443\u0436\u0438\u0432\u0448\u0438\u0441\u044c \u0437\u043d\u0430\u043d\u0438\u044f\u043c\u0438 \u043e \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0445 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0430\u0445, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0431\u0435\u0437\u0431\u043e\u044f\u0437\u043d\u0435\u043d\u043d\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0431\u043e\u0442\u043e\u0432 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432.</p>"},{"location":"inline_mode/","title":"\u0418\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c","text":"<p>\u041e \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u0435\u0440\u0441\u0438\u0439</p> <p>\u041a\u043e\u0434 \u0432 \u0433\u043b\u0430\u0432\u0430\u0445 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 aiogram 3.0 beta3. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438.</p>"},{"location":"inline_mode/#theory","title":"\u0422\u0435\u043e\u0440\u0438\u044f","text":""},{"location":"inline_mode/#why-inline-mode","title":"\u0417\u0430\u0447\u0435\u043c \u043d\u0443\u0436\u0435\u043d \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c?","text":"<p>\u0412 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0445 \u0433\u043b\u0430\u0432\u0430\u0445 \u0431\u043e\u0442 \u0438 \u0447\u0435\u043b\u043e\u0432\u0435\u043a \u043e\u0431\u0449\u0430\u043b\u0438\u0441\u044c \u043a\u0430\u0436\u0434\u044b\u0439 \u0441\u0430\u043c \u0437\u0430 \u0441\u0435\u0431\u044f, \u043e\u0434\u043d\u0430\u043a\u043e \u0432 Telegram \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u0436\u0438\u043c,  \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0449\u0438\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e\u0442 \u0441\u0432\u043e\u0435\u0433\u043e \u0438\u043c\u0435\u043d\u0438, \u043d\u043e \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0431\u043e\u0442\u0430. \u042d\u0442\u043e \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c  (Inline mode), \u0438 \u0432\u043e\u0442 \u043a\u0430\u043a \u043e\u043d \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0439 \u0436\u0438\u0437\u043d\u0438:</p> <p></p> <p>\u041d\u043e \u043a\u0430\u043a \u043d\u0430 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0435 \u0432\u043e\u043e\u0431\u0449\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0430\u043a\u0443\u044e \u0444\u0438\u0447\u0443? \u041f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u044e \u0432\u0437\u0433\u043b\u044f\u043d\u0443\u0442\u044c \u043d\u0430 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044f \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043e\u043a\u043e\u043b\u043e-\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0445 Telegram-\u0431\u043e\u0442\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c:</p> <ul> <li>@gif </li> <li>@wiki</li> <li>@imdb</li> <li>@youtube</li> <li>@foursquare</li> <li>@music</li> <li>@gamee</li> <li>@like</li> </ul> <p>\u0421\u043f\u0438\u0441\u043e\u043a \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c \u0434\u043e\u043b\u0433\u043e, \u043d\u043e \u0441\u0443\u0442\u044c, \u043d\u0430\u0434\u0435\u044e\u0441\u044c, \u044f\u0441\u043d\u0430: \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c \u043e\u0442\u043b\u0438\u0447\u043d\u043e \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430 \u0434\u043b\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0438  \u0432 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0447\u0430\u0442. \u0427\u0430\u0441\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 \u0442\u0430\u043a\u0438\u0445 \u0431\u043e\u0442\u043e\u0432 (like, poll, gif) Telegram \u0432\u043d\u0435\u0434\u0440\u0438\u043b \u0432 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u043d\u043e \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435  \u043e\u0442\u043b\u0438\u0447\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043f\u043e \u0441\u0435\u0439 \u0434\u0435\u043d\u044c.</p> <p>\u0412\u0430\u0436\u043d\u043e</p> <p>\u041d\u0430\u043f\u043e\u043c\u043d\u044e, \u0447\u0442\u043e \u0435\u0441\u043b\u0438 \u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044e, \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u043c\u0443 \u0438\u0437 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0430, \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0435\u043d\u0430 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430 \u0441 \u043a\u043e\u043b\u0431\u044d\u043a-\u043a\u043d\u043e\u043f\u043a\u043e\u0439,  \u0442\u043e \u043f\u0440\u0438 \u0435\u0451 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u0431\u043e\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442 \u043e\u0431\u044a\u0435\u043a\u0442 <code>CallbackQuery</code> \u0431\u0435\u0437 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 <code>Message</code> \u0432\u043d\u0443\u0442\u0440\u0438. \u0412\u043c\u0435\u0441\u0442\u043e  \u044d\u0442\u043e\u0433\u043e \u0431\u0443\u0434\u0435\u0442 \u043c\u0430\u043b\u043e \u043e \u0447\u0451\u043c \u0433\u043e\u0432\u043e\u0440\u044f\u0449\u0438\u0439 <code>inline_message_id</code>.</p>"},{"location":"inline_mode/#incoming-update-format","title":"\u0424\u043e\u0440\u043c\u0430\u0442 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u0438\u0448\u0435\u0442 \u0432 \u0447\u0430\u0442\u0435 \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c \u0431\u043e\u0442\u0430 \u0438 \u0434\u0430\u043b\u0435\u0435 \u0432\u0432\u043e\u0434\u0438\u0442 \u0442\u0435\u043a\u0441\u0442, \u0441\u043e\u0437\u0434\u0430\u0451\u0442\u0441\u044f \u0430\u043f\u0434\u0435\u0439\u0442 \u0442\u0438\u043f\u0430  InlineQuery. \u0415\u0441\u043b\u0438 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0438\u0437\u0443\u0447\u0438\u0442\u044c \u043f\u043e\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430,  \u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043c\u0435\u0442\u0438\u0442\u044c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0442\u0440\u0430\u043d\u043d\u043e\u0441\u0442\u0438. </p> <p>\u0412\u043e-\u043f\u0435\u0440\u0432\u044b\u0445, \u043d\u0435\u0442 \u0430\u0439\u0434\u0438 \u0447\u0430\u0442\u0430, \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0432\u044b\u0437\u0432\u0430\u043b\u0438 \u0431\u043e\u0442\u0430, \u0432\u043c\u0435\u0441\u0442\u043e \u044d\u0442\u043e\u0433\u043e \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0435  \u043f\u043e\u043b\u0435 <code>chat_type</code>, \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0449\u0435\u0435 (\u0435\u0441\u043b\u0438 \u043d\u0435\u043f\u0443\u0441\u0442\u043e\u0435) \u0442\u0438\u043f \u0447\u0430\u0442\u0430 (\u043b\u0438\u0447\u043a\u0430, \u0433\u0440\u0443\u043f\u043f\u0430, \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0430, \u043a\u0430\u043d\u0430\u043b). \u041f\u0440\u0438\u0447\u0438\u043d\u0430 \u044d\u0442\u043e\u043c\u0443 \u043f\u0440\u043e\u0441\u0442\u0430\u044f:  \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0431\u043e\u0442\u0430 \u0432 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0435 \u043d\u0435 \u043d\u0430\u0434\u043e \u0435\u0433\u043e \u043d\u0438\u043a\u0443\u0434\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 Chat  \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u043b\u043e \u0431\u044b \u043d\u0435\u0437\u0430\u043c\u0435\u0442\u043d\u043e \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0442\u044c \u0438 \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u0447\u0430\u0442\u044b \u0432 \u0442\u0435\u043b\u0435\u0433\u0435. </p> <p>\u0412\u043e-\u0432\u0442\u043e\u0440\u044b\u0445, \u0435\u0441\u0442\u044c \u043f\u043e\u043b\u0435 <code>offset</code>, \u043f\u0440\u0438\u0447\u0451\u043c \u044d\u0442\u043e \u043d\u0435 \u0447\u0438\u0441\u043b\u043e, \u0430 \u0441\u0442\u0440\u043e\u043a\u0430. \u0414\u0435\u043b\u043e \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0431\u043e\u0442 \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435  50 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u0432 \u043e\u0442\u0432\u0435\u0442 \u043d\u0430 \u0438\u043d\u043b\u0430\u0439\u043d-\u0437\u0430\u043f\u0440\u043e\u0441. \u0427\u0442\u043e\u0431\u044b \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435, \u043d\u0430\u0434\u043e \u043f\u0440\u0438 \u043e\u0442\u0432\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>next_offset</code>,  \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u043e\u0434\u0443\u0431\u043b\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u043f\u043e\u043b\u0435 <code>offset</code> \u0443 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e <code>InlineQuery</code>. \u0422\u0430\u043a \u0431\u043e\u0442 \u043f\u043e\u0439\u043c\u0451\u0442, \u0447\u0442\u043e \u043d\u0430\u0434\u043e \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435,  \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 <code>offset</code>. \u0410 \u0441\u0442\u0440\u043e\u043a\u0430 \u044d\u0442\u043e \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043f\u043e\u043c\u0438\u043c\u043e \u0447\u0438\u0441\u0435\u043b \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u043a\u0438\u0435-\u043d\u0438\u0431\u0443\u0434\u044c \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u044b, \u0442\u0438\u043f\u0430 UUID.</p>"},{"location":"inline_mode/#outgoing-answer-format","title":"\u0424\u043e\u0440\u043c\u0430\u0442 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432","text":"<p>\u0414\u043b\u044f \u043e\u0442\u0432\u0435\u0442\u0430 \u043d\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0440\u043e\u0432\u043d\u043e \u043e\u0434\u0438\u043d \u043c\u0435\u0442\u043e\u0434:  answerInlineQuery.  \u041d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 \u0430\u0436 \u0446\u0435\u043b\u044b\u0445 20. \u0422\u043e\u0447\u043d\u0435\u0435,  \u043f\u043e \u0444\u0430\u043a\u0442\u0443 \u0438\u0445 11, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u0441\u0442\u0430\u0432\u0448\u0438\u0435\u0441\u044f \u2014 \u043f\u0440\u043e\u0441\u0442\u043e \u0442\u0435 \u0436\u0435 \u0442\u0438\u043f\u044b, \u043d\u043e \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0432\u0445\u043e\u0434\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <code>file_id</code>  \u0432\u043c\u0435\u0441\u0442\u043e \u0441\u0441\u044b\u043b\u043a\u0438 \u043d\u0430 \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b. \u0420\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u043b\u0443\u0447\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u043d\u0435 \u0441\u043c\u0435\u0448\u0438\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433 \u0441 \u0434\u0440\u0443\u0433\u043e\u043c, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e Article \u0441 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u043c\u0438. \u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u0437 \u043d\u0438\u0445 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e.</p> <p></p> <p>\u041f\u043e\u0436\u0430\u043b\u0443\u0439, \u0441\u0430\u043c\u044b\u0439 \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0442\u0438\u043f \u2014 \u044d\u0442\u043e InlineQueryResultArticle (\u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0438 \u0441\u0432\u0435\u0440\u0445\u0443). \u0412\u043e \u0432\u0441\u0435\u0445 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u0445 \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043a\u0430\u043a \u0441\u0442\u043e\u043f\u043a\u0430 \u0438\u0437 \u043f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u044b\u0445 \u0431\u043b\u043e\u043a\u043e\u0432, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0432\u0441\u0435\u0433\u0434\u0430 \u0435\u0441\u0442\u044c  \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a, \u0438\u043d\u043e\u0433\u0434\u0430 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435, \u0430 \u0441\u043b\u0435\u0432\u0430 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044f \u043b\u0438\u0431\u043e \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430-\u043f\u0440\u0435\u0432\u044c\u044e, \u043b\u0438\u0431\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0437\u0430\u0433\u043b\u0443\u0448\u043a\u0430.  \u0415\u0441\u043b\u0438 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0437\u0430\u0434\u0430\u043b \u0430\u0442\u0440\u0438\u0431\u0443\u0442 <code>url</code>, \u0442\u043e \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0442 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u0441\u0441\u044b\u043b\u043a\u0443 \u043f\u043e\u0434 \u0441\u0442\u0440\u043e\u043a\u043e\u0439 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f, \u0430  \u043f\u0440\u0435\u0432\u044c\u044e \u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u043a\u043b\u0438\u043a\u0430\u0431\u0435\u043b\u044c\u043d\u044b\u043c \u0438 \u0432\u0435\u0434\u0451\u0442 \u043f\u043e \u0441\u0430\u043c\u043e\u0439 \u0441\u0441\u044b\u043b\u043a\u0435 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432 \u0431\u0440\u0430\u0443\u0437\u0435\u0440. \u041f\u0440\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u043d\u0430 \u0441\u0442\u0440\u043e\u043a\u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0442\u043e,  \u0447\u0442\u043e \u0437\u0430\u0434\u0430\u043d\u043e \u0432 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0435 <code>input_message_content</code> (\u043e\u043d \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439), \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c 5 \u0440\u0430\u0437\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432:</p> <ul> <li>\u0442\u0435\u043a\u0441\u0442</li> <li>\u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u044f</li> <li>\u0434\u043e\u0441\u0442\u043e\u043f\u0440\u0438\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c (venue)</li> <li>\u043a\u043e\u043d\u0442\u0430\u043a\u0442</li> <li>\u0441\u0447\u0451\u0442 \u043d\u0430 \u043e\u043f\u043b\u0430\u0442\u0443 (invoice)</li> </ul> <p></p> <p>\u041e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u043e\u0442\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043a \u0442.\u043d. \u00ab\u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u0430\u043c\u00bb, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439. \u041f\u0440\u0438 \u043e\u0442\u0432\u0435\u0442\u0435 \u043d\u0430\u0431\u043e\u0440\u043e\u043c  \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432\u044b\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u043b\u0438\u0431\u043e \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u043c\u0438 \u043f\u043b\u0438\u0442\u043a\u0430\u043c\u0438, \u043a\u0430\u043a \u043d\u0430 \u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442\u0435 \u0432\u044b\u0448\u0435, \u043b\u0438\u0431\u043e \u043f\u0440\u043e\u043a\u0440\u0443\u0447\u0438\u0432\u0430\u0435\u043c\u043e\u0439 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e\u0439  \u043f\u043e\u043b\u043e\u0441\u043e\u0439 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 iOS-\u0432\u0435\u0440\u0441\u0438\u0438). </p> <p>\u0415\u0441\u043b\u0438 \u0432\u044b \u0435\u0449\u0451 \u0440\u0430\u0437 \u043e\u0442\u043a\u0440\u043e\u0435\u0442\u0435 \u0440\u0430\u0437\u0434\u0435\u043b \u043f\u0440\u043e InlineQueryResult, \u0442\u043e  \u0443\u0432\u0438\u0434\u0438\u0442\u0435, \u0447\u0442\u043e Photo (\u043a\u0430\u043a \u0438 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u0440\u0443\u0433\u0438\u0435 \u0442\u0438\u043f\u044b) \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e \u0432 \u0434\u0432\u0443\u0445 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430\u0445:  <code>InlineQueryResultPhoto</code> \u0438 <code>InlineQueryResultCachedPhoto</code>. \u0420\u0430\u0437\u043d\u0438\u0446\u0430 \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u043f\u0435\u0440\u0432\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0441\u0441\u044b\u043b\u043a\u0443  \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438\u0437 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0430, \u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u2014 <code>file_id</code> \u043e\u0442 \u0443\u0436\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u043e\u0433\u043e \u0432 Telegram \u043c\u0435\u0434\u0438\u0430.</p> <p>\u0412\u0430\u0436\u043d\u043e</p> <p>\u0412 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0435 \u043d\u0435\u043b\u044c\u0437\u044f \u0437\u0430\u043b\u0438\u0432\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0438\u0437 \u0444\u0430\u0439\u043b\u0430. \u041b\u0438\u0431\u043e \u0441\u0441\u044b\u043b\u043a\u0430 \u0432 \u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0435, \u043b\u0438\u0431\u043e <code>file_id</code>.  \u0422\u0440\u0435\u0442\u044c\u0435\u0433\u043e \u043d\u0435 \u0434\u0430\u043d\u043e.</p> <p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u043d\u0430\u0436\u0430\u0442\u0438\u0435 \u043d\u0430 \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043f\u0440\u0438\u0432\u043e\u0434\u0438\u0442 \u043a \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u044d\u0442\u043e\u0433\u043e \u043c\u0435\u0434\u0438\u0430 \u0432 \u0432\u044b\u0437\u0432\u0430\u043d\u043d\u044b\u0439 \u0447\u0430\u0442.  \u041e\u0434\u043d\u0430\u043a\u043e \u0435\u0441\u043b\u0438 \u0437\u0430\u0434\u0430\u0442\u044c \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 <code>input_message_content</code> (\u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u0441 \u043c\u0435\u0434\u0438\u0430 \u043e\u043d \u0443\u0436\u0435 \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439), \u0442\u043e \u043f\u0440\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u0431\u0443\u0434\u0435\u0442  \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0442\u043e, \u0447\u0442\u043e \u0437\u0430\u0434\u0430\u043d\u043e \u0432 \u044d\u0442\u043e\u043c \u0430\u0440\u0443\u0433\u043c\u0435\u043d\u0442\u0435. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043d\u0430\u0436\u0430\u0442\u0438\u0435 \u043d\u0430 \u043e\u0431\u043b\u043e\u0436\u043a\u0443 \u0444\u0438\u043b\u044c\u043c\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442 \u0435\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435  \u0441\u043e \u0441\u0441\u044b\u043b\u043a\u043e\u0439 \u043d\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0432 \u043e\u043d\u043b\u0430\u0439\u043d-\u043a\u0438\u043d\u043e\u0442\u0435\u0430\u0442\u0440\u0435. \u0418\u043b\u0438 \u043f\u0440\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u043d\u0430 \u0444\u043e\u0442\u043e \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0441\u044f \u0435\u0433\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0432 \u0432\u0438\u0434\u0435  \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0430 \ud83d\udc40. \u041a\u0441\u0442\u0430\u0442\u0438, \u043d\u0435\u0441\u043c\u043e\u0442\u0440\u044f \u043d\u0430 \u0442\u043e, \u0447\u0442\u043e \u0443 \u043c\u0435\u0434\u0438\u0430 \u0435\u0441\u0442\u044c \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b <code>title</code> \u0438 <code>description</code>, \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u0438\u0445 \u043d\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0442,  \u0434\u0430 \u0438 \u0441\u0430\u043c Bot API \u0438\u0445 \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u0442. </p> <p>\u0423 \u043c\u0435\u0442\u043e\u0434\u0430 answerInlineQuery \u0435\u0441\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432, \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0430\u0434\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435. \u0412\u043e-\u043f\u0435\u0440\u0432\u044b\u0445, \u044d\u0442\u043e <code>cache_time</code>.  \u041e\u043d \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442, \u043d\u0430 \u043a\u0430\u043a\u043e\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0437\u0430\u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u043c\u0438 \u0442\u0435\u043b\u0435\u0433\u0438, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0441\u043b\u0430\u0442\u044c \u0435\u0433\u043e \u0432 \u0431\u043e\u0442\u0430.  \u0415\u0441\u043b\u0438 \u0432\u0430\u0448\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0435 \u0438\u043b\u0438 \u043c\u0435\u043d\u044f\u044e\u0442\u0441\u044f \u0440\u0435\u0434\u043a\u043e, \u0441\u043c\u0435\u043b\u043e \u043f\u043e\u0432\u044b\u0448\u0430\u0439\u0442\u0435 \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435. \u0412\u043e-\u0432\u0442\u043e\u0440\u044b\u0445, \u0444\u043b\u0430\u0433 <code>is_personal</code>,  \u0432\u043b\u0438\u044f\u044e\u0449\u0438\u0439 \u043d\u0430 \u0442\u043e, \u0431\u0443\u0434\u0435\u0442 \u043b\u0438 \u0437\u0430\u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u043d \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u0441\u0440\u0430\u0437\u0443 \u0434\u043b\u044f \u0432\u0441\u0435\u0445. \u0415\u0441\u043b\u0438 \u0432\u0430\u0448 \u0431\u043e\u0442  \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 ID \u044e\u0437\u0435\u0440\u0430, \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u0432 True.</p> <p>\u0410\u0432\u0442\u043e\u0440 \u044d\u0442\u0438\u0445 \u0441\u0442\u0440\u043e\u043a \u043e\u0434\u043d\u0430\u0436\u0434\u044b \u0437\u0430\u0431\u044b\u043b \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0444\u043b\u0430\u0433 <code>is_personal</code> \u0432 \u0435\u0433\u043e \u0431\u043e\u0442\u0435 @my_id_bot,  \u0432\u044b\u0441\u0442\u0430\u0432\u0438\u043b \u043a\u044d\u0448 \u043d\u0430 86400 \u0441\u0435\u043a\u0443\u043d\u0434 (1 \u0441\u0443\u0442\u043a\u0438) \u0438 \u0432\u044b\u0441\u043b\u0443\u0448\u0430\u043b \u043c\u043d\u043e\u0433\u043e \u0432\u043e\u0437\u043c\u0443\u0449\u0435\u043d\u0438\u0439 \u043e\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439, \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0432\u0448\u0438\u0445 \u0435\u0433\u043e ID \u0432\u043c\u0435\u0441\u0442\u043e \u0438\u0445  \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0445. \u0423\u0447\u0438\u0442\u0435\u0441\u044c \u043d\u0430 \u0447\u0443\u0436\u0438\u0445 \u043e\u0448\u0438\u0431\u043a\u0430\u0445, \u043d\u0435 \u043d\u0430 \u0441\u0432\u043e\u0438\u0445.</p> <p>\u0412-\u0442\u0440\u0435\u0442\u044c\u0438\u0445, \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0439 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 <code>next_offset</code>, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0449\u0438\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0443 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043f\u043e \u043c\u0435\u0440\u0435 \u043f\u0440\u043e\u043a\u0440\u0443\u0442\u043a\u0438, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443  \u0432 \u043e\u0434\u043d\u043e\u043c \u043e\u0442\u0432\u0435\u0442\u0435 \u043d\u0430 InlineQuery \u043c\u043e\u0436\u043d\u043e \u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 50 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 <code>next_offset</code> \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c  \u043f\u0440\u0438\u043c\u0435\u0440\u0435.</p> <p>\u0412-\u0447\u0435\u0442\u0432\u0451\u0440\u0442\u044b\u0445, <code>switch_pm_text</code> \u0438 <code>switch_pm_parameter</code>. \u041f\u043e\u043c\u0438\u043c\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0437\u0430\u043f\u0440\u043e\u0441\u0430, \u0431\u043e\u0442 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0434 \u043d\u0438\u043c\u0438 \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0430\u043b\u0435\u043d\u044c\u043a\u0443\u044e  \u043a\u043d\u043e\u043f\u043e\u0447\u043a\u0443 \u0441 \u0442\u0435\u043a\u0441\u0442\u043e\u043c \u0438\u0437 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430 <code>switch_pm_text</code>, \u043d\u0430\u0436\u0430\u0442\u0438\u0435 \u043d\u0430 \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0434\u0438\u043f\u043b\u0438\u043d\u043a\u0443, \u0442.\u0435. \u044e\u0437\u0435\u0440 \u043f\u0435\u0440\u0435\u0439\u0434\u0451\u0442 \u0432  \u043b\u0438\u0447\u043a\u0443 \u0441 \u0431\u043e\u0442\u043e\u043c, \u0432\u043c\u0435\u0441\u0442\u043e \u043f\u043e\u043b\u044f \u0432\u0432\u043e\u0434\u0430 \u0431\u0443\u0434\u0435\u0442 \u043a\u043d\u043e\u043f\u043a\u0430 \u00ab\u041d\u0410\u0427\u0410\u0422\u042c\u00bb, \u0430 \u043f\u0440\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u0431\u043e\u0442\u0443 \u043f\u0440\u0438\u043b\u0435\u0442\u0438\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u0442\u0435\u043a\u0441\u0442\u043e\u043c  <code>/start \u0422\u0415\u041a\u0421\u0422</code>, \u0433\u0434\u0435 \u0432\u043c\u0435\u0441\u0442\u043e \u0422\u0415\u041a\u0421\u0422 \u2014 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430 <code>switch_pm_parameter</code>.</p> <p></p> <p>\u041f\u043e\u0434\u043e\u0431\u043d\u0443\u044e \u0448\u0442\u0443\u043a\u0443 \u043e\u0447\u0435\u043d\u044c \u0443\u0434\u043e\u0431\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c, \u0435\u0441\u043b\u0438 \u043f\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0435\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0438\u043b\u0438 \u0445\u043e\u0447\u0435\u0442\u0441\u044f \u0434\u0430\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c  \u044e\u0437\u0435\u0440\u0443 \u0431\u044b\u0441\u0442\u0440\u043e \u0447\u0442\u043e-\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c. \u0415\u0441\u0442\u044c \u0438 \u0435\u0449\u0451 \u043e\u0434\u043d\u0430 \u0444\u0438\u0447\u0430, \u043d\u043e \u0435\u0451 \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043f\u043e\u0437\u0434\u043d\u0435\u0435 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0431\u043e\u0442\u0430. \u041a\u0441\u0442\u0430\u0442\u0438,  \u043e \u043d\u0451\u043c... </p>"},{"location":"inline_mode/#practice","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430","text":"<p>\u0427\u0442\u043e\u0431\u044b \u0431\u043e\u0442 \u0437\u043d\u0430\u043b, \u0447\u0442\u043e \u043d\u0430\u0434\u043e \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043f\u0440\u0438 \u0432\u044b\u0437\u043e\u0432\u0435 \u0432 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0435, \u0435\u043c\u0443 \u043d\u0443\u0436\u043d\u044b \u043a\u0430\u043a\u0438\u0435-\u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435: \u043b\u0438\u0431\u043e \u0437\u0430\u0440\u0430\u043d\u0435\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435,  \u043b\u0438\u0431\u043e \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c\u044b\u0435 \u043e\u0442 \u0441\u0430\u043c\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f. \u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0431\u043e\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u043e\u0442 \u044e\u0437\u0435\u0440\u0430 \u0441\u0441\u044b\u043b\u043a\u0438  \u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438, \u0430 \u0437\u0430\u0442\u0435\u043c \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u044d\u0442\u043e \u0432\u0441\u0451 \u0434\u043e\u0431\u0440\u043e \u0432 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0435 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443.</p> <p>\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c \u0443 \u0431\u043e\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 @BotFather:  Bot Settings -&gt; Inline Mode -&gt; Turn on</p>"},{"location":"inline_mode/#storage","title":"\u0421\u0438\u0441\u0442\u0435\u043c\u0430 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f","text":"<p>\u0414\u0430\u0431\u044b \u043d\u0435 \u043f\u043e\u0433\u0440\u0443\u0436\u0430\u0442\u044c\u0441\u044f \u0441\u0438\u043b\u044c\u043d\u043e \u0432 \u0434\u0435\u0442\u0430\u043b\u0438, \u0442\u0435\u043c \u0431\u043e\u043b\u0435\u0435, \u0447\u0442\u043e \u044d\u0442\u0430 \u0433\u043b\u0430\u0432\u0430 \u0438 \u0442\u0430\u043a \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0434\u043b\u0438\u043d\u043d\u0430\u044f, \u0434\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u043c\u0441\u044f, \u0447\u0442\u043e \u043d\u0430\u0448 \u0442\u0435\u0441\u0442\u043e\u0432\u044b\u0439  \u0431\u043e\u0442 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u044b\u0447\u043d\u044b\u0439 in-memory \u0441\u043b\u043e\u0432\u0430\u0440\u044c \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0438\u043c\u0438\u0442\u0430\u0446\u0438\u0438 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445. \u042d\u0442\u043e \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u0442 \u043d\u0435 \u0437\u0430\u043c\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u0442\u044c\u0441\u044f  \u043f\u043e \u043f\u043e\u0432\u043e\u0434\u0443 \u0441\u0431\u0440\u043e\u0441\u0430 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043f\u0440\u0438 \u043e\u0442\u043b\u0430\u0434\u043a\u0435, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0443\u043f\u0440\u043e\u0441\u0442\u0438\u0442 \u043d\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430 \u0437\u0430\u0440\u0430\u043d\u0435\u0435, \u0435\u0441\u043b\u0438 \u0432\u044b \u0432\u0434\u0440\u0443\u0433 \u0437\u0430\u0445\u043e\u0442\u0438\u0442\u0435  \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c \u0431\u043e\u0442\u0430 \u0441\u0440\u0430\u0437\u0443 \u0441 \u0433\u043e\u0442\u043e\u0432\u044b\u043c\u0438 \u0441\u0441\u044b\u043b\u043a\u0430\u043c\u0438 \u0438\u043b\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430\u043c\u0438. \u0414\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0438\u0437 \u0434\u0432\u0443\u0445 \u0442\u0438\u043f\u043e\u0432 \u0434\u0430\u043d\u043d\u044b\u0445 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e \u0442\u0440\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438:  \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435, \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435, \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u0432\u043e\u0442 \u0432\u0435\u0441\u044c \u043a\u043e\u0434 \u0444\u0430\u0439\u043b\u0430:</p> storage.py<pre><code>from typing import Optional\n\n# \u0412 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0439 \u0436\u0438\u0437\u043d\u0438 \u0437\u0434\u0435\u0441\u044c \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0421\u0423\u0411\u0414.\n# \u041d\u043e \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043d\u0430\u043c \u0431\u0443\u0434\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0430 \u043e\u0431\u044b\u0447\u043d\u043e\u043c \u0441\u043b\u043e\u0432\u0430\u0440\u0435.\n# \u0423\u0447\u0442\u0438\u0442\u0435, \u0447\u0442\u043e \u043e\u043d \u0441\u0431\u0440\u0430\u0441\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u0431\u043e\u0442\u0430.\ndata = dict()\n\n\ndef add_link(\n        telegram_id: int,\n        link: str,\n        title: str,\n        description: Optional[str]\n):\n\"\"\"\n    \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0441\u0441\u044b\u043b\u043a\u0443 \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u044c\n\n    :param telegram_id: ID \u044e\u0437\u0435\u0440\u0430 \u0432 Telegram\n    :param link: \u0442\u0435\u043a\u0441\u0442 \u0441\u0441\u044b\u043b\u043a\u0438\n    :param title: \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u0441\u044b\u043b\u043a\u0438\n    :param description: (\u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e) \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0441\u0441\u044b\u043b\u043a\u0438\n    \"\"\"\n    data.setdefault(telegram_id, dict())\n    data[telegram_id].setdefault(\"links\", dict())\n    data[telegram_id][\"links\"][link] = {\n        \"title\": title,\n        \"description\": description\n    }\n\ndef add_photo(\n        telegram_id: int,\n        photo_file_id: str,\n        photo_unique_id: str\n):\n\"\"\"\n    \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0432 \u0441\u043b\u043e\u0432\u0430\u0440\u044c\n\n    :param telegram_id: ID \u044e\u0437\u0435\u0440\u0430 \u0432 Telegram\n    :param photo_file_id: file_id \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\n    :param photo_unique_id: file_unique_id \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\n    \"\"\"\n    data.setdefault(telegram_id, dict())\n    data[telegram_id].setdefault(\"images\", [])\n    if photo_file_id not in data[telegram_id][\"images\"]:\n        data[telegram_id][\"images\"].append((photo_file_id, photo_unique_id))\n\ndef get_links_by_id(telegram_id: int) -&gt; dict:\n\"\"\"\n    \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n\n    :param telegram_id: ID \u044e\u0437\u0435\u0440\u0430 \u0432 Telegram\n    :return: \u0435\u0441\u043b\u0438 \u043f\u043e \u044e\u0437\u0435\u0440\u0443 \u0435\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435, \u0442\u043e \u0441\u043b\u043e\u0432\u0430\u0440\u044c \u0441\u043e \u0441\u0441\u044b\u043b\u043a\u0430\u043c\u0438\n    \"\"\"\n    if telegram_id in data and \"links\" in data[telegram_id]:\n        return data[telegram_id][\"links\"]\n    return dict()\n\ndef get_images_by_id(telegram_id: int) -&gt; list[str]:\n\"\"\"\n    \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n\n    :param telegram_id: ID \u044e\u0437\u0435\u0440\u0430 \u0432 Telegram\n    :return:\n    \"\"\"\n    if telegram_id in data and \"images\" in data[telegram_id]:\n        return [item[0] for item in data[telegram_id][\"images\"]]\n    return []\n\ndef delete_link(telegram_id: int, link: str):\n\"\"\"\n    \u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0441\u0441\u044b\u043b\u043a\u0443\n\n    :param telegram_id: ID \u044e\u0437\u0435\u0440\u0430 \u0432 Telegram\n    :param link: \u0441\u0441\u044b\u043b\u043a\u0430\n    \"\"\"\n    if telegram_id in data:\n        if \"links\" in data[telegram_id]:\n            if link in data[telegram_id][\"links\"]:\n                del data[telegram_id][\"links\"][link]\n\ndef delete_image(telegram_id: int, photo_file_unique_id: str):\n\"\"\"\n    \u0423\u0434\u0430\u043b\u044f\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\n\n    :param telegram_id: ID \u044e\u0437\u0435\u0440\u0430 \u0432 Telegram\n    :param photo_file_unique_id: file_unique_id \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f\n    \"\"\"\n    if telegram_id in data and \"images\" in data[telegram_id]:\n        for index, (_, unique_id) in enumerate(data[telegram_id][\"images\"]):\n            if unique_id == photo_file_unique_id:\n                data[telegram_id][\"images\"].pop(index)\n</code></pre>"},{"location":"inline_mode/#common-commands","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b \u0432 \u0431\u043e\u0442\u0435","text":"<p>\u0423 \u0431\u043e\u0442\u0430 \u0431\u0443\u0434\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0449\u0438\u0445 \u043a\u043e\u043c\u0430\u043d\u0434: <code>/start</code>, <code>/help</code>, <code>/save</code>, <code>/delete</code> \u0438 <code>/cancel</code>. \u041f\u0435\u0440\u0432\u044b\u0435 \u0434\u0432\u0435 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435,  <code>/save</code> \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445, <code>/delete</code> \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445, \u0430 <code>/cancel</code>, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e,  \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u0435\u0442 \u043e\u0434\u0438\u043d \u0438\u0437 \u0437\u0430\u043f\u0443\u0449\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0432. \u041d\u0430\u0447\u043d\u0451\u043c \u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u044b <code>/save</code>.</p>"},{"location":"inline_mode/#data-saving","title":"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041d\u0430 \u044d\u0442\u043e\u0442 \u0440\u0430\u0437 \u043c\u044b \u043e\u043f\u0438\u0448\u0435\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f (states) \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435, \u0447\u0442\u043e\u0431\u044b \u0431\u044b\u043b\u043e \u0443\u0434\u043e\u0431\u043d\u0435\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0444\u0430\u0439\u043b  <code>states.py</code> \u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0435\u043c \u043a\u043b\u0430\u0441\u0441 <code>SaveCommon</code>, \u0433\u0434\u0435 \u0431\u0443\u0434\u0435\u0442 \u043e\u0434\u043d\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u00ab\u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0432\u0432\u043e\u0434\u00bb:</p> states.py<pre><code>from aiogram.dispatcher.fsm.state import StatesGroup, State\n\nclass SaveCommon(StatesGroup):\n    waiting_for_save_start = State()\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0437\u0430\u0439\u043c\u0451\u043c\u0441\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 </p>"},{"location":"inline_mode/#save-text","title":"\u0422\u0435\u043a\u0441\u0442","text":"<p>\u041d\u0430\u0447\u043d\u0451\u043c \u0441 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439. \u0418\u0434\u0435\u044f \u043f\u0440\u043e\u0441\u0442\u0430\u044f: \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043a\u0438\u0434\u0430\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435. \u0415\u0441\u043b\u0438 \u0442\u0430\u043c \u0435\u0441\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0430 \u0441\u0441\u044b\u043b\u043a\u0430, \u0442\u043e  \u043e\u043d\u0430 \u0438\u0437\u0432\u043b\u0435\u043a\u0430\u0435\u0442\u0441\u044f, \u0430 \u0434\u0430\u043b\u0435\u0435 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u0432\u0432\u0435\u0441\u0442\u0438 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u0441\u044b\u043b\u043a\u0438 (\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e) \u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435. \u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0448\u0430\u0433 \u043c\u043e\u0436\u043d\u043e \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c  \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <code>/skip</code>. \u0415\u0441\u043b\u0438 \u0441\u0441\u044b\u043b\u043e\u043a \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e, \u0442\u043e \u0431\u0435\u0440\u0451\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0432\u0430\u044f.</p> <p>\u041f\u043e\u043c\u0438\u043c\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u043e\u0433\u043e \u0432\u044b\u0448\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u00ab\u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0432\u0432\u043e\u0434\u00bb, \u0431\u0443\u0434\u0435\u0442 \u0435\u0449\u0451 \u0434\u0432\u0430 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0445 \u0434\u043b\u044f \u0442\u0435\u043a\u0441\u0442\u0430: \u00ab\u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0432\u0432\u043e\u0434 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430\u00bb \u0438  \u00ab\u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u0432\u0432\u043e\u0434 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f\u00bb. \u0412 <code>states.py</code> \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u044d\u0442\u0438 \u0441\u0442\u0435\u0439\u0442\u044b:</p> states.py<pre><code># \u0442\u0443\u0442 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439 \u043a\u043e\u0434\n\nclass TextSave(StatesGroup):\n    waiting_for_title = State()\n    waiting_for_description = State()\n</code></pre> <p>\u041d\u0430\u0447\u043d\u0451\u043c \u0441 \u0434\u0432\u0443\u0445 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432 \u043d\u0430 \u0442\u0435\u043a\u0441\u0442 \u0432 \u0441\u0442\u0435\u0439\u0442\u0435 <code>SaveCommon</code> -&gt; <code>waiting_for_save_start</code>. \u041d\u0430\u0434\u043e \u043b\u043e\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0441\u043e \u0441\u0441\u044b\u043b\u043a\u0430\u043c\u0438.  \u0412 \u0433\u043b\u0430\u0432\u0435 \u043f\u0440\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u0438 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438 \u043c\u044b \u0443\u0436\u0435 \u0434\u0435\u043b\u0430\u043b\u0438 \u043f\u043e\u0445\u043e\u0436\u0438\u0439 \u0444\u0438\u043b\u044c\u0442\u0440, \u043d\u043e \u0434\u043b\u044f  \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u043e\u0432. \u041d\u0430\u0441\u0442\u0430\u043b\u043e \u0432\u0440\u0435\u043c\u044f \u0435\u0433\u043e \u043e\u0442\u0442\u0443\u0434\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u0430\u0434\u0430\u043f\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0434 \u0441\u0441\u044b\u043b\u043a\u0438:</p> filters/text_has_link.py<pre><code>from typing import Union, Dict, Any\n\nfrom aiogram.dispatcher.filters import BaseFilter\nfrom aiogram.types import Message\n\n\nclass HasLinkFilter(BaseFilter):\n    async def __call__(self, message: Message) -&gt; Union[bool, Dict[str, Any]]:\n        # \u0415\u0441\u043b\u0438 entities \u0432\u043e\u043e\u0431\u0449\u0435 \u043d\u0435\u0442, \u0432\u0435\u0440\u043d\u0451\u0442\u0441\u044f None,\n        # \u0432 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0441\u0447\u0438\u0442\u0430\u0435\u043c, \u0447\u0442\u043e \u044d\u0442\u043e \u043f\u0443\u0441\u0442\u043e\u0439 \u0441\u043f\u0438\u0441\u043e\u043a\n        entities = message.entities or []\n\n        # \u0415\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u043d\u0430 \u0441\u0441\u044b\u043b\u043a\u0430, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c \u0435\u0451\n        for entity in entities:\n            if entity.type == \"url\":\n                return {\"link\": entity.extract(message.text)}\n\n        # \u0415\u0441\u043b\u0438 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0448\u043b\u0438, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c None\n        return False\n</code></pre> <p>\u0427\u0442\u043e\u0431\u044b \u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u043c\u043f\u043e\u0440\u0442, \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u0444\u0430\u0439\u043b <code>filters/__init__.py</code>:</p> filters/__init__.py<pre><code>from .text_has_link import HasLinkFilter\n\n# \u0414\u0435\u043b\u0430\u0435\u043c \u0442\u0430\u043a, \u0447\u0442\u043e\u0431\u044b \u0437\u0430\u0442\u0435\u043c \u043f\u0440\u043e\u0441\u0442\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c\n# from filters import HasLinkFilter\n__all__ = [\n    \"HasLinkFilter\"\n]\n</code></pre> <p>\u041f\u043e\u0447\u0435\u043c\u0443 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432 \u043d\u0430 \u0442\u0435\u043a\u0441\u0442 \u043d\u0443\u0436\u043d\u043e \u0434\u0432\u0430? \u041f\u0435\u0440\u0432\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u043b\u043e\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0433\u0434\u0435 \u0435\u0441\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0430, \u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u2014 \u0433\u0434\u0435 \u0435\u0451 \u043d\u0435\u0442. \u041f\u0438\u0448\u0435\u043c:</p> handlers/save_text.py<pre><code># &lt;\u0438\u043c\u043f\u043e\u0440\u0442\u044b&gt;\n\n@router.message(SaveCommon.waiting_for_save_start, F.text, HasLinkFilter())\nasync def save_text_has_link(message: Message, link: str, state: FSMContext):\n    await state.update_data(link=link)\n    await state.set_state(TextSave.waiting_for_title)\n    await message.answer(\n        text=f\"\u041e\u043a\u0435\u0439, \u044f \u043d\u0430\u0448\u0451\u043b \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438 \u0441\u0441\u044b\u043b\u043a\u0443 {link}. \"\n             f\"\u0422\u0435\u043f\u0435\u0440\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u044c \u043c\u043d\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 (\u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)\"\n    )\n\n@router.message(SaveCommon.waiting_for_save_start, F.text)\nasync def save_text_no_link(message: Message):\n    await message.answer(\n        text=\"\u042d\u043c\u043c.. \u044f \u043d\u0435 \u043d\u0430\u0448\u0451\u043b \u0432 \u0442\u0432\u043e\u0451\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438 \u0441\u0441\u044b\u043b\u043a\u0443. \"\n             \"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0451 \u0440\u0430\u0437 \u0438\u043b\u0438 \u043d\u0430\u0436\u043c\u0438 /cancel, \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.\"\n    )\n</code></pre> <p>\u0414\u0430\u043b\u0435\u0435 \u043e\u0436\u0438\u0434\u0430\u0435\u043c \u043e\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432\u0432\u043e\u0434 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0430 \u0437\u0430\u043f\u0438\u0441\u0438. \u0417\u0434\u0435\u0441\u044c \u0442\u043e\u0436\u0435 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0437\u0431\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443 \u043d\u0430 \u0434\u0432\u0430 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430: \u0434\u043b\u044f \u0443\u0434\u0430\u0447\u043d\u043e\u0433\u043e  \u0438 \u043d\u0435\u0443\u0434\u0430\u0447\u043d\u043e\u0433\u043e \u0441\u0442\u0435\u0447\u0435\u043d\u0438\u044f \u043e\u0431\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u0441\u0442\u0432:</p> handlers/save_text.py<pre><code># \u0438\u043c\u043f\u043e\u0440\u0442\u044b \u0438 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u0448\u0430\u0433\u0438\n\n@router.message(TextSave.waiting_for_title, F.text.func(len) &lt;= 30)\nasync def title_entered_ok(message: Message, state: FSMContext):\n    await state.update_data(title=message.text, description=None)\n    await state.set_state(TextSave.waiting_for_description)\n    await message.answer(\n        text=\"\u0422\u0430\u043a, \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0432\u0438\u0436\u0443. \u0422\u0435\u043f\u0435\u0440\u044c \u0432\u0432\u0435\u0434\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \"\n             \"(\u0442\u043e\u0436\u0435 \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432) \"\n             \"\u0438\u043b\u0438 \u043d\u0430\u0436\u043c\u0438 /skip, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0448\u0430\u0433\"\n    )\n\n@router.message(TextSave.waiting_for_title, F.text)\nasync def too_long_title(message: Message):\n    await message.answer(\"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0451 \u0440\u0430\u0437\")\n    return\n</code></pre> <p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 \u043a\u043e\u0434 <code>F.text.func(len) &lt;= 30</code>. Magic filter \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u043d\u0430 \u0432\u0445\u043e\u0434 \u043a\u0430\u043a\u0443\u044e-\u043b\u0438\u0431\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u0430\u044f  \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0441\u044f \u043d\u0430\u0434 \u0442\u0435\u043c, \u0447\u0442\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u0434\u043e <code>.func</code>. \u0422.\u0435. <code>F.text.func(len)</code> -&gt; <code>len(F.text)</code> \u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0435\u0441\u043b\u0438 \u0430\u0442\u0440\u0438\u0431\u0443\u0442 <code>.text</code>  \u043d\u0435 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f None (\u0438\u043d\u044b\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u0437\u0434\u0435\u0441\u044c \u0435\u0449\u0451 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430 \u043a\u043e\u043d\u0442\u0435\u043d\u0442-\u0442\u0430\u0439\u043f).</p> <p>\u041d\u0430 \u043e\u0447\u0435\u0440\u0435\u0434\u0438 \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435. \u0417\u0434\u0435\u0441\u044c \u043c\u043e\u0436\u043d\u043e \u0441\u043d\u043e\u0432\u0430 \u0440\u0430\u0437\u0431\u0438\u0442\u044c \u043d\u0430 \u0434\u0432\u0430 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430... \u043f\u043e\u0441\u0442\u043e\u0439\u0442\u0435, \u043d\u043e \u0432\u0435\u0434\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044f <code>too_long_title()</code>,  \u043f\u043e \u0441\u0443\u0442\u0438, \u043c\u043e\u0436\u0435\u0442 \u0442\u0430\u043a \u0436\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442\u044c \u0438 \u0434\u043b\u044f \u0448\u0430\u0433\u0430 \u0441 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435\u043c, \u0440\u0430\u0437 \u0443\u0436 \u0443 \u043d\u0430\u0441 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u043d\u0430 \u0442\u0435\u043a\u0441\u0442! \u041f\u0435\u0440\u0435\u0438\u043c\u0435\u043d\u0443\u0435\u043c \u0435\u0451 \u0438  \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0444\u0438\u043b\u044c\u0442\u0440 \u043d\u0430 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0442\u0435\u0439\u0442:</p> handlers/save_text.py<pre><code>@router.message(TextSave.waiting_for_title, F.text)\n@router.message(TextSave.waiting_for_description, F.text)\nasync def text_too_long(message: Message):  # \u0431\u044b\u0432\u0448. too_long_title()\n    await message.answer(\"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0451 \u0440\u0430\u0437\")\n    return\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u043e\u0437\u044c\u043c\u0451\u043c\u0441\u044f \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u0445\u044d\u043d\u0434\u043b\u0435\u0440, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u043f\u0430\u0434\u0430\u0435\u043c \u043b\u0438\u0431\u043e \u043f\u0440\u0438 \u0432\u0432\u043e\u0434\u0435 \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0433\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f, \u043b\u0438\u0431\u043e \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0435 <code>/skip</code>.  \u0410 \u0440\u0430\u0437 \u043d\u0430\u0434\u043e \u043b\u043e\u0432\u0438\u0442\u044c \u0434\u0432\u0430 \u0432\u0445\u043e\u0434\u0430, \u0442\u043e \u0432\u0435\u0448\u0430\u0435\u043c \u0434\u0432\u0430 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u0430, \u0432 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430\u0445 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u043c \u043e\u043f\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 <code>CommandObject</code> \u0438 \u0432\u043d\u0443\u0442\u0440\u0438  \u0441\u043c\u043e\u0442\u0440\u0438\u043c: \u0435\u0441\u043b\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043d\u0435\u0442, \u0437\u043d\u0430\u0447\u0438\u0442, \u0432\u0432\u0435\u043b\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:</p> handlers/save_text.py<pre><code># \u042d\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u041f\u0415\u0420\u0415\u0414 text_too_long() !\n@router.message(TextSave.waiting_for_description, F.text.func(len) &lt;= 30)\n@router.message(TextSave.waiting_for_description, Command(commands=[\"skip\"]))\nasync def last_step(\n        message: Message,\n        state: FSMContext,\n        command: Optional[CommandObject] = None\n):\n    if not command:\n        await state.update_data(description=message.text)\n    # \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043d\u0430\u0448\u0443 \u043d\u0435\u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0443\u044e \u0411\u0414\n    data = await state.get_data()\n    add_link(message.from_user.id, data[\"link\"], data[\"title\"], data[\"description\"])\n\n    await message.answer(\"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430!\")\n    await state.clear()\n</code></pre> <p>\u0418\u0442\u0430\u043a, \u043c\u044b \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u043d\u0430\u0431\u043e\u0440 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432 \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u0441\u044b\u043b\u043e\u043a \u0432 \u043d\u0430\u0448\u0443 in-memory \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445. \u0412\u043e\u0442 \u0432\u0435\u0441\u044c \u043a\u043e\u0434 \u0444\u0430\u0439\u043b\u0430 \u0446\u0435\u043b\u0438\u043a\u043e\u043c:</p> handlers/save_text.py<pre><code>from typing import Optional\n\nfrom aiogram import Router, F\nfrom aiogram.dispatcher.filters.command import Command, CommandObject\nfrom aiogram.dispatcher.fsm.context import FSMContext\nfrom aiogram.types import Message\n\nfrom filters import HasLinkFilter\nfrom states import SaveCommon, TextSave\nfrom storage import add_link\n\nrouter = Router()\n\n@router.message(SaveCommon.waiting_for_save_start, F.text, HasLinkFilter())\nasync def save_text_has_link(message: Message, link: str, state: FSMContext):\n    await state.update_data(link=link)\n    await state.set_state(TextSave.waiting_for_title)\n    await message.answer(\n        text=f\"\u041e\u043a\u0435\u0439, \u044f \u043d\u0430\u0448\u0451\u043b \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438 \u0441\u0441\u044b\u043b\u043a\u0443 {link}. \"\n             f\"\u0422\u0435\u043f\u0435\u0440\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u044c \u043c\u043d\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 (\u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)\"\n    )\n\n@router.message(SaveCommon.waiting_for_save_start, F.text)\nasync def save_text_no_link(message: Message):\n    await message.answer(\n        text=\"\u042d\u043c\u043c.. \u044f \u043d\u0435 \u043d\u0430\u0448\u0451\u043b \u0432 \u0442\u0432\u043e\u0451\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438 \u0441\u0441\u044b\u043b\u043a\u0443. \"\n             \"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0451 \u0440\u0430\u0437 \u0438\u043b\u0438 \u043d\u0430\u0436\u043c\u0438 /cancel, \u0447\u0442\u043e\u0431\u044b \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c.\"\n    )\n\n@router.message(TextSave.waiting_for_title, F.text.func(len) &lt;= 30)\nasync def title_entered_ok(message: Message, state: FSMContext):\n    await state.update_data(title=message.text, description=None)\n    await state.set_state(TextSave.waiting_for_description)\n    await message.answer(\n        text=\"\u0422\u0430\u043a, \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0432\u0438\u0436\u0443. \u0422\u0435\u043f\u0435\u0440\u044c \u0432\u0432\u0435\u0434\u0438 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \"\n             \"(\u0442\u043e\u0436\u0435 \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432) \"\n             \"\u0438\u043b\u0438 \u043d\u0430\u0436\u043c\u0438 /skip, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0448\u0430\u0433\"\n    )\n\n@router.message(TextSave.waiting_for_description, F.text.func(len) &lt;= 30)\n@router.message(TextSave.waiting_for_description, Command(commands=[\"skip\"]))\nasync def last_step(\n        message: Message,\n        state: FSMContext,\n        command: Optional[CommandObject] = None\n):\n    if not command:\n        await state.update_data(description=message.text)\n    # \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043d\u0430\u0448\u0443 \u043d\u0435\u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0443\u044e \u0411\u0414\n    data = await state.get_data()\n    add_link(message.from_user.id, data[\"link\"], data[\"title\"], data[\"description\"])\n\n    await message.answer(\"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430!\")\n    await state.clear()\n\n@router.message(TextSave.waiting_for_title, F.text)\n@router.message(TextSave.waiting_for_description, F.text)\nasync def text_too_long(message: Message):\n    await message.answer(\"\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439 \u0435\u0449\u0451 \u0440\u0430\u0437\")\n    return\n</code></pre>"},{"location":"inline_mode/#save-images","title":"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f","text":"<p>\u0421 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0430\u043c\u0438 \u0433\u043e\u0440\u0430\u0437\u0434\u043e \u043f\u0440\u043e\u0449\u0435; \u043e\u043d\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0432 \u043e\u0434\u0438\u043d \u0448\u0430\u0433. \u041d\u043e \u0435\u0441\u0442\u044c \u043d\u044e\u0430\u043d\u0441: \u043f\u043e\u043c\u0438\u043c\u043e <code>file_id</code> \u0434\u043b\u044f \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0433\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f,  \u043d\u0430\u043c \u043d\u0430\u0434\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c <code>file_unique_id</code>, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u043d \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u0442\u0441\u044f, \u043a\u043e\u0433\u0434\u0430 \u043c\u044b \u043f\u043e\u0437\u0432\u043e\u043b\u0438\u043c \u044e\u0437\u0435\u0440\u0443 \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438:</p> handlers/save_images.py<pre><code>from aiogram import Router, F\nfrom aiogram.dispatcher.fsm.context import FSMContext\nfrom aiogram.types import Message, PhotoSize\nfrom states import SaveCommon\nfrom storage import add_photo\n\nrouter = Router()\n\n@router.message(SaveCommon.waiting_for_save_start, F.photo[-1].as_(\"photo\"))\nasync def save_image(message: Message, photo: PhotoSize, state: FSMContext):\n    add_photo(message.from_user.id, photo.file_id, photo.file_unique_id)\n    await message.answer(\"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e!\")\n    await state.clear()\n</code></pre>"},{"location":"inline_mode/#show-data","title":"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u041e\u043a\u0435\u0439, \u0434\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u043d\u0430\u0443\u0447\u0438\u043b\u0438\u0441\u044c, \u0442\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u0434\u043e \u0438\u0445 \u043a\u0430\u043a-\u0442\u043e \u043e\u0442\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u044c. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0431\u043e\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043b\u043e\u0432\u0438\u0442\u044c \u0430\u043f\u0434\u0435\u0439\u0442\u044b \u0441 \u0442\u0438\u043f\u043e\u043c  <code>inline_query</code>, \u0430 \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043f\u0440\u0438\u0434\u0451\u0442 \u043e\u0431\u044a\u0435\u043a\u0442 \u0442\u0438\u043f\u0430 InlineQuery.  \u0423\u0441\u043b\u043e\u0432\u0438\u043c\u0441\u044f, \u0447\u0442\u043e \u043d\u0430 \u043f\u0443\u0441\u0442\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 (\u043f\u043e\u043a\u0430) \u043d\u0438\u0447\u0435\u0433\u043e \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043d\u0435 \u0431\u0443\u0434\u0435\u043c, \u043d\u0430 \u0437\u0430\u043f\u0440\u043e\u0441 <code>@bot links</code> \u043f\u043e\u043a\u0430\u0436\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0441\u044b\u043b\u043e\u043a, \u0430  \u043d\u0430 \u0437\u0430\u043f\u0440\u043e\u0441 <code>@bot images</code> \u2014 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438. \u0412\u043c\u0435\u0441\u0442\u043e <code>@bot</code>, \u043a\u043e\u043d\u0435\u0447\u043d\u043e \u0436\u0435, \u0431\u0443\u0434\u0435\u0442 \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c \u0431\u043e\u0442\u0430.</p>"},{"location":"inline_mode/#show-text","title":"\u0422\u0435\u043a\u0441\u0442","text":"<p>\u0414\u043b\u044f \u043e\u0442\u0432\u0435\u0442\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u043c\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438 \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u0441 \u0442\u0438\u043f\u043e\u043c InlineQueryResultArticle. \u0412\u0441\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435  (\u0438 \u0434\u0430\u0436\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435) \u0434\u0430\u043d\u043d\u044b\u0435 \u0443 \u043d\u0430\u0441 \u0443\u0436\u0435 \u0435\u0441\u0442\u044c:</p> <p></p> <p>\u0414\u043b\u044f \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0430 <code>input_message_content</code> \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u043f\u0440\u043e\u0441\u0442\u0443\u044e \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0441 \u0443\u0447\u0451\u0442\u043e\u043c \u043d\u0430\u043b\u0438\u0447\u0438\u044f \u0438\u043b\u0438  \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0438\u044f \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f:</p> <pre><code>def get_message_text(\n        link: str,\n        title: str,\n        description: Optional[str]\n) -&gt; str:\n    text_parts = [f'{html.bold(html.quote(title))}']\n    if description:\n        text_parts.append(html.quote(description))\n    text_parts.append(\"\")  # \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u043f\u0443\u0441\u0442\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443\n    text_parts.append(link)\n    return \"\\n\".join(text_parts)\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043e\u043f\u0438\u0448\u0435\u043c \u0441\u0430\u043c \u0445\u044d\u043d\u0434\u043b\u0435\u0440:</p> handlers/inline_mode.py<pre><code>@router.inline_query(F.query == \"links\")\nasync def show_user_links(inline_query: InlineQuery):\n\n    # \u042d\u0442\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043f\u0440\u043e\u0441\u0442\u043e \u0441\u043e\u0431\u0438\u0440\u0430\u0435\u0442 \u0442\u0435\u043a\u0441\u0442, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442\n    # \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d \u043f\u0440\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u043d\u0430 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u0432 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0435\n    def get_message_text():\n        # \u044d\u0442\u0430 \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043e\u043f\u0438\u0441\u0430\u043d\u0430 \u0432\u044b\u0448\u0435 \u2191\n\n    results = []\n    for link, link_data in get_links_by_id(inline_query.from_user.id).items():\n        # \u0412 \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432 \u0437\u0430\u043f\u0438\u0445\u0438\u0432\u0430\u0435\u043c \u043a\u0430\u0436\u0434\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c\n        results.append(InlineQueryResultArticle(\n            id=link,  # \u0441\u0441\u044b\u043b\u043a\u0438 \u0443 \u043d\u0430\u0441 \u0443\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0435, \u043f\u043e\u0442\u043e\u043c\u0443 \u043f\u0440\u043e\u0431\u043b\u0435\u043c \u043d\u0435 \u0431\u0443\u0434\u0435\u0442\n            title=link_data[\"title\"],\n            description=link_data[\"description\"],\n            input_message_content=InputTextMessageContent(\n                message_text=get_message_text(\n                    link=link,\n                    title=link_data[\"title\"],\n                    description=link_data[\"description\"]\n                ),\n                parse_mode=\"HTML\"\n            )\n        ))\n    # \u0412\u0430\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c is_personal=True!\n    await inline_query.answer(results, is_personal=True)\n</code></pre> <p>\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0432 \u0438\u0442\u043e\u0433\u0435 (\u0443 \u0432\u0442\u043e\u0440\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438 \u0431\u044b\u043b \u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d \u044d\u0442\u0430\u043f \u0441\u043e \u0441\u0432\u043e\u0434\u043e\u043c <code>description</code>):</p> <p></p> <p>\u041f\u0440\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f \u0432\u043e\u0442 \u0442\u0430\u043a\u043e\u0435 \u043a\u0440\u0430\u0441\u0438\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435:</p> <p></p>"},{"location":"inline_mode/#show-images","title":"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f","text":"<p>\u0421 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438 \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043f\u043e\u043f\u0440\u043e\u0449\u0435, \u043e\u0434\u043d\u0430\u043a\u043e \u0442\u0443\u0442 \u0435\u0441\u0442\u044c \u043d\u044e\u0430\u043d\u0441: \u043c\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u043c \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0430\u0439\u0434\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c  <code>file_id</code> \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u043d \u0434\u043b\u0438\u043d\u043d\u0435\u0435 64 \u0431\u0430\u0439\u0442 (\u043b\u0438\u043c\u0438\u0442 Bot API). \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440  \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u0432 \u043c\u0430\u0441\u0441\u0438\u0432\u0435, \u0441\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432 \u0441\u0442\u0440\u043e\u043a\u0443. \u0412 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u043c \u043a\u043e\u0434 \u043f\u0440\u0435\u0434\u0435\u043b\u044c\u043d\u043e \u043f\u043e\u0445\u043e\u0436 \u043d\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439:</p> handlers/inline_mode.py<pre><code>@router.inline_query(F.query == \"images\")\nasync def show_user_images(inline_query: InlineQuery):\n    results = []\n    for index, file_id in enumerate(get_images_by_id(inline_query.from_user.id)):\n        # \u0412 \u0438\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u043c\u0430\u0441\u0441\u0438\u0432 \u0437\u0430\u043f\u0438\u0445\u0438\u0432\u0430\u0435\u043c \u043a\u0430\u0436\u0434\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c\n        results.append(InlineQueryResultCachedPhoto(\n            id=str(index),  # \u0438\u043d\u0434\u0435\u043a\u0441 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430 \u0432 list\n            photo_file_id=file_id\n        ))\n    # \u0412\u0430\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c is_personal=True!\n    await inline_query.answer(results, is_personal=True)\n</code></pre> <p>\u041d\u0443 \u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442:</p> <p></p>"},{"location":"inline_mode/#delete-data","title":"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043a\u0438 \u043d\u0430\u0434\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u0442 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0447\u0438\u0441\u0442\u0438\u0442\u044c. \u0422\u0430\u043a \u0438 \u043c\u044b \u0445\u043e\u0442\u0438\u043c \u0434\u0430\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u0443\u0434\u0430\u043b\u044f\u0442\u044c \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438  \u0438/\u0438\u043b\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0441\u0434\u0435\u043b\u0430\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/delete</code>. \u041d\u043e \u0437\u0430\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432\u0432\u043e\u0434\u0438\u0442\u044c \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c \u0431\u043e\u0442\u0430  \u0438 \u043f\u0438\u0441\u0430\u0442\u044c <code>links</code> \u0438\u043b\u0438 <code>images</code> \u043c\u044b \u043d\u0435 \u0445\u043e\u0442\u0438\u043c. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u043e\u0434 \u043e\u0442\u0432\u0435\u0442\u043e\u043c \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0438\u043c \u0434\u0432\u0435 \u043a\u043d\u043e\u043f\u043a\u0438. \u041e\u0434\u043d\u0430 \u043e\u0442\u043a\u0440\u043e\u0435\u0442  \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c \u043d\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0441\u0441\u044b\u043b\u043e\u043a, \u0434\u0440\u0443\u0433\u0430\u044f \u2014 \u043d\u0430 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439. </p> <p>\u0414\u043e\u0431\u0430\u0432\u0438\u043c \u0432 <code>states.py</code> \u043d\u043e\u0432\u044b\u0439 \u043a\u043b\u0430\u0441\u0441:</p> states.py<pre><code>class DeleteCommon(StatesGroup):\n    waiting_for_delete_start = State()\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u0434\u0435\u043b\u0430\u0435\u043c \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/delete</code>:</p> handlers/common.py<pre><code>@router.message(Command(commands=[\"delete\"]), state=None)\nasync def cmd_delete(message: Message, state: FSMContext):\n    kb = []\n    kb.append([\n        InlineKeyboardButton(\n            text=\"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443\",\nswitch_inline_query_current_chat=\"links\"\n)\n    ])\n    kb.append([\n        InlineKeyboardButton(\n            text=\"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435\",\nswitch_inline_query_current_chat=\"images\"\n)\n    ])\n    await state.set_state(DeleteCommon.waiting_for_delete_start)\n    await message.answer(\n        text=\"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c:\",\n        reply_markup=InlineKeyboardMarkup(inline_keyboard=kb)\n    )\n</code></pre> <p>\u041f\u0440\u0438 \u043d\u0430\u0436\u0430\u0442\u0438\u0438 \u043d\u0430 \u0442\u0430\u043a\u0443\u044e \u043a\u043d\u043e\u043f\u043a\u0443 \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u0443\u0436\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0432 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c, \u0447\u0442\u043e \u0441\u0440\u0430\u0437\u0443 \u043e\u0442\u043a\u0440\u043e\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0441\u044b\u043b\u043e\u043a \u0438\u043b\u0438  \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 (\u0434\u043b\u044f \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u044f \u0443\u0431\u0440\u0430\u043b \u043f\u043e\u043a\u0430 \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u044e\u0449\u0435\u0433\u043e \u043c\u0435\u043d\u044e, \u0447\u0442\u043e\u0431\u044b \u0431\u044b\u043b\u043e \u0432\u0438\u0434\u043d\u043e \u043a\u043d\u043e\u043f\u043a\u0438):</p> <p></p> <p>\u0415\u0441\u043b\u0438 \u0431\u044b \u043c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438 \u043f\u0440\u043e\u0441\u0442\u043e <code>switch_inline_query</code> \u0432\u043c\u0435\u0441\u0442\u043e <code>switch_inline_query_current_chat</code>, \u0442\u043e Telegram \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u043b  \u0431\u044b \u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0447\u0430\u0442, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043c\u043e\u0436\u0435\u0442 \u043f\u0438\u0441\u0430\u0442\u044c, \u0430 \u0437\u0430\u0442\u0435\u043c \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u0438\u043b \u0431\u044b \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u0442\u0430\u043c.</p> <p>\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0440\u043e\u0443\u0442\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u043b\u043e\u0432\u0438\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043d\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0430:</p> handlers/delete_data.py<pre><code># \u0438\u043c\u043f\u043e\u0440\u0442\u044b\nrouter = Router()\n\n@router.message(\n    DeleteCommon.waiting_for_delete_start,\n    F.text,\n    ViaBotFilter(),\n    HasLinkFilter()\n)\nasync def link_deletion_handler(message: Message, link: str, state: FSMContext):\n    delete_link(message.from_user.id, link)\n    await state.clear()\n    await message.answer(\n        text=\"\u0421\u0441\u044b\u043b\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430! \"\n             \"\u0412\u044b\u0434\u0430\u0447\u0430 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0430 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043c\u0438\u043d\u0443\u0442.\")\n\n@router.message(\n    DeleteCommon.waiting_for_delete_start,\n    F.photo[-1].file_unique_id.as_(\"file_unique_id\"),\n    ViaBotFilter()\n)\nasync def image_deletion_handler(\n        message: Message,\n        state: FSMContext,\n        file_unique_id: str\n):\n    delete_image(message.from_user.id, file_unique_id)\n    await state.clear()\n    await message.answer(\n        text=\"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e! \"\n             \"\u0412\u044b\u0434\u0430\u0447\u0430 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0430 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0441\u044f \u0432 \u0442\u0435\u0447\u0435\u043d\u0438\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043c\u0438\u043d\u0443\u0442.\")\n</code></pre> <p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435: \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u043c\u044b \u0443\u0434\u0430\u043b\u044f\u0435\u043c \u043f\u043e <code>file_unique_id</code>, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043f\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u0439 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 <code>file_id</code>  \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0437\u043d\u044b\u0439 (\u0435\u0441\u043b\u0438 \u043a\u0440\u0430\u0442\u043a\u043e: \u0432 \u043f\u043e\u043b\u043d\u043e\u043c <code>file_id</code> \u0437\u0430\u0448\u0438\u0442\u044b \u043e\u0442\u043c\u0435\u0442\u043a\u0438 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u043f\u0440\u043e\u0447\u0438\u0435 \u043d\u0435\u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435).</p>"},{"location":"inline_mode/#switch-parameter","title":"Switch \u0442\u0443\u0434\u0430 \u0438 \u043e\u0431\u0440\u0430\u0442\u043d\u043e","text":"<p>\u041a\u043e\u0433\u0434\u0430 \u043c\u044b \u0440\u0430\u043d\u0435\u0435 \u043e\u0431\u0441\u0443\u0436\u0434\u0430\u043b\u0438 \u0444\u043e\u0440\u043c\u0430\u0442 \u0438\u0441\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432, \u0442\u043e \u0432\u0438\u0434\u0435\u043b\u0438 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b  \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c <code>switch_pm</code>. \u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0438\u043c\u0438 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u0441\u044f, \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043c\u043e\u0433 \u0441\u0440\u0430\u0437\u0443 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u0437 \u043b\u044e\u0431\u043e\u0433\u043e  \u0447\u0430\u0442\u0430, \u0430 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u043b\u0438\u0447\u043a\u0438 \u0441 \u0431\u043e\u0442\u043e\u043c.</p> <p>\u0414\u043e\u0431\u0430\u0432\u0438\u043c \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0438\u043d\u043b\u0430\u0439\u043d-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0432\u044b\u0448\u0435\u0443\u043f\u043e\u043c\u044f\u043d\u0443\u0442\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u0435\u0440\u0435\u043f\u0438\u0448\u0435\u043c \u0432\u044b\u0437\u043e\u0432 \u043c\u0435\u0442\u043e\u0434\u0430 <code>answer_inline_query()</code>  \u0432 \u0444\u0430\u0439\u043b\u0435 <code>handlers/inline_mode.py</code>:</p> <pre><code>await inline_query.answer(\n        results, is_personal=True,\n        switch_pm_text=\"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0451 \u00bb\u00bb\",\n        switch_pm_parameter=\"add\"\n    )\n</code></pre> <p>\u0412 \u0444\u0430\u0439\u043b\u0435 <code>handlers/common.py</code> \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0443 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/save</code> \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u0435\u0449\u0451 \u043e\u0434\u043d\u0443 \u0442\u043e\u0447\u043a\u0443 \u0432\u0445\u043e\u0434\u0430 \u0447\u0435\u0440\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440 <code>CommandStart</code>  \u0441 \u0434\u0438\u043f\u043b\u0438\u043d\u043a\u043e\u043c <code>add</code>:</p> handlers/common.py<pre><code># \u043d\u043e\u0432\u044b\u0439 \u0438\u043c\u043f\u043e\u0440\u0442:\nfrom aiogram.dispatcher.filters.command import CommandStart\n\n@router.message(CommandStart(command_magic=F.args == \"add\"))\n@router.message(Command(commands=[\"save\"]), state=None)\nasync def cmd_save(message: Message, state: FSMContext):\n    ...\n\n# \u0423\u0447\u0442\u0438\u0442\u0435, \u0447\u0442\u043e \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 \u043f\u0440\u043e\u0441\u0442\u043e /start \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u0434\u0442\u0438 \u041f\u041e\u0417\u0416\u0415\n@router.message(Command(commands=[\"start\"]))\nasync def cmd_start(message: Message, state: FSMContext):\n    ...\n</code></pre> <p>\u0410 \u0442\u0430\u043a\u0436\u0435 \u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c \u044d\u0442\u0430\u043f\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0442\u0435\u043a\u0441\u0442\u0430 \u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u0434\u043e\u0431\u0430\u0432\u0438\u043c <code>switch_inline_query</code> \u043a\u043d\u043e\u043f\u043a\u0443 \u0441 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435\u043c  \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043a\u0438\u043d\u0443\u0442\u044c \u0447\u0442\u043e-\u0442\u043e \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0447\u0430\u0442:</p> <pre><code># \u0444\u0430\u0439\u043b handlers/save_text.py\n@router.message(TextSave.waiting_for_description, F.text.func(len) &lt;= 30)\n@router.message(TextSave.waiting_for_description, Command(commands=[\"skip\"]))\nasync def last_step(...):\n    # \u0442\u0443\u0442 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u043a\u043e\u0434 \u0444\u0443\u043d\u043a\u0446\u0438\u0438\n    kb = [[InlineKeyboardButton(\n        text=\"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c\",\n        switch_inline_query=\"links\"\n    )]]\n    await message.answer(\n        text=\"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430!\",\n        reply_markup=InlineKeyboardMarkup(inline_keyboard=kb)\n    )\n\n# \u0444\u0430\u0439\u043b handlers/save_images.py\n@router.message(SaveCommon.waiting_for_save_start, F.photo[-1].as_(\"photo\"))\nasync def save_image(...):\n    # \u0442\u0443\u0442 \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u043a\u043e\u0434 \u0444\u0443\u043d\u043a\u0446\u0438\u0438\n    kb = [[InlineKeyboardButton(\n        text=\"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c\",\n        switch_inline_query=\"images\"\n    )]]\n    await message.answer(\n        text=\"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e!\",\n        reply_markup=InlineKeyboardMarkup(inline_keyboard=kb)\n    )\n</code></pre> <p>\u0418 \u0437\u0434\u0435\u0441\u044c \u043a\u0440\u043e\u0435\u0442\u0441\u044f \u0435\u0449\u0451 \u043e\u0434\u043d\u0430 \u043f\u0440\u0438\u043a\u043e\u043b\u044c\u043d\u0430\u044f \u0444\u0438\u0447\u0430 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0430: \u0435\u0441\u043b\u0438 \u0432\u044b \u0432\u044b\u0437\u043e\u0432\u0435\u0442\u0435 \u0431\u043e\u0442\u0430 \u043d\u0435 \u0432 \u041b\u0421 \u0441 \u043d\u0438\u043c, \u043f\u0435\u0440\u0435\u0439\u0434\u0451\u0442\u0435 \u043f\u043e \u043a\u043d\u043e\u043f\u043a\u0435  \"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0449\u0451 \u00bb\u00bb\", \u0438 \u0434\u043e\u0439\u0434\u0451\u0442\u0435 \u0434\u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0433\u043e \u0448\u0430\u0433\u0430, \u0442\u043e \u043a\u043e\u0433\u0434\u0430 \u0431\u043e\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u043e <code>switch_inline_query</code>-\u043a\u043d\u043e\u043f\u043a\u043e\u0439,  \u043a\u043b\u0438\u0435\u043d\u0442 Telegram \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0435\u0440\u043d\u0451\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0447\u0430\u0442 \u0438 \u0441\u0440\u0430\u0437\u0443 \u043e\u0442\u043a\u0440\u043e\u0435\u0442 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c \u0441 \u043d\u0443\u0436\u043d\u044b\u043c \u0442\u0435\u043a\u0441\u0442\u043e\u043c!</p>"},{"location":"inline_mode/#extras","title":"\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b","text":""},{"location":"inline_mode/#lazy-loading","title":"\u041f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0430 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432","text":"<p>\u0421\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 Bot API, \u0432 \u043e\u0434\u043d\u043e\u043c \u0432\u044b\u0437\u043e\u0432\u0435 answerInlineQuery  \u043c\u043e\u0436\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 50 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432. \u0410 \u0435\u0441\u043b\u0438 \u043d\u0443\u0436\u043d\u043e \u0431\u043e\u043b\u044c\u0448\u0435? \u041d\u0430 \u044d\u0442\u043e\u0442 \u0441\u043b\u0443\u0447\u0430\u0439 \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>next_offset</code>. \u0415\u0433\u043e  \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0441\u0430\u043c \u0431\u043e\u0442, \u0438 \u044d\u0442\u043e \u0436\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u0440\u0438\u0439\u0434\u0451\u0442 \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c \u0438\u043d\u043b\u0430\u0439\u043d-\u0437\u0430\u043f\u0440\u043e\u0441\u0435, \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043f\u0440\u043e\u043b\u0438\u0441\u0442\u0430\u0435\u0442 \u0432\u0441\u044e \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u043f\u0430\u0447\u043a\u0443.  \u0414\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u0447\u0438\u0441\u0435\u043b, \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0449\u0438\u0439 \u043f\u0430\u0447\u043a\u0438 \u043f\u043e 50 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432, \u043d\u043e \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u044b\u043c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c 195:</p> handlers/inline_pagination_demo.py<pre><code>def get_fake_results(start_num: int, size: int = 50) -&gt; list[int]:\n\"\"\"\n    \u0413\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u0437 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0447\u0438\u0441\u0435\u043b\n\n    :param start_num: \u0441\u0442\u0430\u0440\u0442\u043e\u0432\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0434\u043b\u044f \u0433\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440\u0430\n    :param size: \u0440\u0430\u0437\u043c\u0435\u0440 \u043f\u0430\u0447\u043a\u0438 (\u043f\u043e \u0443\u043c\u043e\u043b\u0447. 50)\n    :return: \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0447\u0438\u0441\u0435\u043b\n    \"\"\"\n    overall_items = 195\n    # \u0415\u0441\u043b\u0438 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435\u0442, \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u043f\u0443\u0441\u0442\u043e\u0439 \u0441\u043f\u0438\u0441\u043e\u043a\n    if start_num &gt;= overall_items:\n        return []\n    # \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043d\u0435\u043f\u043e\u043b\u043d\u043e\u0439 \u043f\u0430\u0447\u043a\u0438 (\u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439)\n    elif start_num + size &gt;= overall_items:\n        return list(range(start_num, overall_items+1))\n    else:\n        return list(range(start_num, start_num+size))\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0438\u043d\u043b\u0430\u0439\u043d-\u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u0442\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0438 \u043f\u0440\u0438\u0431\u043b\u0438\u0436\u0435\u043d\u0438\u0438 \u043a \u043a\u043e\u043d\u0446\u0443 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430 Telegram \u0437\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u043b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u043f\u043e\u043b\u0435 <code>offset</code> \u0438 \u0441\u0442\u0430\u0432\u0438\u043c \u0435\u0433\u043e \u0440\u0430\u0432\u043d\u044b\u043c \u0435\u0434\u0438\u043d\u0438\u0446\u0435, \u0435\u0441\u043b\u0438 \u043e\u043d\u043e \u043f\u0443\u0441\u0442\u043e\u0435. \u0414\u0430\u043b\u0435\u0435 \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u043c  \u0444\u0435\u0439\u043a\u043e\u0432\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432. \u0415\u0441\u043b\u0438 \u043d\u0430 \u0432\u044b\u0445\u043e\u0434\u0435 \u0440\u043e\u0432\u043d\u043e 50 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432, \u0442\u043e \u0432 \u043e\u0442\u0432\u0435\u0442\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c <code>next_offset</code> \u0440\u0430\u0432\u043d\u044b\u0439 \u0442\u0435\u043a\u0443\u0449\u0435\u043c\u0443  \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044e + 50. \u0415\u0441\u043b\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u043c\u0435\u043d\u044c\u0448\u0435, \u0442\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c, \u0447\u0442\u043e\u0431\u044b Telegram \u0431\u043e\u043b\u044c\u0448\u0435 \u043d\u0435 \u043f\u044b\u0442\u0430\u043b\u0441\u044f \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438:</p> handlers/inline_pagination_demo.py<pre><code>@router.inline_query(F.query == \"long\")\nasync def pagination_demo(\n        inline_query: InlineQuery,\n):\n    # \u0412\u044b\u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u043c offset \u043a\u0430\u043a \u0447\u0438\u0441\u043b\u043e\n    offset = int(inline_query.offset) if inline_query.offset else 1\n    results = [InlineQueryResultArticle(\n        id=str(item_num),\n        title=f\"\u041e\u0431\u044a\u0435\u043a\u0442 \u2116{item_num}\",\n        input_message_content=InputTextMessageContent(\n            message_text=f\"\u041e\u0431\u044a\u0435\u043a\u0442 \u2116{item_num}\"\n        )\n    ) for item_num in get_fake_results(offset)]\n    if len(results) &lt; 50:\n        await inline_query.answer(\n            results, is_personal=True\n        )\n    else:\n        await inline_query.answer(\n            results, is_personal=True, \nnext_offset=str(offset+50)\n)\n</code></pre> <p>\u041f\u043e \u043c\u0435\u0440\u0435 \u043b\u0438\u0441\u0442\u0430\u043d\u0438\u044f \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432, \u0431\u043e\u0442 \u0431\u0443\u0434\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0442\u044c \u0432\u0441\u0451 \u043d\u043e\u0432\u044b\u0435 \u0438 \u043d\u043e\u0432\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b, \u043f\u043e\u043a\u0430 \u043d\u0435 \u0434\u043e\u0439\u0434\u0451\u0442  \u0434\u043e 195-\u0433\u043e \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u0430, \u0434\u0430\u043b\u044c\u0448\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b \u043f\u0440\u0435\u043a\u0440\u0430\u0442\u044f\u0442\u0441\u044f.</p>"},{"location":"inline_mode/#inline-feedback","title":"\u0421\u0431\u043e\u0440 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438","text":"<p>\u041c\u0430\u043b\u043e \u043a\u0442\u043e \u0437\u043d\u0430\u0435\u0442, \u043d\u043e Telegram \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u0435\u043d\u044c\u043a\u0443\u044e \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443 \u043f\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044e \u0431\u043e\u0442\u0430 \u0432 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0435. \u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430  \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443 \u0443 @BotFather: <code>/mybots</code> - (\u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0431\u043e\u0442\u0430) - Bot Settings - Inline Feedback:</p> <p></p> <p>\u0427\u0438\u0441\u043b\u0430 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0430\u0445 \u043e\u0437\u043d\u0430\u0447\u0430\u044e\u0442 \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u0431\u044b\u0442\u0438\u044f ChosenInlineResult  \u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c \u043a\u0430\u043a\u043e\u0433\u043e-\u043b\u0438\u0431\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0432 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0435. \u0422\u0430\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 10%, \u0442\u043e \u043f\u0440\u0438  \u043a\u0430\u0436\u0434\u043e\u043c \u0432\u044b\u0431\u043e\u0440\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u0432 \u0434\u0435\u0441\u044f\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u043e\u0432 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435 ChosenInlineResult \u0432 \u0431\u043e\u0442\u0435. \u0412\u044b\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c  \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 100% Telegram \u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442 \u0438\u0437-\u0437\u0430 \u0443\u0434\u0432\u043e\u0435\u043d\u0438\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0430 \u0431\u043e\u0442\u0430. \u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0434\u043b\u044f \u0441\u043a\u043e\u043b\u044c\u043a\u043e-\u043d\u0438\u0431\u0443\u0434\u044c \u0441\u0435\u0440\u044c\u0451\u0437\u043d\u043e\u0439 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0438  \u043f\u043e\u0434\u043e\u0431\u043d\u0430\u044f \u0444\u0438\u0447\u0430 \u043d\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442, \u043d\u043e \u0432 \u0443\u043c\u0435\u043b\u044b\u0445 \u0440\u0443\u043a\u0430\u0445 \u0438 \u0437\u0430 \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u043f\u0435\u0440\u0438\u043e\u0434 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043c\u043e\u0436\u0435\u0442 \u0434\u0430\u0442\u044c \u043e\u0431\u0449\u0435\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435  \u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0445 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u0445. \u041f\u0440\u0438\u043c\u0435\u0440 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430 \u043d\u0430 \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f:</p> handlers/inline_chosen_result_demo.py<pre><code>from aiogram import Router\nfrom aiogram.types import ChosenInlineResult\n\nrouter = Router()\n\n@router.chosen_inline_result()\nasync def pagination_demo(\n        chosen_result: ChosenInlineResult,\n):\n    # \u041f\u0438\u0448\u0435\u043c \u043f\u0440\u044f\u043c\u043e \u043d\u0430 \u044d\u043a\u0440\u0430\u043d. \u041d\u043e, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0432\u044b \u0437\u0430\u0445\u043e\u0442\u0438\u0442\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u043a\u0443\u0434\u0430-\u0442\u043e\n    print(\n        f\"After '{chosen_result.query}' query, \"\n        f\"user chose option with ID '{chosen_result.result_id}'\"\n    )\n</code></pre> <p>\u041d\u0435\u0441\u043c\u043e\u0442\u0440\u044f \u043d\u0430 \u0442\u043e, \u0447\u0442\u043e \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c \u043d\u0435 \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u0442 \u0432\u044b\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0434\u043b\u044f Inline Feedback, \u0443 \u044d\u0442\u043e\u0439 \u0448\u0442\u0443\u043a\u0438 \u0435\u0441\u0442\u044c \u043a\u0430\u043a  \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u043e\u0434\u043d\u043e \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435: \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u0443\u0437\u044b\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u0431\u043e\u0442\u044b \u043f\u044b\u0442\u0430\u044e\u0442\u0441\u044f \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043f\u043e\u043b\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u043a\u043e\u043c\u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443,  \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044f \u043f\u0435\u0441\u043d\u044e \u0437\u0430\u0440\u0430\u043d\u0435\u0435. \u0415\u0441\u043b\u0438 \u044d\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0432 \u043c\u043e\u043c\u0435\u043d\u0442 \u0432\u044b\u0437\u043e\u0432\u0430 \u0431\u043e\u0442\u0430 \u0432 \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c\u0435, \u043c\u043e\u0436\u043d\u043e \u043d\u0435 \u0443\u043b\u043e\u0436\u0438\u0442\u044c\u0441\u044f \u0432 10-15 \u0441\u0435\u043a\u0443\u043d\u0434,  \u043f\u043e \u0438\u0441\u0442\u0435\u0447\u0435\u043d\u0438\u044e \u043a\u043e\u0442\u043e\u0440\u044b\u0445 Bot API \u0432\u0435\u0440\u043d\u0451\u0442 \u043e\u0448\u0438\u0431\u043a\u0443 \u043e \u00ab\u043f\u0440\u043e\u0442\u0443\u0445\u0448\u0435\u043c\u00bb \u0430\u043f\u0434\u0435\u0439\u0442\u0435.</p> <p>\u0418 \u0432\u043e\u0442 \u043a\u0430\u043a \u0432\u044b\u043a\u0440\u0443\u0447\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0430\u0432\u0442\u043e\u0440\u044b \u0442\u0430\u043a\u0438\u0445 \u0431\u043e\u0442\u043e\u0432: \u043f\u043e\u043a\u0430 \u044e\u0437\u0435\u0440 \u0438\u0449\u0435\u0442 \u0442\u0440\u0435\u043a, \u0432 \u043f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u0438 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442\u0441\u044f \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u0441\u044d\u043c\u043f\u043b  (5-10 \u0441\u0435\u043a\u0443\u043d\u0434). \u041a\u043e\u0433\u0434\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0436\u043c\u0451\u0442 \u043d\u0430 \u043a\u0430\u043a\u0443\u044e-\u043b\u0438\u0431\u043e \u0441\u0442\u0440\u043e\u0447\u043a\u0443, \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0430\u0443\u0434\u0438\u043e\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u043f\u0440\u0438\u043a\u0440\u0435\u043f\u043b\u0451\u043d\u043d\u043e\u0439 \u0438\u043d\u043b\u0430\u0439\u043d-\u043a\u043d\u043e\u043f\u043a\u043e\u0439 (\u0438\u043d\u0430\u0447\u0435 \u043d\u0435\u043b\u044c\u0437\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435), \u0431\u043e\u0442 \u043b\u043e\u0432\u0438\u0442 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438, \u0434\u043e\u0441\u0442\u0430\u0451\u0442 \u0438\u0437 \u0430\u043f\u0434\u0435\u0439\u0442\u0430 \u0441 \u0442\u0438\u043f\u043e\u043c <code>ChosenInlineResult</code>  \u0441\u043a\u0432\u043e\u0437\u043d\u043e\u0439 <code>inline_message_id</code> \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0433\u0440\u0443\u0437\u0438\u0442 \u043f\u043e\u043b\u043d\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0430\u0443\u0434\u0438\u043e \u0438, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u044d\u0442\u043e\u0442 <code>inline_message_id</code> \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u0442  \u0441\u044d\u043c\u043f\u043b \u043d\u0430 \u043f\u043e\u043b\u043d\u043e\u0446\u0435\u043d\u043d\u044b\u0439 \u0442\u0440\u0435\u043a. Telegram \u043f\u0440\u0438\u0443\u0447\u0430\u0435\u0442 \u043a \u043a\u043e\u0441\u0442\u044b\u043b\u044f\u043c, \u0434\u0430. </p>"},{"location":"messages/","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c\u0438","text":"<p>\u041e \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u0435\u0440\u0441\u0438\u0439</p> <p>\u041a\u043e\u0434 \u0432 \u0433\u043b\u0430\u0432\u0430\u0445 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 aiogram 3.0 beta3. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438.</p> <p>\u0412 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435 \u043c\u044b \u0440\u0430\u0437\u0431\u0435\u0440\u0451\u043c\u0441\u044f, \u043a\u0430\u043a \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\u043c \u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u0430\u043c\u0438. </p>"},{"location":"messages/#text","title":"\u0422\u0435\u043a\u0441\u0442","text":"<p>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u2014 \u044d\u0442\u043e, \u043f\u043e\u0436\u0430\u043b\u0443\u0439, \u043e\u0434\u043d\u043e \u0438\u0437 \u0432\u0430\u0436\u043d\u0435\u0439\u0448\u0438\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u0443 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0430 \u0431\u043e\u0442\u043e\u0432. \u0422\u0435\u043a\u0441\u0442\u043e\u043c \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0440\u0430\u0437\u0438\u0442\u044c  \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0447\u0442\u043e \u0443\u0433\u043e\u0434\u043d\u043e \u0438 \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043f\u043e\u0434\u0430\u0432\u0430\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0445\u043e\u0447\u0435\u0442\u0441\u044f \u043a\u0440\u0430\u0441\u0438\u0432\u043e. \u0412 \u0440\u0430\u0441\u043f\u043e\u0440\u044f\u0436\u0435\u043d\u0438\u0438 \u0443 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u0438\u043c\u0435\u0435\u0442\u0441\u044f \u0442\u0440\u0438 \u0441\u043f\u043e\u0441\u043e\u0431\u0430  \u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0438 \u0442\u0435\u043a\u0441\u0442\u0430: HTML, Markdown \u0438 MarkdownV2. \u041d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u044b\u043c\u0438 \u0438\u0437 \u043d\u0438\u0445 \u0441\u0447\u0438\u0442\u0430\u044e\u0442\u0441\u044f HTML \u0438 MarkdownV2, \u00ab\u043a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0439\u00bb  Markdown \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043c\u0435\u043d\u044c\u0448\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 \u0438 \u0431\u043e\u043b\u0435\u0435 \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 aiogram.</p> <p>\u041f\u0440\u0435\u0436\u0434\u0435, \u0447\u0435\u043c \u043c\u044b \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u044b \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0442\u0435\u043a\u0441\u0442\u043e\u043c \u0432 aiogram, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0443\u043f\u043e\u043c\u044f\u043d\u0443\u0442\u044c  \u0432\u0430\u0436\u043d\u043e\u0435 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 aiogram 3.x \u043e\u0442 2.x: \u0432 \u00ab\u0434\u0432\u043e\u0439\u043a\u0435\u00bb \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043b\u0438\u0441\u044c \u0442\u043e\u043b\u044c\u043a\u043e  \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0430 \u0432 \u00ab\u0442\u0440\u043e\u0439\u043a\u0435\u00bb \u2014 \u043b\u044e\u0431\u043e\u0433\u043e \u0442\u0438\u043f\u0430. \u0415\u0441\u043b\u0438 \u0442\u043e\u0447\u043d\u0435\u0435, \u0432\u043e\u0442 \u043a\u0430\u043a \u0442\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u0434\u043e  \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f:</p> <pre><code># \u0431\u044b\u043b\u043e (\u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u043e\u043c)\n@dp.message_handler()\nasync def func_name(...)\n\n# \u0431\u044b\u043b\u043e (\u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439-\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c)\ndp.register_message_handler(func_name)\n\n# \u0441\u0442\u0430\u043b\u043e (\u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u043e\u043c)\n@dp.message(content_types=types.ContentType.TEXT)\n# \u0438\u043b\u0438 \n@dp.message(content_types=\"text\")\nasync def func_name(...)\n\n# \u0441\u0442\u0430\u043b\u043e (\u0444\u0443\u043d\u043a\u0446\u0438\u0435\u0439-\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c)\ndp.message.register(func_name, content_types=types.ContentType.TEXT) # \u0438\u043b\u0438 \"text\"\n</code></pre>"},{"location":"messages/#formatting-options","title":"\u0424\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0432\u044b\u0432\u043e\u0434","text":"<p>\u0417\u0430 \u0432\u044b\u0431\u043e\u0440 \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 <code>parse_mode</code>, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: <pre><code>from aiogram import types\n\n# \u0415\u0441\u043b\u0438 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440 content_types, \n# \u0442\u043e \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0434\u0430\u0436\u0435 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443 \u0441 \u043f\u043e\u0434\u043f\u0438\u0441\u044c\u044e /test,\n# \u043d\u043e \u043f\u043e\u043a\u0430 \u043d\u0430\u043c \u044d\u0442\u043e \u043d\u0435 \u0432\u0430\u0436\u043d\u043e \u0438 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0435\u043c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\n@dp.message(commands=[\"test\"])\nasync def any_message(message: types.Message):\n    await message.answer(\"Hello, &lt;b&gt;world&lt;/b&gt;!\", parse_mode=\"HTML\")\n    await message.answer(\"Hello, *world*\\!\", parse_mode=\"MarkdownV2\")\n</code></pre></p> <p></p> <p>\u0415\u0441\u043b\u0438 \u0432 \u0431\u043e\u0442\u0435 \u043f\u043e\u0432\u0441\u0435\u043c\u0435\u0441\u0442\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d\u043d\u043e\u0435 \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u0442\u043e \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 <code>parse_mode</code> \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e  \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u043e. \u041a \u0441\u0447\u0430\u0441\u0442\u044c\u044e, \u0432 aiogram \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0439 \u0442\u0438\u043f \u043f\u0440\u044f\u043c\u043e \u0432 \u043e\u0431\u044a\u0435\u043a\u0442 Bot, \u0430 \u0435\u0441\u043b\u0438 \u0432 \u043a\u0430\u043a\u043e\u043c-\u0442\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435  \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u043e\u0439\u0442\u0438\u0441\u044c \u0431\u0435\u0437 \u044d\u0442\u0438\u0445 \u0432\u0430\u0448\u0438\u0445 \u0440\u0430\u0437\u043c\u0435\u0442\u043e\u043a, \u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0443\u043a\u0430\u0436\u0438\u0442\u0435 <code>parse_mode=None</code>:</p> <pre><code>bot = Bot(token=\"123:abcxyz\", parse_mode=\"HTML\")\n\n# \u0433\u0434\u0435-\u0442\u043e \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u0438...\nawait message.answer(\"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 &lt;u&gt;HTML-\u0440\u0430\u0437\u043c\u0435\u0442\u043a\u043e\u0439&lt;/u&gt;\")\nawait message.answer(\"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0431\u0435\u0437 &lt;s&gt;\u043a\u0430\u043a\u043e\u0439-\u043b\u0438\u0431\u043e \u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0438&lt;/s&gt;\", parse_mode=None)\n</code></pre> <p></p> <p>\u041d\u0435\u0440\u0435\u0434\u043a\u043e \u0431\u044b\u0432\u0430\u044e\u0442 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438, \u043a\u043e\u0433\u0434\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0431\u043e\u0442\u0430 \u0437\u0430\u0440\u0430\u043d\u0435\u0435 \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u0435\u043d  \u0438 \u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0438\u0441\u0445\u043e\u0434\u044f \u0438\u0437 \u043a\u0430\u043a\u0438\u0445-\u0442\u043e \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445: \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0435\u0433\u043e \u0432\u0432\u043e\u0434 \u0438 \u0442.\u0434.  \u041d\u0430\u043f\u0438\u0448\u0435\u043c \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/name</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u0432\u0435\u0447\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u0442\u0435\u043a\u0441\u0442\u043e\u043c,  \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <code>/name \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432</code>:</p> <pre><code>from aiogram.dispatcher.filters import CommandObject\n\n@dp.message(commands=[\"name\"])\nasync def cmd_name(message: types.Message, command: CommandObject):\n    if command.args:\n        await message.answer(f\"\u041f\u0440\u0438\u0432\u0435\u0442, &lt;b&gt;{command.args}&lt;/b&gt;\")\n    else:\n        await message.answer(\"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438 \u0441\u0432\u043e\u0451 \u0438\u043c\u044f \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b /name!\")\n</code></pre> <p>\u041f\u043e\u0447\u0435\u043c\u0443 \u043c\u044b \u043d\u0435 \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438\u0441\u044c \u043f\u0440\u043e\u0441\u0442\u043e <code>message.text</code>? \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0431\u043e\u0442 \u0431\u044b \u043e\u0442\u0432\u0435\u0442\u0438\u043b:  \"\u041f\u0440\u0438\u0432\u0435\u0442, /name \u0418\u0432\u0430\u043d \u0418\u0432\u0430\u043d\u043e\u0432\", \u0430 \u043d\u0430\u043c \u043d\u0443\u0436\u0435\u043d \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b. \u0415\u0441\u043b\u0438 \u0432\u044b  \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440 Command (\u0438\u043b\u0438 \u0435\u0433\u043e \u0430\u043b\u0438\u0430\u0441 commands, \u043a\u0430\u043a \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u0432\u044b\u0448\u0435),  \u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 <code>command</code> \u0441 \u0442\u0438\u043f\u043e\u043c <code>CommandObject</code>, \u0438 \u0434\u043e\u0441\u0442\u0430\u0442\u044c \u043e\u0442\u0442\u0443\u0434\u0430  \u0442\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 aiogram \u0443\u0436\u0435 \u0440\u0430\u0441\u043f\u0430\u0440\u0441\u0438\u043b \u0437\u0430 \u0432\u0430\u0441. \u0415\u0441\u043b\u0438 \u043f\u043e\u0441\u043b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e,  \u0442\u043e <code>command.args</code> \u0431\u0443\u0434\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>None</code>.</p> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c:</p> <p></p> <p>\u0418, \u0432\u0440\u043e\u0434\u0435 \u0431\u044b, \u0432\u0441\u0451 \u0445\u043e\u0440\u043e\u0448\u043e, \u043d\u043e \u0442\u0443\u0442 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u0445\u0438\u0442\u0440\u044b\u0439 \u044e\u0437\u0435\u0440 \u0438 \u043f\u0438\u0448\u0435\u0442 <code>/name &lt;\u0441\u043b\u0430\u0432\u0438\u043a777&gt;</code>. \u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435  \u0431\u043e\u0442 \u043d\u0435 \u043e\u0442\u0432\u0435\u0442\u0438\u0442, \u0430 \u0432 \u043a\u043e\u043d\u0441\u043e\u043b\u0438 \u043f\u043e\u044f\u0432\u0438\u0442\u0441\u044f \u043e\u0448\u0438\u0431\u043a\u0430: <code>aiogram.exceptions.TelegramBadRequest: Bad Request: can't parse entities: Unsupported start tag \"\u0441\u043b\u0430\u0432\u0438\u043a777\" at byte offset 17</code> </p> <p>\ud83d\ude31 \ud83d\ude31 \ud83d\ude31 \u0427\u0442\u043e \u0436\u0435 \u0434\u0435\u043b\u0430\u0442\u044c? \u041a \u0441\u0447\u0430\u0441\u0442\u044c\u044e, \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0440\u0435\u0448\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u043e\u0441\u0442\u043e: \u044d\u043a\u0440\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u043c. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e  \u0432 \u043c\u043e\u0434\u0443\u043b\u0435 html (\u0432 markdown \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e) \u0435\u0441\u0442\u044c \u043c\u0435\u0442\u043e\u0434 <code>quote()</code> \u0434\u043b\u044f \u044d\u043a\u0440\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435  \u043c\u0435\u0442\u043e\u0434\u044b \u0434\u043b\u044f \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f: <code>bold()</code>, <code>italic()</code>, <code>link()</code> \u0438 \u0442.\u0434. \u0418\u0441\u043f\u0440\u0430\u0432\u0438\u043c \u043a\u043e\u0434, \u0447\u0442\u043e\u0431\u044b \u0432\u0441\u0451 \u0437\u0430\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e:</p> <pre><code># \u043d\u043e\u0432\u044b\u0439 \u0438\u043c\u043f\u043e\u0440\u0442!\nfrom aiogram import html\n\n# \u0412 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 cmd_name\nawait message.answer(f\"\u041f\u0440\u0438\u0432\u0435\u0442, {html.bold(html.quote(command.args))}\", parse_mode=\"HTML\")\n</code></pre> <p></p> <p>\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0441\u043f\u043e\u0441\u043e\u0431\u0430\u0445 \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u0442\u0435\u0433\u0430\u0445 \u043c\u043e\u0436\u043d\u043e \u0443\u0437\u043d\u0430\u0442\u044c  \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 Bot API.</p>"},{"location":"messages/#keep-formatting","title":"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u043c, \u0447\u0442\u043e \u0431\u043e\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u043e\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0443\u0434\u0430 \u0447\u0442\u043e-\u0442\u043e  \u0441\u0432\u043e\u0451, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043e\u0442\u043c\u0435\u0442\u043a\u0443 \u0432\u0440\u0435\u043c\u0435\u043d\u0438. \u041d\u0430\u043f\u0438\u0448\u0435\u043c \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043a\u043e\u0434:</p> <pre><code># \u043d\u043e\u0432\u044b\u0439 \u0438\u043c\u043f\u043e\u0440\u0442!\nfrom datetime import datetime\n\n@dp.message(content_types=\"text\")\nasync def echo_with_time(message: types.Message):\n    # \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0442\u0435\u043a\u0443\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0432 \u0447\u0430\u0441\u043e\u0432\u043e\u043c \u043f\u043e\u044f\u0441\u0435 \u041f\u041a\n    time_now = datetime.now().strftime('%H:%M')\n    # \u0421\u043e\u0437\u0434\u0430\u0451\u043c \u043f\u043e\u0434\u0447\u0451\u0440\u043a\u043d\u0443\u0442\u044b\u0439 \u0442\u0435\u043a\u0441\u0442\n    added_text = html.underline(f\"\u0421\u043e\u0437\u0434\u0430\u043d\u043e \u0432 {time_now}\")\n    # \u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u043d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u043c \u0442\u0435\u043a\u0441\u0442\u043e\u043c\n    await message.answer(f\"{message.text}\\n\\n{added_text}\", parse_mode=\"HTML\")\n</code></pre> <p></p> <p>\u041c\u0434\u0430, \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u0447\u0435\u043c\u0443 \u0441\u0431\u0438\u043b\u043e\u0441\u044c \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f?  \u042d\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0438\u0437-\u0437\u0430 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e <code>message.text</code> \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043f\u0440\u043e\u0441\u0442\u043e \u0442\u0435\u043a\u0441\u0442, \u0431\u0435\u0437 \u043a\u0430\u043a\u0438\u0445-\u043b\u0438\u0431\u043e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0439.  \u0427\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0435\u043a\u0441\u0442 \u0432 \u043d\u0443\u0436\u043d\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438, \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u0441\u044f \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u044b\u043c\u0438 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430\u043c\u0438:  <code>message.html_text</code> \u0438\u043b\u0438 <code>message.md_text</code>. \u0421\u0435\u0439\u0447\u0430\u0441 \u043d\u0430\u043c \u043d\u0443\u0436\u0435\u043d \u043f\u0435\u0440\u0432\u044b\u0439 \u0432\u0430\u0440\u0438\u0430\u043d\u0442. \u0417\u0430\u043c\u0435\u043d\u044f\u0435\u043c \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435  \u0432\u044b\u0448\u0435 <code>message.text</code> \u043d\u0430 <code>message.html_text</code> \u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442:</p> <p></p>"},{"location":"messages/#message-entities","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 entities","text":"<p>Telegram, \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435, \u043e\u0447\u0435\u043d\u044c \u043c\u043d\u043e\u0433\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0434\u0435\u043b\u0430\u0435\u0442 \u0432\u043c\u0435\u0441\u0442\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0441\u0438\u043b\u044c\u043d\u043e \u0443\u043f\u0440\u043e\u0449\u0430\u044f \u0436\u0438\u0437\u043d\u044c.  \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0438, \u0442\u0438\u043f\u0430 e-mail, \u043d\u043e\u043c\u0435\u0440\u0430 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430, \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0430 \u0438 \u0434\u0440. \u043c\u043e\u0436\u043d\u043e \u043d\u0435 \u0434\u043e\u0441\u0442\u0430\u0432\u0430\u0442\u044c  \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u044b\u043c\u0438 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438, \u0430 \u0438\u0437\u0432\u043b\u0435\u0447\u044c  \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0438\u0437 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 Message \u0438 \u043f\u043e\u043b\u044f  <code>entities</code>, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0435\u0433\u043e \u043c\u0430\u0441\u0441\u0438\u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u0442\u0438\u043f\u0430  MessageEntity. \u0412 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u043d\u0430\u043f\u0438\u0448\u0435\u043c  \u0445\u044d\u043d\u0434\u043b\u0435\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0438\u0437\u0432\u043b\u0435\u043a\u0430\u0435\u0442 \u0441\u0441\u044b\u043b\u043a\u0443, e-mail \u0438 \u043c\u043e\u043d\u043e\u0448\u0438\u0440\u0438\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u0438\u0437 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f (\u043f\u043e \u043e\u0434\u043d\u043e\u0439 \u0448\u0442\u0443\u043a\u0435). \u0417\u0434\u0435\u0441\u044c \u043a\u0440\u043e\u0435\u0442\u0441\u044f \u0432\u0430\u0436\u043d\u044b\u0439 \u043f\u043e\u0434\u0432\u043e\u0445. Telegram \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u043d\u0435 \u0441\u0430\u043c\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0430 \u0438\u0445 \u043d\u0430\u0447\u0430\u043b\u043e \u0432 \u0442\u0435\u043a\u0441\u0442\u0435 \u0438 \u0434\u043b\u0438\u043d\u0443.  \u0411\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e, \u0442\u0435\u043a\u0441\u0442 \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0432 \u0441\u0438\u043c\u0432\u043e\u043b\u0430\u0445 UTF-8, \u0430 entities \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0441 UTF-16, \u0438\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e, \u0435\u0441\u043b\u0438 \u043f\u0440\u043e\u0441\u0442\u043e \u0432\u0437\u044f\u0442\u044c  \u043f\u043e\u0437\u0438\u0446\u0438\u044e \u0438 \u0434\u043b\u0438\u043d\u0443, \u0442\u043e \u043f\u0440\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0438 UTF-16 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u044d\u043c\u043e\u0434\u0437\u0438) \u0432\u0430\u0448 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u043f\u0440\u043e\u0441\u0442\u043e \u0441\u044a\u0435\u0434\u0435\u0442. </p> <p>\u041b\u0443\u0447\u0448\u0435 \u0432\u0441\u0435\u0433\u043e \u044d\u0442\u043e \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442 \u043f\u0440\u0438\u043c\u0435\u0440 \u043d\u0438\u0436\u0435. \u041d\u0430 \u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u0439 \u043e\u0442\u0432\u0435\u0442 \u0431\u043e\u0442\u0430 \u0435\u0441\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u00ab\u0432 \u043b\u043e\u0431\u00bb,  \u0430 \u0432\u0442\u043e\u0440\u043e\u0439 \u2014 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0430\u0438\u043e\u0433\u0440\u0430\u043c\u043d\u043e\u0433\u043e \u043c\u0435\u0442\u043e\u0434\u0430 <code>extract()</code> \u043d\u0430\u0434 entity. \u041d\u0430 \u0432\u0445\u043e\u0434 \u0435\u043c\u0443 \u043f\u0435\u0440\u0435\u0434\u0430\u0451\u0442\u0441\u044f \u0432\u0435\u0441\u044c \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442:</p> <pre><code>@dp.message(content_types=\"text\")\nasync def extract_data(message: types.Message):\n    data = {\n        \"url\": \"&lt;N/A&gt;\",\n        \"email\": \"&lt;N/A&gt;\",\n        \"code\": \"&lt;N/A&gt;\"\n    }\n    entities = message.entities or []\n    for item in entities:\n        if item.type in data.keys():\n            # \u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\n            # data[item.type] = message.text[item.offset : item.offset+item.length]\n            # \u041f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\n            data[item.type] = item.extract(message.text)\n    await message.reply(\n        \"\u0412\u043e\u0442 \u0447\u0442\u043e \u044f \u043d\u0430\u0448\u0451\u043b:\\n\"\n        f\"URL: {html.quote(data['url'])}\\n\"\n        f\"E-mail: {html.quote(data['email'])}\\n\"\n        f\"\u041f\u0430\u0440\u043e\u043b\u044c: {html.quote(data['code'])}\"\n    )\n</code></pre> <p></p>"},{"location":"messages/#media","title":"\u041c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u044b","text":"<p>\u041f\u043e\u043c\u0438\u043c\u043e \u043e\u0431\u044b\u0447\u043d\u044b\u0445 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 Telegram \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043e\u0431\u043c\u0435\u043d\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u0430\u043c\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432: \u0444\u043e\u0442\u043e, \u0432\u0438\u0434\u0435\u043e, \u0433\u0438\u0444\u043a\u0438,  \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u0438, \u0441\u0442\u0438\u043a\u0435\u0440\u044b \u0438 \u0442.\u0434. \u0423 \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0430 \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u043e\u0432 \u0435\u0441\u0442\u044c \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 <code>file_id</code> \u0438 <code>file_unique_id</code>. \u041f\u0435\u0440\u0432\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c  \u0434\u043b\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0439 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0438 \u0442\u043e\u0433\u043e \u0436\u0435 \u0444\u0430\u0439\u043b\u0430 \u043c\u043d\u043e\u0433\u043e \u0440\u0430\u0437, \u043f\u0440\u0438\u0447\u0451\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0431\u0443\u0434\u0435\u0442 \u043c\u0433\u043d\u043e\u0432\u0435\u043d\u043d\u043e\u0439, \u0442.\u043a. \u0441\u0430\u043c \u0444\u0430\u0439\u043b \u0443\u0436\u0435 \u043b\u0435\u0436\u0438\u0442  \u043d\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430\u0445 Telegram. \u042d\u0442\u043e \u0441\u0430\u043c\u044b\u0439 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0441\u043f\u043e\u0441\u043e\u0431. \u041a \u043f\u0440\u0438\u043c\u0435\u0440\u0443, \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u043a\u043e\u0434 \u0437\u0430\u0441\u0442\u0430\u0432\u0438\u0442 \u0431\u043e\u0442\u0430 \u043c\u043e\u043c\u0435\u043d\u0442\u0430\u043b\u044c\u043d\u043e \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u0442\u043e\u0439 \u0436\u0435 \u0433\u0438\u0444\u043a\u043e\u0439, \u0447\u0442\u043e \u0431\u044b\u043b\u0430 \u043f\u0440\u0438\u0441\u043b\u0430\u043d\u0430: </p> <pre><code>@dp.message(content_types=[types.ContentType.ANIMATION])\nasync def echo_gif(message: types.Message):\n    await message.reply_animation(message.animation.file_id)\n</code></pre> <p>\u0412\u0441\u0435\u0433\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0435 file_id!</p> <p>\u0411\u043e\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0435 <code>file_id</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0441\u0430\u043c,  \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u043b\u0438\u0447\u043a\u0435 \u043e\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u00ab\u0443\u0432\u0438\u0434\u0435\u0432\u00bb \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b \u0432 \u0433\u0440\u0443\u043f\u043f\u0435/\u043a\u0430\u043d\u0430\u043b\u0435. \u041f\u0440\u0438 \u044d\u0442\u043e\u043c,  \u0435\u0441\u043b\u0438 \u043f\u043e\u043f\u044b\u0442\u0430\u0442\u044c\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>file_id</code> \u043e\u0442 \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0431\u043e\u0442\u0430, \u0442\u043e \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c, \u043d\u043e  \u0447\u0435\u0440\u0435\u0437 \u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u043e\u0448\u0438\u0431\u043a\u0443 wrong url/file_id specified. \u041f\u043e\u044d\u0442\u043e\u043c\u0443 \u2014  \u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0432\u043e\u0438 <code>file_id</code>!</p> <p>\u0412 \u043e\u0442\u043b\u0438\u0447\u0438\u0435 \u043e\u0442 <code>file_id</code>, \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 <code>file_unique_id</code> \u043d\u0435\u043b\u044c\u0437\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0439 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438  \u0438\u043b\u0438 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u0430, \u043d\u043e \u0437\u0430\u0442\u043e \u043e\u043d \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0439 \u0443 \u0432\u0441\u0435\u0445 \u0431\u043e\u0442\u043e\u0432 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043c\u0435\u0434\u0438\u0430.  \u041d\u0443\u0436\u0435\u043d <code>file_unique_id</code> \u043e\u0431\u044b\u0447\u043d\u043e \u0442\u043e\u0433\u0434\u0430, \u043a\u043e\u0433\u0434\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c \u0431\u043e\u0442\u0430\u043c \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u0437\u043d\u0430\u0442\u044c, \u0447\u0442\u043e \u0438\u0445 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 <code>file_id</code> \u043e\u0434\u043d\u043e\u0441\u044f\u0442\u0441\u044f  \u043a \u043e\u0434\u043d\u043e\u043c\u0443 \u0438 \u0442\u043e\u043c\u0443 \u0436\u0435 \u0444\u0430\u0439\u043b\u0443.</p> <p>\u041f\u043e\u043c\u0438\u043c\u043e \u043f\u0435\u0440\u0435\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438, \u0431\u043e\u0442 \u043c\u043e\u0436\u0435\u0442 \u0441\u043a\u0430\u0447\u0430\u0442\u044c \u043c\u0435\u0434\u0438\u0430 \u043a \u0441\u0435\u0431\u0435 \u043d\u0430 \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440/\u0441\u0435\u0440\u0432\u0435\u0440. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0443 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0442\u0438\u043f\u0430 <code>Bot</code>  \u0435\u0441\u0442\u044c \u043c\u0435\u0442\u043e\u0434 <code>download()</code>. \u0412 \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u0445 \u043d\u0438\u0436\u0435 \u0444\u0430\u0439\u043b\u044b \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0441\u0440\u0430\u0437\u0443 \u0432 \u0444\u0430\u0439\u043b\u043e\u0432\u0443\u044e \u0441\u0438\u0441\u0442\u0435\u043c\u0443, \u043d\u043e \u043d\u0438\u043a\u0442\u043e \u043d\u0435 \u043c\u0435\u0448\u0430\u0435\u0442  \u0432\u043c\u0435\u0441\u0442\u043e \u044d\u0442\u043e\u0433\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 \u043e\u0431\u044a\u0435\u043a\u0442 BytesIO \u0432 \u043f\u0430\u043c\u044f\u0442\u0438, \u0447\u0442\u043e\u0431\u044b \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0432 \u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u0430\u043b\u044c\u0448\u0435  (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, pillow). </p> <pre><code>@dp.message(content_types=\"photo\")\nasync def download_photo(message: types.Message, bot: Bot):\n    await bot.download(\n        message.photo[-1],\n        destination=f\"/tmp/{message.photo[-1].file_id}.jpg\"\n    )\n\n\n@dp.message(content_types=types.ContentType.STICKER)\nasync def download_sticker(message: types.Message, bot: Bot):\n    await bot.download(\n        message.sticker,\n        destination=f\"/tmp/{message.sticker.file_id}.webp\"\n    )\n</code></pre> <p>\u0412 \u0441\u043b\u0443\u0447\u0430\u0435 \u0441 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438 \u043c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043b\u0438 \u043d\u0435 <code>message.photo</code>, \u0430 <code>message.photo[-1]</code>, \u043f\u043e\u0447\u0435\u043c\u0443?  \u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u0432 Telegram \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438 \u043f\u0440\u0438\u0445\u043e\u0434\u044f\u0442 \u0441\u0440\u0430\u0437\u0443 \u0432 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430\u0445; \u044d\u0442\u043e \u043e\u0434\u043d\u043e \u0438 \u0442\u043e \u0436\u0435  \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441 \u0440\u0430\u0437\u043d\u044b\u043c \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c. \u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u0435\u0441\u043b\u0438 \u043c\u044b \u0431\u0435\u0440\u0451\u043c \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0439 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 (\u0438\u043d\u0434\u0435\u043a\u0441 -1),  \u0442\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u0441 \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u043c \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c \u0444\u043e\u0442\u043e.</p> <p>\u0421\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435 \u0431\u043e\u043b\u044c\u0448\u0438\u0445 \u0444\u0430\u0439\u043b\u043e\u0432</p> <p>\u0411\u043e\u0442\u044b, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0449\u0438\u0435 Telegram Bot API, \u043c\u043e\u0433\u0443\u0442 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u0442\u044c \u0444\u0430\u0439\u043b\u044b \u0440\u0430\u0437\u043c\u0435\u0440\u043e\u043c \u043d\u0435 \u0431\u043e\u043b\u0435\u0435 20 \u043c\u0435\u0433\u0430\u0431\u0430\u0439\u0442.  \u0415\u0441\u043b\u0438 \u0432\u044b \u043f\u043b\u0430\u043d\u0438\u0440\u0443\u0435\u0442\u0435 \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u0442\u044c/\u0437\u0430\u043b\u0438\u0432\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0438\u0435 \u0444\u0430\u0439\u043b\u044b, \u043b\u0443\u0447\u0448\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438, \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0441  Telegram Client API, \u0430 \u043d\u0435 \u0441 Telegram Bot API, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, Telethon.  \u041d\u0435\u043c\u043d\u043e\u0433\u0438\u0435 \u0437\u043d\u0430\u044e\u0442, \u043d\u043e Client API \u043c\u043e\u0433\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u044b\u0447\u043d\u044b\u0435 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u044b, \u043d\u043e \u0435\u0449\u0451 \u0438  \u0431\u043e\u0442\u044b.</p> <p>\u0410 \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 Bot API \u0432\u0435\u0440\u0441\u0438\u0438 5.0, \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c  \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0435\u0440 Bot API \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441  \u0431\u043e\u043b\u044c\u0448\u0438\u043c\u0438 \u0444\u0430\u0439\u043b\u0430\u043c\u0438.</p>"},{"location":"messages/#service","title":"\u0421\u0435\u0440\u0432\u0438\u0441\u043d\u044b\u0435 (\u0441\u043b\u0443\u0436\u0435\u0431\u043d\u044b\u0435) \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f","text":"<p>\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 Telegram \u0434\u0435\u043b\u044f\u0442\u0441\u044f \u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0435, \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u044b \u0438 \u0441\u043b\u0443\u0436\u0435\u0431\u043d\u044b\u0435 (\u043e\u043d\u0438 \u0436\u0435 \u2014 \u0441\u0435\u0440\u0432\u0438\u0441\u043d\u044b\u0435).  \u041d\u0430\u0441\u0442\u0430\u043b\u043e \u0432\u0440\u0435\u043c\u044f \u043f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u0442\u044c \u043e \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0445.</p> <p></p> <p>\u041d\u0435\u0441\u043c\u043e\u0442\u0440\u044f \u043d\u0430 \u0442\u043e, \u0447\u0442\u043e \u043e\u043d\u0438 \u0432\u044b\u0433\u043b\u044f\u0434\u044f\u0442 \u043d\u0435\u043e\u0431\u044b\u0447\u043d\u043e \u0438 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441 \u043d\u0438\u043c\u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043e, \u044d\u0442\u043e \u0432\u0441\u0451 \u0435\u0449\u0451  \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0443 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0435\u0441\u0442\u044c \u0441\u0432\u043e\u0438 \u0430\u0439\u0434\u0438\u0448\u043d\u0438\u043a\u0438 \u0438 \u0434\u0430\u0436\u0435 \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446. \u0421\u0442\u043e\u0438\u0442 \u043e\u0442\u043c\u0435\u0442\u0438\u0442\u044c, \u0447\u0442\u043e \u0441\u043f\u0435\u043a\u0442\u0440 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u044f  \u0441\u0435\u0440\u0432\u0438\u0441\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0441 \u0433\u043e\u0434\u0430\u043c\u0438 \u043c\u0435\u043d\u044f\u043b\u0441\u044f \u0438 \u0441\u0435\u0439\u0447\u0430\u0441, \u0441\u043a\u043e\u0440\u0435\u0435 \u0432\u0441\u0435\u0433\u043e, \u0432\u0430\u0448 \u0431\u043e\u0442 \u0441 \u043d\u0438\u043c\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0435 \u0431\u0443\u0434\u0435\u0442,  \u043b\u0438\u0431\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0443\u0434\u0430\u043b\u044f\u0442\u044c.</p> <p>\u041d\u0435 \u0431\u0443\u0434\u0435\u043c \u0441\u0438\u043b\u044c\u043d\u043e \u0443\u0433\u043b\u0443\u0431\u043b\u044f\u0442\u044c\u0441\u044f \u0432 \u0434\u0435\u0442\u0430\u043b\u0438 \u0438 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043e\u0434\u0438\u043d \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440: \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430  \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432\u043e\u0448\u0435\u0434\u0448\u0435\u043c\u0443 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0443. \u0423 \u0442\u0430\u043a\u043e\u0433\u043e \u0441\u043b\u0443\u0436\u0435\u0431\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0435\u0442 content_type  \u0440\u0430\u0432\u043d\u044b\u0439 \"new_chat_members\", \u043d\u043e \u0432\u043e\u043e\u0431\u0449\u0435 \u044d\u0442\u043e \u043e\u0431\u044a\u0435\u043a\u0442 Message, \u0443 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e\u0438\u043c\u0451\u043d\u043d\u043e\u0435 \u043f\u043e\u043b\u0435. </p> <pre><code>@dp.message(content_types=types.ContentType.NEW_CHAT_MEMBERS)\nasync def somebody_added(message: types.Message):\n    for user in message.new_chat_members:\n        # \u043f\u0440\u043e\u043f\u0435\u0440\u0442\u0438 full_name \u0431\u0435\u0440\u0451\u0442 \u0441\u0440\u0430\u0437\u0443 \u0438\u043c\u044f \u0418 \u0444\u0430\u043c\u0438\u043b\u0438\u044e \n        # (\u043d\u0430 \u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442\u0435 \u0432\u044b\u0448\u0435 \u0443 \u044e\u0437\u0435\u0440\u043e\u0432 \u043d\u0435\u0442 \u0444\u0430\u043c\u0438\u043b\u0438\u0438)\n        await message.reply(f\"\u041f\u0440\u0438\u0432\u0435\u0442, {user.full_name}\")\n</code></pre> <p></p> <p>\u0412\u0430\u0436\u043d\u043e \u043f\u043e\u043c\u043d\u0438\u0442\u044c, \u0447\u0442\u043e <code>message.new_chat_members</code> \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0441\u043f\u0438\u0441\u043a\u043e\u043c, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043e\u0434\u0438\u043d \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043c\u043e\u0436\u0435\u0442  \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0440\u0430\u0437\u0443 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432. \u0422\u0430\u043a\u0436\u0435 \u043d\u0435 \u043d\u0430\u0434\u043e \u043f\u0443\u0442\u0430\u0442\u044c \u043f\u043e\u043b\u044f <code>message.from_user</code> \u0438  <code>message.new_chat_members</code>. \u041f\u0435\u0440\u0432\u043e\u0435 \u2014 \u044d\u0442\u043e \u0441\u0443\u0431\u044a\u0435\u043a\u0442, \u0442.\u0435. \u0442\u043e\u0442, \u043a\u0442\u043e \u0441\u043e\u0432\u0435\u0440\u0448\u0438\u043b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435. \u0412\u0442\u043e\u0440\u043e\u0435 \u2014  \u044d\u0442\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f. \u0422.\u0435. \u0435\u0441\u043b\u0438 \u0432\u044b \u0432\u0438\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432\u0438\u0434\u0430 \u00ab\u0410\u043d\u043d\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u0430 \u0438 \u0412\u0438\u043a\u0442\u043e\u0440\u0430\u00bb, \u0442\u043e  <code>message.from_user</code> \u2014 \u044d\u0442\u043e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e\u0431 \u0410\u043d\u043d\u0435, \u0430 \u0441\u043f\u0438\u0441\u043e\u043a <code>message.new_chat_members</code> \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442  \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0411\u043e\u0440\u0438\u0441\u0435 \u0441 \u0412\u0438\u043a\u0442\u043e\u0440\u043e\u043c.</p> <p>\u041d\u0435 \u0441\u0442\u043e\u0438\u0442 \u0446\u0435\u043b\u0438\u043a\u043e\u043c \u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0441\u0435\u0440\u0432\u0438\u0441\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f!</p> <p>\u0423 \u0441\u043b\u0443\u0436\u0435\u0431\u043d\u044b\u0445 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 (new_chat_members) \u0438 \u0432\u044b\u0445\u043e\u0434\u0435 (left_chat_member) \u0435\u0441\u0442\u044c \u043e\u0434\u043d\u0430 \u043d\u0435\u043f\u0440\u0438\u044f\u0442\u043d\u0430\u044f \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u044c: \u043e\u043d\u0438 \u043d\u0435\u043d\u0430\u0434\u0451\u0436\u043d\u044b, \u0442.\u0435. \u043e\u043d\u0438 \u043c\u043e\u0433\u0443\u0442 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u0432\u043e\u043e\u0431\u0449\u0435. \u041a \u043f\u0440\u0438\u043c\u0435\u0440\u0443, \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e new_chat_members \u043f\u0435\u0440\u0435\u0441\u0442\u0430\u0451\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u0440\u0438 ~10k \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435,  \u0430 left_chat_member \u0443\u0436\u0435 \u043f\u0440\u0438 50 (\u043d\u043e \u043f\u0440\u0438 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u044b \u044f \u0441\u0442\u043e\u043b\u043a\u043d\u0443\u043b\u0441\u044f \u0441 \u0442\u0435\u043c, \u0447\u0442\u043e \u0432 \u043e\u0434\u043d\u043e\u0439  \u0438\u0437 \u0433\u0440\u0443\u043f\u043f left_chat_member \u043d\u0435 \u043f\u043e\u044f\u0432\u0438\u043b\u0441\u044f \u0438 \u043f\u0440\u0438 9 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430\u0445. \u0410 \u0447\u0435\u0440\u0435\u0437 \u043f\u043e\u043b\u0447\u0430\u0441\u0430 \u0442\u0430\u043c \u0436\u0435 \u043f\u043e\u044f\u0432\u0438\u043b\u0441\u044f  \u043f\u0440\u0438 \u0432\u044b\u0445\u043e\u0434\u0435 \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430).</p> <p>\u0421 \u0432\u044b\u0445\u043e\u0434\u043e\u043c Bot API 5.0 \u0443 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u043f\u043e\u044f\u0432\u0438\u043b\u0441\u044f \u0433\u043e\u0440\u0430\u0437\u0434\u043e \u0431\u043e\u043b\u0435\u0435 \u043d\u0430\u0434\u0451\u0436\u043d\u044b\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0432\u0438\u0434\u0435\u0442\u044c \u0432\u0445\u043e\u0434\u044b/\u0432\u044b\u0445\u043e\u0434\u044b  \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445 \u043b\u044e\u0431\u043e\u0433\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0430, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0432 \u043a\u0430\u043d\u0430\u043b\u0430\u0445. \u041d\u043e \u043e\u0431 \u044d\u0442\u043e\u043c \u043f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u043c \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0440\u0430\u0437.</p>"},{"location":"messages/#bonus","title":"\u0411\u043e\u043d\u0443\u0441: \u043f\u0440\u044f\u0447\u0435\u043c \u0441\u0441\u044b\u043b\u043a\u0443 \u0432 \u0442\u0435\u043a\u0441\u0442\u0435","text":"<p>\u0411\u044b\u0432\u0430\u044e\u0442 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438, \u043a\u043e\u0433\u0434\u0430 \u0445\u043e\u0447\u0435\u0442\u0441\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0434\u043b\u0438\u043d\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u043e\u0439, \u043d\u043e \u043b\u0438\u043c\u0438\u0442 \u043d\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u0438 \u043a \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u0430\u043c \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442  \u0432\u0441\u0435\u0433\u043e 1024 \u0441\u0438\u043c\u0432\u043e\u043b\u0430 \u043f\u0440\u043e\u0442\u0438\u0432 4096 \u0443 \u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0433\u043e, \u0430 \u0432\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0432\u043d\u0438\u0437\u0443 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u043c\u0435\u0434\u0438\u0430 \u2014 \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043d\u0435\u043a\u0440\u0430\u0441\u0438\u0432\u043e. \u0411\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e,  \u043a\u043e\u0433\u0434\u0430 Telegram \u0434\u0435\u043b\u0430\u0435\u0442 \u043f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0441\u0441\u044b\u043b\u043e\u043a, \u043e\u043d \u0431\u0435\u0440\u0451\u0442 \u043f\u0435\u0440\u0432\u0443\u044e \u0438\u0437 \u043d\u0438\u0445 \u0438 \u0441\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u043c\u0435\u0442\u0430\u0442\u0435\u0433\u0438, \u0432 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043c\u043e\u0436\u0435\u0442  \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c\u0441\u044f \u043d\u0435 \u0441 \u0442\u0435\u043c \u043f\u0440\u0435\u0432\u044c\u044e, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0445\u043e\u0447\u0435\u0442\u0441\u044f \u0443\u0432\u0438\u0434\u0435\u0442\u044c. \u0414\u043b\u044f \u0440\u0435\u0448\u0435\u043d\u0438\u044f \u044d\u0442\u043e\u0439 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0435\u0449\u0451 \u043c\u043d\u043e\u0433\u043e \u043b\u0435\u0442 \u043d\u0430\u0437\u0430\u0434 \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u043b\u0438 \u043f\u043e\u0434\u0445\u043e\u0434 \u0441\u043e \u00ab\u0441\u043a\u0440\u044b\u0442\u044b\u043c\u0438 \u0441\u0441\u044b\u043b\u043a\u0430\u043c\u0438\u00bb \u0432 HTML-\u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0435. \u0421\u0443\u0442\u044c \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e  \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443 \u0432 \u043f\u0440\u043e\u0431\u0435\u043b \u043d\u0443\u043b\u0435\u0432\u043e\u0439 \u0448\u0438\u0440\u0438\u043d\u044b \u0438 \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c  \u0432\u0441\u044e \u044d\u0442\u0443 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044e \u0432 \u043d\u0430\u0447\u0430\u043b\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f. \u0414\u043b\u044f \u043d\u0430\u0431\u043b\u044e\u0434\u0430\u0442\u0435\u043b\u044f \u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438 \u043d\u0438\u043a\u0430\u043a\u0438\u0445 \u0441\u0441\u044b\u043b\u043e\u043a \u043d\u0435\u0442, \u0430 \u0441\u0435\u0440\u0432\u0435\u0440 Telegram \u0432\u0441\u0451 \u0432\u0438\u0434\u0438\u0442 \u0438 \u0447\u0435\u0441\u0442\u043d\u043e  \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440. \u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 aiogram \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u0430\u0436\u0435 \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 <code>hide_link()</code>: <pre><code># \u043d\u043e\u0432\u044b\u0439 \u0438\u043c\u043f\u043e\u0440\u0442!\nfrom aiogram.utils.markdown import hide_link\n\n@dp.message(commands=[\"hidden_link\"])\nasync def cmd_hidden_link(message: types.Message):\n    await message.answer(\n        f\"{hide_link('https://telegra.ph/file/562a512448876923e28c3.png')}\"\n        f\"\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f Telegram: *\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442*\\n\"\n        f\"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438: *\u043d\u0435 \u0447\u0438\u0442\u0430\u044e\u0442 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044e*\\n\"\n        f\"\u0413\u0440\u0443\u0448\u0430:\"\n    )\n</code></pre></p> <p></p> <p>\u041d\u0430 \u044d\u0442\u043e\u043c \u0432\u0441\u0451. \u0414\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0433\u043b\u0430\u0432! \u0421\u0442\u0430\u0432\u044c\u0442\u0435 \u043b\u0430\u0439\u043a\u0438, \u043f\u043e\u0434\u043f\u0438\u0441\u044b\u0432\u0430\u0439\u0442\u0435\u0441\u044c, \u043f\u0440\u043e\u0436\u0438\u043c\u0430\u0439\u0442\u0435 \u043a\u043e\u043b\u043e\u043a\u043e\u043b\u044c\u0447\u0438\u043a</p>"},{"location":"quickstart/","title":"\u0417\u043d\u0430\u043a\u043e\u043c\u0441\u0442\u0432\u043e \u0441 aiogram","text":"<p>\u041e \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u0435\u0440\u0441\u0438\u0439</p> <p>\u041a\u043e\u0434 \u0432 \u0433\u043b\u0430\u0432\u0430\u0445 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 aiogram 3.0 beta3. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438.</p> <p>\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u0435\u0442\u0430\u043b\u0438 \u0441\u043e\u0437\u043d\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u044b!</p> <p>\u0410\u0432\u0442\u043e\u0440 \u044d\u0442\u043e\u0439 \u043a\u043d\u0438\u0433\u0438 \u0443\u0431\u0435\u0436\u0434\u0451\u043d, \u0447\u0442\u043e \u043f\u043e\u043c\u0438\u043c\u043e \u0442\u0435\u043e\u0440\u0438\u0438 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0438 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0430. \u0427\u0442\u043e\u0431\u044b \u043c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e \u0443\u043f\u0440\u043e\u0441\u0442\u0438\u0442\u044c \u043f\u043e\u0432\u0442\u043e\u0440\u0435\u043d\u0438\u0435  \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u043d\u043d\u043e\u0433\u043e \u0434\u0430\u043b\u0435\u0435 \u043a\u043e\u0434\u0430, \u043f\u0440\u0438\u0448\u043b\u043e\u0441\u044c \u043f\u043e\u0439\u0442\u0438 \u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u043e\u0432, \u043f\u0440\u0438\u0433\u043e\u0434\u043d\u044b\u0445 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0439 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438  \u0438 \u043e\u0431\u0443\u0447\u0435\u043d\u0438\u044f.</p> <p>\u0422\u0430\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u043e \u0432\u0441\u0435\u0445 \u0438\u043b\u0438 \u043f\u043e\u0447\u0442\u0438 \u0432\u043e \u0432\u0441\u0435\u0445 \u0433\u043b\u0430\u0432\u0430\u0445 \u0442\u043e\u043a\u0435\u043d \u0431\u043e\u0442\u0430 \u0431\u0443\u0434\u0435\u0442 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u0440\u044f\u043c\u043e \u0432 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0442\u0435\u043a\u0441\u0442\u0430\u0445.  \u042d\u0442\u043e \u043f\u043b\u043e\u0445\u043e\u0439 \u043f\u043e\u0434\u0445\u043e\u0434, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0432\u0435\u0441\u0442\u0438 \u043a \u0440\u0430\u0441\u043a\u0440\u044b\u0442\u0438\u044e \u0442\u043e\u043a\u0435\u043d\u0430, \u0435\u0441\u043b\u0438 \u0432\u044b \u0437\u0430\u0431\u0443\u0434\u0435\u0442\u0435 \u0435\u0433\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0434 \u0437\u0430\u043b\u0438\u0432\u043a\u043e\u0439  \u043a\u043e\u0434\u0430 \u0432 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, GitHub).</p> <p>\u0418\u043b\u0438 \u0438\u043d\u043e\u0433\u0434\u0430 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449 \u0434\u0430\u043d\u043d\u044b\u0445 \u0431\u0443\u0434\u0443\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b, \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0432  \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u043f\u0430\u043c\u044f\u0442\u0438 (\u0441\u043b\u043e\u0432\u0430\u0440\u0438, \u0441\u043f\u0438\u0441\u043a\u0438...). \u0412 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0442\u0430\u043a\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u043d\u0435\u0436\u0435\u043b\u0430\u0442\u0435\u043b\u044c\u043d\u044b, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430  \u0431\u043e\u0442\u0430 \u043f\u0440\u0438\u0432\u0435\u0434\u0451\u0442 \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e\u0439 \u043f\u043e\u0442\u0435\u0440\u0435 \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p>\u0422\u0430\u043a\u0436\u0435 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u043e\u043c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432 \u043e\u0442 Telegram \u0432\u044b\u0431\u0440\u0430\u043d \u043f\u043e\u043b\u043b\u0438\u043d\u0433, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u043e\u043d \u0433\u0430\u0440\u0430\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442  \u0432 \u043f\u043e\u0434\u0430\u0432\u043b\u044f\u044e\u0449\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0435 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0439 \u0438 \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u0441\u0435\u043c \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c. </p> <p>\u0412\u0430\u0436\u043d\u043e \u043f\u043e\u043c\u043d\u0438\u0442\u044c, \u0447\u0442\u043e \u0430\u0432\u0442\u043e\u0440 \u0441\u0442\u0430\u0432\u0438\u0442 \u043f\u0435\u0440\u0435\u0434 \u0441\u043e\u0431\u043e\u0439 \u0446\u0435\u043b\u044c \u043e\u0431\u044a\u044f\u0441\u043d\u0438\u0442\u044c \u0438\u043c\u0435\u043d\u043d\u043e \u0440\u0430\u0431\u043e\u0442\u0443 \u0441 Telegram Bot API \u043f\u0440\u0438 \u043f\u043e\u043c\u043e\u0449\u0438  aiogram, \u0430 \u043d\u0435 \u0432\u043e\u043e\u0431\u0449\u0435 \u0432\u0435\u0441\u044c Computer Science \u0432\u043e \u0432\u0441\u0451\u043c \u0435\u0433\u043e \u043c\u043d\u043e\u0433\u043e\u043e\u0431\u0440\u0430\u0437\u0438\u0438.</p>"},{"location":"quickstart/#glossary","title":"\u0422\u0435\u0440\u043c\u0438\u043d\u043e\u043b\u043e\u0433\u0438\u044f","text":"<p>\u0427\u0442\u043e\u0431\u044b \u0440\u0430\u0437\u0433\u043e\u0432\u0430\u0440\u0438\u0432\u0430\u0442\u044c \u0432 \u043e\u0434\u043d\u0438\u0445 \u0438 \u0442\u0435\u0445 \u0436\u0435 \u043f\u043e\u043d\u044f\u0442\u0438\u044f\u0445, \u0432\u0432\u0435\u0434\u0451\u043c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0442\u0435\u0440\u043c\u0438\u043d\u044b, \u0434\u0430\u0431\u044b \u0432 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u043c \u043d\u0435 \u043f\u0443\u0442\u0430\u0442\u044c\u0441\u044f:</p> <ul> <li>\u041b\u0421 \u2014 \u043b\u0438\u0447\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435 \u0431\u043e\u0442\u0430 \u044d\u0442\u043e \u0434\u0438\u0430\u043b\u043e\u0433 \u043e\u0434\u0438\u043d-\u043d\u0430-\u043e\u0434\u0438\u043d \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c, \u0430 \u043d\u0435 \u0433\u0440\u0443\u043f\u043f\u0430/\u043a\u0430\u043d\u0430\u043b.</li> <li>\u0427\u0430\u0442 \u2014 \u043e\u0431\u0449\u0435\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043b\u044f \u041b\u0421, \u0433\u0440\u0443\u043f\u043f, \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f \u0438 \u043a\u0430\u043d\u0430\u043b\u043e\u0432.</li> <li>\u0410\u043f\u0434\u0435\u0439\u0442 \u2014 \u043b\u044e\u0431\u043e\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u0438\u0437 \u044d\u0442\u043e\u0433\u043e \u0441\u043f\u0438\u0441\u043a\u0430:  \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435, \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u043a\u043e\u043b\u0431\u044d\u043a, \u0438\u043d\u043b\u0430\u0439\u043d-\u0437\u0430\u043f\u0440\u043e\u0441, \u043f\u043b\u0430\u0442\u0451\u0436, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0431\u043e\u0442\u0430 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443 \u0438 \u0442.\u0434. </li> <li>\u0425\u044d\u043d\u0434\u043b\u0435\u0440 \u2014 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u043e\u0442 \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0430/\u0440\u043e\u0443\u0442\u0435\u0440\u0430 \u043e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0439 \u0430\u043f\u0434\u0435\u0439\u0442  \u0438 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0435\u0433\u043e.</li> <li>\u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 \u2014 \u043e\u0431\u044a\u0435\u043a\u0442, \u0437\u0430\u043d\u0438\u043c\u0430\u044e\u0449\u0438\u0439\u0441\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435\u043c \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432 \u043e\u0442 Telegram \u0441 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u0432\u044b\u0431\u043e\u0440\u043e\u043c \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430  \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043f\u0440\u0438\u043d\u044f\u0442\u043e\u0433\u043e \u0430\u043f\u0434\u0435\u0439\u0442\u0430.</li> <li>\u0420\u043e\u0443\u0442\u0435\u0440 \u2014 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u043e \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0443, \u043d\u043e \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0437\u0430 \u043f\u043e\u0434\u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0430 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432.  \u041c\u043e\u0436\u043d\u043e \u0441\u043a\u0430\u0437\u0430\u0442\u044c, \u0447\u0442\u043e \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 \u2014 \u044d\u0442\u043e \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u0439 \u0440\u043e\u0443\u0442\u0435\u0440.</li> <li>\u0424\u0438\u043b\u044c\u0442\u0440 \u2014 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 True \u0438\u043b\u0438 False \u0438 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0442\u043e, \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0437\u0432\u0430\u043d \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u0438\u043b\u0438 \u043d\u0435\u0442.</li> <li>\u041c\u0438\u0434\u043b\u0432\u0430\u0440\u044c \u2014 \u043f\u0440\u043e\u0441\u043b\u043e\u0439\u043a\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u043a\u043b\u0438\u043d\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432. </li> </ul>"},{"location":"quickstart/#installation","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430","text":"<p>\u0414\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043a\u0430\u0442\u0430\u043b\u043e\u0433 \u0434\u043b\u044f \u0431\u043e\u0442\u0430, \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0443\u0435\u043c \u0442\u0430\u043c virtual environment (\u0434\u0430\u043b\u0435\u0435 venv) \u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 aiogram. \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c, \u0447\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d Python \u0432\u0435\u0440\u0441\u0438\u0438 3.9 (\u0435\u0441\u043b\u0438 \u0432\u044b \u0437\u043d\u0430\u0435\u0442\u0435, \u0447\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d 3.9 \u0438 \u0432\u044b\u0448\u0435, \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u0440\u0430\u0437\u0434\u0435\u043b):</p> <pre><code>[groosha@main lesson_01]$ python3.9\nPython 3.9.9 (main, Jan 11 2022, 16:35:07) \n[GCC 11.1.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; exit()\n[groosha@main lesson_01]$ \n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0444\u0430\u0439\u043b <code>requirements.txt</code>, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0443\u043a\u0430\u0436\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u0443\u044e \u043d\u0430\u043c\u0438 \u0432\u0435\u0440\u0441\u0438\u044e aiogram. \u0422\u0430\u043a\u0436\u0435 \u043d\u0430\u043c \u043f\u043e\u043d\u0430\u0434\u043e\u0431\u0438\u0442\u0441\u044f  \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 python-dotenv \u0434\u043b\u044f \u0444\u0430\u0439\u043b\u043e\u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438.</p> <p>\u041e \u0432\u0435\u0440\u0441\u0438\u044f\u0445 aiogram</p> <p>\u0412 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f aiogram 3.x, \u043f\u0435\u0440\u0435\u0434 \u043d\u0430\u0447\u0430\u043b\u043e\u043c \u0440\u0430\u0431\u043e\u0442\u044b \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u0437\u0430\u0433\u043b\u044f\u043d\u0443\u0442\u044c \u0432  \u043a\u0430\u043d\u0430\u043b \u0440\u0435\u043b\u0438\u0437\u043e\u0432 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0431\u043e\u043b\u0435\u0435 \u043d\u043e\u0432\u043e\u0439 \u0432\u0435\u0440\u0441\u0438\u0438. \u041f\u043e\u0434\u043e\u0439\u0434\u0451\u0442 \u043b\u044e\u0431\u0430\u044f  \u0431\u043e\u043b\u0435\u0435 \u043d\u043e\u0432\u0430\u044f, \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0430\u044f\u0441\u044f \u0441 \u0446\u0438\u0444\u0440\u044b 3, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 aiogram 2.x \u0431\u043e\u043b\u0435\u0435 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0438 \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0443\u0441\u0442\u0430\u0440\u0435\u0432\u0448\u0438\u043c.</p> <pre><code>[groosha@main 01_quickstart]$ python3.9 -m venv venv\n[groosha@main 01_quickstart]$ echo \"aiogram==3.0.0b3\" &gt; requirements.txt\n[groosha@main 01_quickstart]$ echo \"python-dotenv==0.20.0\" &gt;&gt; requirements.txt\n[groosha@main 01_quickstart]$ source venv/bin/activate\n(venv) [groosha@main 01_quickstart]$ pip install -r requirements.txt \n# ...\u0437\u0434\u0435\u0441\u044c \u043a\u0443\u0447\u0430 \u0441\u0442\u0440\u043e\u043a \u043f\u0440\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0443...\nSuccessfully installed ...\u0442\u0443\u0442 \u0434\u043b\u0438\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a...\n[groosha@main 01_quickstart]$\n</code></pre> <p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 \u043f\u0440\u0435\u0444\u0438\u043a\u0441 \"venv\" \u0432 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b\u0435. \u041e\u043d \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442, \u0447\u0442\u043e \u043c\u044b \u043d\u0430\u0445\u043e\u0434\u0438\u043c\u0441\u044f \u0432 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u043e\u043c \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u0438 \u0441 \u0438\u043c\u0435\u043d\u0435\u043c \"venv\". \u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043c, \u0447\u0442\u043e \u0432\u043d\u0443\u0442\u0440\u0438 venv \u0432\u044b\u0437\u043e\u0432 \u043a\u043e\u043c\u0430\u043d\u0434\u044b <code>python</code> \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430 \u0432\u0441\u0451 \u0442\u043e\u0442 \u0436\u0435 Python 3.9: <pre><code>(venv) [groosha@main 01_quickstart]$ python\nPython 3.9.9 (main, Jan 11 2022, 16:35:07) \n[GCC 11.1.0] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; exit()\n(venv) [groosha@main 01_quickstart]$ deactivate \n[groosha@main 01_quickstart]$ \n</code></pre></p> <p>\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <code>deactivate</code> \u043c\u044b \u0432\u044b\u0448\u043b\u0438 \u0438\u0437 venv, \u0447\u0442\u043e\u0431\u044b \u043e\u043d \u043d\u0430\u043c \u043d\u0435 \u043c\u0435\u0448\u0430\u043b. </p>"},{"location":"quickstart/#hello-world","title":"\u041f\u0435\u0440\u0432\u044b\u0439 \u0431\u043e\u0442","text":"<p>\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0444\u0430\u0439\u043b <code>bot.py</code> \u0441 \u0431\u0430\u0437\u043e\u0432\u044b\u043c \u0448\u0430\u0431\u043b\u043e\u043d\u043e\u043c \u0431\u043e\u0442\u0430 \u043d\u0430 aiogram: bot.py<pre><code>import asyncio\nimport logging\nfrom aiogram import Bot, Dispatcher, types\n\n# \u0412\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0432\u0430\u0436\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f\nlogging.basicConfig(level=logging.INFO)\n# \u041e\u0431\u044a\u0435\u043a\u0442 \u0431\u043e\u0442\u0430\nbot = Bot(token=\"12345678:AaBbCcDdEeFfGgHh\")\n# \u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\ndp = Dispatcher()\n\n# \u0425\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 /start\n@dp.message(commands=[\"start\"])\nasync def cmd_start(message: types.Message):\n    await message.answer(\"Hello!\")\n\n# \u0417\u0430\u043f\u0443\u0441\u043a \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 \u043f\u043e\u043b\u043b\u0438\u043d\u0433\u0430 \u043d\u043e\u0432\u044b\u0445 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432\nasync def main():\n    await dp.start_polling(bot)\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre></p> <p>\u041f\u0435\u0440\u0432\u043e\u0435, \u043d\u0430 \u0447\u0442\u043e \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435: aiogram \u2014 \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0430\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0430\u0448\u0438 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b \u0442\u043e\u0436\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u043c\u0438,  \u0430 \u043f\u0435\u0440\u0435\u0434 \u0432\u044b\u0437\u043e\u0432\u0430\u043c\u0438 \u043c\u0435\u0442\u043e\u0434\u043e\u0432 API \u043d\u0443\u0436\u043d\u043e \u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e await, \u0442.\u043a. \u044d\u0442\u0438 \u0432\u044b\u0437\u043e\u0432\u044b \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u044e\u0442 \u043a\u043e\u0440\u0443\u0442\u0438\u043d\u044b.</p> <p>\u0410\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0435 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 Python</p> <p>\u041d\u0435 \u0441\u0442\u043e\u0438\u0442 \u043f\u0440\u0435\u043d\u0435\u0431\u0440\u0435\u0433\u0430\u0442\u044c \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0435\u0439! \u041f\u0440\u0435\u043a\u0440\u0430\u0441\u043d\u044b\u0439 \u0442\u0443\u0442\u043e\u0440\u0438\u0430\u043b \u043f\u043e asyncio \u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u043d\u0430 \u0441\u0430\u0439\u0442\u0435 Python.</p> <p>\u0415\u0441\u043b\u0438 \u0432\u044b \u0432 \u043f\u0440\u043e\u0448\u043b\u043e\u043c \u0440\u0430\u0431\u043e\u0442\u0430\u043b\u0438 \u0441 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u043e\u0439 \u0434\u043b\u044f Telegram, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, pyTelegramBotAPI, \u0442\u043e \u043a\u043e\u043d\u0446\u0435\u043f\u0446\u0438\u044f \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432 (\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u0441\u043e\u0431\u044b\u0442\u0438\u0439) \u0432\u0430\u043c \u0441\u0440\u0430\u0437\u0443 \u0441\u0442\u0430\u043d\u0435\u0442 \u043f\u043e\u043d\u044f\u0442\u043d\u0430, \u0440\u0430\u0437\u043d\u0438\u0446\u0430 \u043b\u0438\u0448\u044c \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u0432 aiogram \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u043c\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440. \u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438-\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438, \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u044f \u043f\u0435\u0440\u0435\u0447\u0435\u043d\u044c \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0449\u0438\u0445 \u0438\u0445 \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u0447\u0435\u0440\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u044b.  \u041f\u043e\u0441\u043b\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0433\u043e \u0430\u043f\u0434\u0435\u0439\u0442\u0430 (\u0441\u043e\u0431\u044b\u0442\u0438\u044f \u043e\u0442 Telegram), \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 \u0432\u044b\u0431\u0435\u0440\u0435\u0442 \u043d\u0443\u0436\u043d\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0443\u044e \u043f\u043e \u0432\u0441\u0435\u043c  \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u043c, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u00ab\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u044f\u0432\u043b\u044f\u044e\u0449\u0438\u0445\u0441\u044f \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u043c\u0438, \u0432 \u0447\u0430\u0442\u0435 \u0441 ID \u0438\u043a\u0441 \u0438 \u0441 \u0434\u043b\u0438\u043d\u043e\u0439 \u043f\u043e\u0434\u043f\u0438\u0441\u0438 \u0438\u0433\u0440\u0435\u043a\u00bb. \u0415\u0441\u043b\u0438 \u0434\u0432\u0435  \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0438\u043c\u0435\u044e\u0442 \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0435 \u043f\u043e \u043b\u043e\u0433\u0438\u043a\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0437\u0432\u0430\u043d\u0430 \u0442\u0430, \u0447\u0442\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0430 \u0440\u0430\u043d\u044c\u0448\u0435.</p> <p>\u0427\u0442\u043e\u0431\u044b \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u043a\u0430\u043a \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0434\u043d\u043e \u0438\u0437 \u0434\u0432\u0443\u0445 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439: 1. \u041d\u0430\u0432\u0435\u0441\u0438\u0442\u044c \u043d\u0430 \u043d\u0435\u0451 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440, \u043a\u0430\u043a \u0432 \u043f\u0440\u0438\u043c\u0435\u0440\u0435 \u0432\u044b\u0448\u0435.  \u0421 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c\u0438 \u0442\u0438\u043f\u0430\u043c\u0438 \u0434\u0435\u043a\u043e\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u043c\u044b \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u043c\u0441\u044f \u043f\u043e\u0437\u0434\u043d\u0435\u0435. 2. \u041d\u0430\u043f\u0440\u044f\u043c\u0443\u044e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043c\u0435\u0442\u043e\u0434 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0443 \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0430 \u0438\u043b\u0438 \u0440\u043e\u0443\u0442\u0435\u0440\u0430.</p> <p>\u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u043a\u043e\u0434:  <pre><code># \u0425\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 /test1\n@dp.message(commands=[\"test1\"])\nasync def cmd_test1(message: types.Message):\n    await message.reply(\"Test 1\")\n\n# \u0425\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 /test2\nasync def cmd_test2(message: types.Message):\n    await message.reply(\"Test 2\")\n</code></pre></p> <p>\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c \u0441 \u043d\u0438\u043c \u0431\u043e\u0442\u0430: </p> <p>\u0425\u044d\u043d\u0434\u043b\u0435\u0440 <code>cmd_test2</code> \u043d\u0435 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442, \u0442.\u043a. \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 \u043e \u043d\u0451\u043c \u043d\u0435 \u0437\u043d\u0430\u0435\u0442. \u0418\u0441\u043f\u0440\u0430\u0432\u0438\u043c \u044d\u0442\u0443 \u043e\u0448\u0438\u0431\u043a\u0443  \u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e: <pre><code># \u0425\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 /test2\nasync def cmd_test2(message: types.Message):\n    await message.reply(\"Test 2\")\n\n# \u0413\u0434\u0435-\u0442\u043e \u0432 \u0434\u0440\u0443\u0433\u043e\u043c \u043c\u0435\u0441\u0442\u0435, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 main():\ndp.message.register(cmd_test2, commands=[\"test2\"])\n</code></pre></p> <p>\u0421\u043d\u043e\u0432\u0430 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c \u0431\u043e\u0442\u0430: </p>"},{"location":"quickstart/#sugar","title":"\u0421\u0438\u043d\u0442\u0430\u043a\u0441\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u0430\u0445\u0430\u0440","text":"<p>\u0414\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043a\u043e\u0434 \u0447\u0438\u0449\u0435 \u0438 \u0447\u0438\u0442\u0430\u0431\u0435\u043b\u044c\u043d\u0435\u0435, aiogram \u0440\u0430\u0441\u0448\u0438\u0440\u044f\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0445 \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 Telegram. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432\u043c\u0435\u0441\u0442\u043e <code>bot.send_message(...)</code> \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c <code>message.answer(...)</code> \u0438\u043b\u0438 <code>message.reply(...)</code>. \u0412 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0445 \u0434\u0432\u0443\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 \u043d\u0435 \u043d\u0443\u0436\u043d\u043e \u043f\u043e\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c <code>chat_id</code>, \u043f\u043e\u0434\u0440\u0430\u0437\u0443\u043c\u0435\u0432\u0430\u0435\u0442\u0441\u044f, \u0447\u0442\u043e \u043e\u043d \u0442\u0430\u043a\u043e\u0439 \u0436\u0435, \u043a\u0430\u043a \u0438 \u0432 \u0438\u0441\u0445\u043e\u0434\u043d\u043e\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0438. \u0420\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 <code>answer</code> \u0438 <code>reply</code> \u043f\u0440\u043e\u0441\u0442\u0430\u044f: \u043f\u0435\u0440\u0432\u044b\u0439 \u043c\u0435\u0442\u043e\u0434 \u043f\u0440\u043e\u0441\u0442\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0432 \u0442\u043e\u0442 \u0436\u0435 \u0447\u0430\u0442, \u0432\u0442\u043e\u0440\u043e\u0439 \u0434\u0435\u043b\u0430\u0435\u0442 \"\u043e\u0442\u0432\u0435\u0442\" \u043d\u0430  \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0438\u0437 <code>message</code>: <pre><code>@dp.message(commands=[\"answer\"])\nasync def cmd_answer(message: types.Message):\n    await message.answer(\"\u042d\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043e\u0442\u0432\u0435\u0442\")\n\n\n@dp.message(commands=[\"reply\"])\nasync def cmd_reply(message: types.Message):\n    await message.reply('\u042d\u0442\u043e \u043e\u0442\u0432\u0435\u0442 \u0441 \"\u043e\u0442\u0432\u0435\u0442\u043e\u043c\"')\n</code></pre> </p> <p>\u0411\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e, \u0434\u043b\u044f \u0431\u043e\u043b\u044c\u0448\u0438\u043d\u0441\u0442\u0432\u0430 \u0442\u0438\u043f\u043e\u0432 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0435\u0441\u0442\u044c \u0432\u0441\u043f\u043e\u043c\u043e\u0433\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043c\u0435\u0442\u043e\u0434\u044b \u0432\u0438\u0434\u0430  \"answer_{type}\" \u0438\u043b\u0438 \"reply_{type}\", \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: <pre><code>@dp.message(commands=[\"dice\"])\nasync def cmd_dice(message: types.Message):\n    await message.answer_dice(emoji=\"\ud83c\udfb2\")\n</code></pre></p> <p>\u0447\u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442 'message: types.Message' ?</p> <p>Python \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0438\u043d\u0442\u0435\u0440\u043f\u0440\u0435\u0442\u0438\u0440\u0443\u0435\u043c\u044b\u043c \u044f\u0437\u044b\u043a\u043e\u043c \u0441 \u0441\u0438\u043b\u044c\u043d\u043e\u0439, \u043d\u043e \u0434\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u0442\u0438\u043f\u0438\u0437\u0430\u0446\u0438\u0435\u0439, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0442\u0438\u043f\u043e\u0432, \u043a\u0430\u043a, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0432 C++ \u0438\u043b\u0438 Java, \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442. \u041e\u0434\u043d\u0430\u043a\u043e \u043d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 \u0432\u0435\u0440\u0441\u0438\u0438 3.5  \u0432 \u044f\u0437\u044b\u043a\u0435 \u043f\u043e\u044f\u0432\u0438\u043b\u0430\u0441\u044c \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043e\u043a \u0442\u0438\u043f\u043e\u0432, \u0431\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u044f \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0447\u0435\u043a\u0435\u0440\u044b \u0438 IDE \u0432\u0440\u043e\u0434\u0435 PyCharm \u0430\u043d\u0430\u043b\u0438\u0437\u0438\u0440\u0443\u044e\u0442 \u0442\u0438\u043f\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0438 \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0441\u0442\u0443, \u0435\u0441\u043b\u0438 \u043e\u043d \u043f\u0435\u0440\u0435\u0434\u0430\u0451\u0442 \u0447\u0442\u043e-\u0442\u043e \u043d\u0435 \u0442\u043e. \u0412 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0430 <code>types.Message</code> \u0441\u043e\u043e\u043e\u0431\u0449\u0430\u0435\u0442 PyCharm-\u0443, \u0447\u0442\u043e \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f <code>message</code> \u0438\u043c\u0435\u0435\u0442 \u0442\u0438\u043f <code>Message</code>, \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0432 \u043c\u043e\u0434\u0443\u043b\u0435 <code>types</code> \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 aiogram (\u0441\u043c. \u0438\u043c\u043f\u043e\u0440\u0442\u044b \u0432 \u043d\u0430\u0447\u0430\u043b\u0435 \u043a\u043e\u0434\u0430). \u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u044f \u044d\u0442\u043e\u043c\u0443 IDE \u043c\u043e\u0436\u0435\u0442 \u043d\u0430 \u043b\u0435\u0442\u0443 \u043f\u043e\u0434\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0430\u0442\u0440\u0438\u0431\u0443\u0442\u044b \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p> <p>\u041f\u0440\u0438 \u0432\u044b\u0437\u043e\u0432\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b <code>/dice</code> \u0431\u043e\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442 \u0432 \u0442\u043e\u0442 \u0436\u0435 \u0447\u0430\u0442 \u0438\u0433\u0440\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u0443\u0431\u0438\u043a. \u0420\u0430\u0437\u0443\u043c\u0435\u0435\u0442\u0441\u044f, \u0435\u0441\u043b\u0438 \u0435\u0433\u043e \u043d\u0430\u0434\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439 \u0447\u0430\u0442, \u0442\u043e \u043f\u0440\u0438\u0434\u0451\u0442\u0441\u044f \u043f\u043e-\u0441\u0442\u0430\u0440\u0438\u043d\u043a\u0435 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c <code>await bot.send_dice(...)</code>. \u041d\u043e \u043e\u0431\u044a\u0435\u043a\u0442 <code>bot</code> (\u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043a\u043b\u0430\u0441\u0441\u0430 Bot) \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c  \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0432 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438. \u0412 aiogram 3.x \u043e\u0431\u044a\u0435\u043a\u0442 \u0431\u043e\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u043e\u043c\u0443 \u043f\u0440\u0438\u0448\u0451\u043b \u0430\u043f\u0434\u0435\u0439\u0442, \u043d\u0435\u044f\u0432\u043d\u043e  \u043f\u0440\u043e\u043a\u0438\u0434\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u0432 \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u0438 \u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0434\u043e\u0441\u0442\u0430\u0442\u044c \u043a\u0430\u043a \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442 <code>bot</code>. \u041f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0438\u043c, \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0435 <code>/dice</code>  \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u0443\u0431\u0438\u043a \u043d\u0435 \u0432 \u0442\u043e\u0442 \u0436\u0435 \u0447\u0430\u0442, \u0430 \u0432 \u043a\u0430\u043d\u0430\u043b \u0441 ID -100123456789. \u041f\u0435\u0440\u0435\u043f\u0438\u0448\u0435\u043c \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e:</p> <pre><code>@dp.message(commands=[\"dice\"])\nasync def cmd_dice(message: types.Message, bot: Bot):\n    await bot.send_dice(-100123456789, emoji=\"\ud83c\udfb2\")\n</code></pre>"},{"location":"quickstart/#pass-extras","title":"\u041f\u0435\u0440\u0435\u0434\u0430\u0447\u0430 \u0434\u043e\u043f. \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432","text":"<p>\u0418\u043d\u043e\u0433\u0434\u0430 \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u0431\u043e\u0442\u0430 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u043e\u0434\u043d\u043e \u0438\u043b\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439. \u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c  \u043e\u0431\u044a\u0435\u043a\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0441\u043f\u0438\u0441\u043e\u043a \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u0433\u0440\u0443\u043f\u043f\u044b, \u043e\u0442\u043c\u0435\u0442\u043a\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u0438 \u0447\u0442\u043e \u0443\u0433\u043e\u0434\u043d\u043e \u0435\u0449\u0451. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c  \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u0430\u043a \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u043d\u044b\u0435 (!) \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b \u0444\u0443\u043d\u043a\u0446\u0438\u0438 <code>start_polling(...)</code> (\u0434\u043b\u044f \u0432\u0435\u0431\u0445\u0443\u043a\u043e\u0432 \u0435\u0441\u0442\u044c \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u0439  \u0441\u043f\u043e\u0441\u043e\u0431). \u0412 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u0445 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u044d\u0442\u0438\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0445 \u043a\u0430\u043a \u0442\u0435 \u0436\u0435 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u044b. \u0411\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e, \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0442\u0430\u043a\u0438\u0445  \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 \u0432 \u043e\u0434\u043d\u0438\u0445 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u0445 \u0432\u043b\u0438\u044f\u044e\u0442 \u043d\u0430 \u0438\u0445 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0432 \u0434\u0440\u0443\u0433\u0438\u0445. \u0420\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430 \u043f\u0440\u0438\u043c\u0435\u0440\u0435:</p> <pre><code>@dp.message(commands=[\"add_to_list\"])\nasync def cmd_add_to_list(message: types.Message, mylist: list[int]):\n    mylist.append(7)\n    await message.answer(\"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0447\u0438\u0441\u043b\u043e 7\")\n\n\n@dp.message(commands=[\"show_list\"])\nasync def cmd_show_list(message: types.Message, mylist: list[int]):\n    await message.answer(f\"\u0412\u0430\u0448 \u0441\u043f\u0438\u0441\u043e\u043a: {mylist}\")\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043f\u0438\u0441\u043e\u043a <code>mylist</code> \u043c\u043e\u0436\u043d\u043e \u0447\u0438\u0442\u0430\u0442\u044c \u0438 \u043f\u0438\u0441\u0430\u0442\u044c \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u0445. \u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0430\u043a\u0436\u0435 \u0435\u0449\u0451 \u043e\u0434\u0438\u043d \u0432\u0430\u0440\u0438\u0430\u043d\u0442, \u0431\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439  \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f\u0445. \u0420\u0435\u0447\u044c, \u043a\u043e\u043d\u0435\u0447\u043d\u043e \u0436\u0435, \u043e \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u044f\u0445, \u043f\u0440\u043e \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f  \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0439 \u0433\u043b\u0430\u0432\u0435.</p> <p></p>"},{"location":"quickstart/#_1","title":"\u0424\u0430\u0439\u043b\u044b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<p>\u0427\u0442\u043e\u0431\u044b \u043d\u0435 \u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d \u043f\u0440\u044f\u043c\u043e \u0432 \u043a\u043e\u0434\u0435 (\u0432\u0434\u0440\u0443\u0433 \u0432\u044b \u0437\u0430\u0445\u043e\u0442\u0438\u0442\u0435 \u0437\u0430\u043b\u0438\u0442\u044c \u0441\u0432\u043e\u0435\u0433\u043e \u0431\u043e\u0442\u0430 \u0432 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0439?) \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u043d\u0435\u0441\u0442\u0438  \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b. \u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u0438 \u0430\u0434\u0435\u043a\u0432\u0430\u0442\u043d\u043e\u0435 \u043c\u043d\u0435\u043d\u0438\u0435,  \u0447\u0442\u043e \u0434\u043b\u044f \u043f\u0440\u043e\u0434\u0430 \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f, \u043e\u0434\u043d\u0430\u043a\u043e \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u044d\u0442\u043e\u0439 \u043a\u043d\u0438\u0433\u0438 \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0444\u0430\u0439\u043b\u0430\u043c\u0438 <code>.env</code>,  \u0447\u0442\u043e\u0431\u044b \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u0443\u043f\u0440\u043e\u0441\u0442\u0438\u0442\u044c \u0441\u0435\u0431\u0435 \u0436\u0438\u0437\u043d\u044c \u0438 \u0441\u044d\u043a\u043e\u043d\u043e\u043c\u0438\u0442\u044c \u0447\u0438\u0442\u0430\u0442\u0435\u043b\u044f\u043c \u0432\u0440\u0435\u043c\u044f \u043d\u0430 \u0440\u0430\u0437\u0432\u043e\u0440\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u0435 \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u043f\u0440\u043e\u0435\u043a\u0442\u0430.</p> <p>\u0418\u0442\u0430\u043a, \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0440\u044f\u0434\u043e\u043c \u0441 <code>bot.py</code> \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0444\u0430\u0439\u043b <code>config_reader.py</code> \u0441\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u044b\u043c</p> config_reader.py<pre><code>from pydantic import BaseSettings, SecretStr\n\n\nclass Settings(BaseSettings):\n    # \u0416\u0435\u043b\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0432\u043c\u0435\u0441\u0442\u043e str \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c SecretStr \n    # \u0434\u043b\u044f \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0442\u043e\u043a\u0435\u043d\u0430 \u0431\u043e\u0442\u0430\n    bot_token: SecretStr\n\n    # \u0412\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441 \u0441 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f\u043c\u0438 \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a\n    class Config:\n        # \u0418\u043c\u044f \u0444\u0430\u0439\u043b\u0430, \u043e\u0442\u043a\u0443\u0434\u0430 \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u044b \u0434\u0430\u043d\u043d\u044b\u0435 \n        # (\u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u0440\u0430\u0431\u043e\u0447\u0435\u0439 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438)\n        env_file = '.env'\n        # \u041a\u043e\u0434\u0438\u0440\u043e\u0432\u043a\u0430 \u0447\u0438\u0442\u0430\u0435\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430\n        env_file_encoding = 'utf-8'\n\n\n# \u041f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435 \u0444\u0430\u0439\u043b\u0430 \u0441\u0440\u0430\u0437\u0443 \u0441\u043e\u0437\u0434\u0430\u0441\u0442\u0441\u044f \n# \u0438 \u043f\u0440\u043e\u0432\u0430\u043b\u0438\u0434\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u043e\u0431\u044a\u0435\u043a\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0430, \n# \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043c\u043e\u0436\u043d\u043e \u0434\u0430\u043b\u0435\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438\u0437 \u0440\u0430\u0437\u043d\u044b\u0445 \u043c\u0435\u0441\u0442\nconfig = Settings()\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0435\u043c\u043d\u043e\u0433\u043e \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0443\u0435\u043c \u043d\u0430\u0448 <code>bot.py</code>:</p> bot.py<pre><code># \u0438\u043c\u043f\u043e\u0440\u0442\u044b\nfrom config_reader import config\n\n# \u0414\u043b\u044f \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0441 \u0442\u0438\u043f\u043e\u043c Secret* \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \n# \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c \u043c\u0435\u0442\u043e\u0434 get_secret_value(), \n# \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0432\u043c\u0435\u0441\u0442\u043e '*******'\nbot = Bot(token=config.bot_token.get_secret_value())\n</code></pre> <p>\u041d\u0430\u043a\u043e\u043d\u0435\u0446, \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0444\u0430\u0439\u043b <code>.env</code> (\u0441 \u0442\u043e\u0447\u043a\u043e\u0439 \u0432 \u043d\u0430\u0447\u0430\u043b\u0435), \u0433\u0434\u0435 \u043e\u043f\u0438\u0448\u0435\u043c \u0442\u043e\u043a\u0435\u043d \u0431\u043e\u0442\u0430:</p> .env<pre><code>BOT_TOKEN = 0000000000:AaBbCcDdEeFfGgHhIiJjKkLlMmNn\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u0432\u0441\u0451 \u0441\u0434\u0435\u043b\u0430\u043d\u043e \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e, \u0442\u043e \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 python-dotenv \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0435 \u0438\u0437 \u0444\u0430\u0439\u043b\u0430 <code>.env</code>, pydantic  \u0438\u0445 \u043f\u0440\u043e\u0432\u0430\u043b\u0438\u0434\u0438\u0440\u0443\u0435\u0442 \u0438 \u043e\u0431\u044a\u0435\u043a\u0442 \u0431\u043e\u0442\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0441\u0442\u0441\u044f \u0441 \u043d\u0443\u0436\u043d\u044b\u043c \u0442\u043e\u043a\u0435\u043d\u043e\u043c.</p> <p>\u041d\u0430 \u044d\u0442\u043e\u043c \u043c\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043c \u0437\u043d\u0430\u043a\u043e\u043c\u0441\u0442\u0432\u043e \u0441 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u043e\u0439, \u0430 \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0433\u043b\u0430\u0432\u0430\u0445 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0434\u0440\u0443\u0433\u0438\u0435 \"\u0444\u0438\u0448\u043a\u0438\" aiogram \u0438 Telegram Bot API.</p>"},{"location":"routers/","title":"\u0420\u043e\u0443\u0442\u0435\u0440\u044b, \u043c\u043d\u043e\u0433\u043e\u0444\u0430\u0439\u043b\u043e\u0432\u043e\u0441\u0442\u044c \u0438 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430 \u0431\u043e\u0442\u0430","text":"<p>\u041e \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u0435\u0440\u0441\u0438\u0439</p> <p>\u041a\u043e\u0434 \u0432 \u0433\u043b\u0430\u0432\u0430\u0445 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 aiogram 3.0 beta3. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438.</p> <p>\u0412 \u044d\u0442\u043e\u0439 \u0433\u043b\u0430\u0432\u0435 \u043c\u044b \u043f\u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u043c\u0441\u044f \u0441 \u043d\u043e\u0432\u043e\u0439 \u0444\u0438\u0447\u0435\u0439 aiogram 3.x \u2014 \u0440\u043e\u0443\u0442\u0435\u0440\u0430\u043c\u0438, \u043d\u0430\u0443\u0447\u0438\u043c\u0441\u044f \u0440\u0430\u0437\u0431\u0438\u0432\u0430\u0442\u044c \u043d\u0430\u0448 \u043a\u043e\u0434 \u043d\u0430 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435  \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u0443\u0435\u043c \u0431\u0430\u0437\u043e\u0432\u0443\u044e \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0431\u043e\u0442\u0430, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u0440\u0438\u0433\u043e\u0434\u0438\u0442\u0441\u044f \u0432 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0445 \u0433\u043b\u0430\u0432\u0430\u0445 \u0438 \u0432\u043e\u043e\u0431\u0449\u0435 \u043f\u043e \u0436\u0438\u0437\u043d\u0438.</p>"},{"location":"routers/#entrypoint","title":"\u0422\u043e\u0447\u043a\u0430 \u0432\u0445\u043e\u0434\u0430 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435","text":"<p>\u0422\u0435\u0430\u0442\u0440 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 \u0432\u0435\u0448\u0430\u043b\u043a\u0438, \u0430 \u0431\u043e\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 \u0442\u043e\u0447\u043a\u0438 \u0432\u0445\u043e\u0434\u0430. \u041f\u0443\u0441\u0442\u044c \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u0444\u0430\u0439\u043b <code>bot.py</code>. \u0412 \u043d\u0451\u043c \u043c\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u043c  \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>main()</code>, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043c \u043f\u043e\u043b\u043b\u0438\u043d\u0433. \u041a\u0430\u043a\u0438\u0435  \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u043c\u0438? \u0412\u043e-\u043f\u0435\u0440\u0432\u044b\u0445, \u0440\u0430\u0437\u0443\u043c\u0435\u0435\u0442\u0441\u044f, \u0431\u043e\u0442. \u0418\u0445 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e, \u043d\u043e \u043e\u0431 \u044d\u0442\u043e\u043c  \u043a\u0430\u043a-\u043d\u0438\u0431\u0443\u0434\u044c \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0440\u0430\u0437. \u0412\u043e-\u0432\u0442\u043e\u0440\u044b\u0445, \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440. \u041e\u043d \u0437\u0430\u043d\u0438\u043c\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438\u0451\u043c\u043e\u043c \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u043e\u0442 Telegram \u0438 \u0440\u0430\u0441\u043a\u0438\u0434\u044b\u0432\u0430\u043d\u0438\u0435\u043c \u0438\u0445  \u043f\u043e \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u043c \u0447\u0435\u0440\u0435\u0437 \u0444\u0438\u043b\u044c\u0442\u0440\u044b \u0438 \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0438.</p> bot.py<pre><code>import asyncio\nfrom aiogram import Bot, Dispatcher\n\n\n# \u0417\u0430\u043f\u0443\u0441\u043a \u0431\u043e\u0442\u0430\nasync def main():\n    bot = Bot(token=\"TOKEN\")\n    dp = Dispatcher()\n\n    # \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0431\u043e\u0442\u0430 \u0438 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0432\u0441\u0435 \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435\n    # \u0414\u0430, \u044d\u0442\u043e\u0442 \u043c\u0435\u0442\u043e\u0434 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u043f\u043e\u043b\u043b\u0438\u043d\u0433\n    await bot.delete_webhook(drop_pending_updates=True)\n    await dp.start_polling(bot)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre> <p>\u041d\u043e \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u044d\u0442\u043e\u0433\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e, \u043d\u0443\u0436\u043d\u044b \u0435\u0449\u0451 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b. \u041c\u044b \u0445\u043e\u0442\u0438\u043c \u0438\u0445 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0438\u0442\u044c  \u0432 \u0434\u0440\u0443\u0433\u0438\u0445 \u0444\u0430\u0439\u043b\u0430\u0445, \u0447\u0442\u043e\u0431\u044b \u043d\u0435 \u0443\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u043f\u043e\u0440\u0442\u044f\u043d\u043a\u0438 \u043d\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0442\u044b\u0441\u044f\u0447 \u0441\u0442\u0440\u043e\u043a. \u0412 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0445 \u0433\u043b\u0430\u0432\u0430\u0445 \u0432\u0441\u0435  \u043d\u0430\u0448\u0438 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b \u043f\u0440\u0438\u0446\u0435\u043f\u043b\u044f\u043b\u0438\u0441\u044c \u043a \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0443, \u043d\u043e \u0441\u0435\u0439\u0447\u0430\u0441 \u043e\u043d \u0432\u043d\u0443\u0442\u0440\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0438 \u043c\u044b \u0442\u043e\u0447\u043d\u043e \u043d\u0435 \u0445\u043e\u0442\u0438\u043c  \u0434\u0435\u043b\u0430\u0442\u044c \u0435\u0433\u043e \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u043c \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u043c. \u0427\u0442\u043e \u0436\u0435 \u0434\u0435\u043b\u0430\u0442\u044c? \u0418 \u0442\u0443\u0442 \u043d\u0430 \u043f\u043e\u043c\u043e\u0449\u044c \u043f\u0440\u0438\u0445\u043e\u0434\u044f\u0442...</p>"},{"location":"routers/#routers","title":"\u0420\u043e\u0443\u0442\u0435\u0440\u044b","text":"<p>\u041e\u0431\u0440\u0430\u0442\u0438\u043c\u0441\u044f \u043a \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0439 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438  aiogram 3.x \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435: </p> <p></p> <p>\u0427\u0442\u043e \u043c\u044b \u0432\u0438\u0434\u0438\u043c? </p> <ol> <li>\u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 \u2014 \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u0439 \u0440\u043e\u0443\u0442\u0435\u0440.</li> <li>\u0425\u044d\u043d\u0434\u043b\u0435\u0440\u044b \u0446\u0435\u043f\u043b\u044f\u044e\u0442\u0441\u044f \u043a \u0440\u043e\u0443\u0442\u0435\u0440\u0430\u043c.</li> <li>\u0420\u043e\u0443\u0442\u0435\u0440\u044b \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u043c\u0438, \u043d\u043e \u043c\u0435\u0436\u0434\u0443 \u043d\u0438\u043c\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u043e\u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u0430\u044f \u0441\u0432\u044f\u0437\u044c.</li> <li>\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f (\u0438, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438) \u0440\u043e\u0443\u0442\u0435\u0440\u043e\u0432 \u044f\u0432\u043d\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0451\u043d.</li> </ol> <p>\u041d\u0430 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0438 \u0432\u0438\u0434\u0435\u043d \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043f\u043e\u0438\u0441\u043a\u0430 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u043c \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430 \u0434\u043b\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f:</p> <p></p> <p>\u041d\u0430\u043f\u0438\u0448\u0435\u043c \u043f\u0440\u043e\u0441\u0442\u0435\u043d\u044c\u043a\u043e\u0433\u043e \u0431\u043e\u0442\u0430 \u0441 \u0434\u0432\u0443\u043c\u044f \u0444\u0438\u0447\u0430\u043c\u0438:</p> <ol> <li>\u0415\u0441\u043b\u0438 \u0431\u043e\u0442\u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 <code>/start</code>, \u043e\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u043f\u0440\u0438\u0441\u043b\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441 \u0438 \u0434\u0432\u0435 \u043a\u043d\u043e\u043f\u043a\u0438 \u0441 \u0442\u0435\u043a\u0441\u0442\u0430\u043c\u0438 \u00ab\u0414\u0430\u00bb \u0438 \u00ab\u041d\u0435\u0442\u00bb.</li> <li>\u0415\u0441\u043b\u0438 \u0431\u043e\u0442\u0443 \u043f\u0440\u0438\u0441\u043b\u0430\u043b\u0438 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0442\u0435\u043a\u0441\u0442, \u0441\u0442\u0438\u043a\u0435\u0440 \u0438\u043b\u0438 \u0433\u0438\u0444\u043a\u0443, \u043e\u043d \u0434\u043e\u043b\u0436\u0435\u043d \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c \u0442\u0438\u043f\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f.</li> </ol> <p>\u041d\u0430\u0447\u043d\u0451\u043c \u0441 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b: \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0440\u044f\u0434\u043e\u043c \u0441 \u0444\u0430\u0439\u043b\u043e\u043c <code>bot.py</code> \u043a\u0430\u0442\u0430\u043b\u043e\u0433 <code>keyboards</code>, \u0430 \u0432\u043d\u0443\u0442\u0440\u0438 \u043d\u0435\u0433\u043e \u0444\u0430\u0439\u043b <code>for_questions.py</code>  \u0438 \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b \u0441 \u043a\u043d\u043e\u043f\u043a\u0430\u043c\u0438 \"\u0414\u0430\" \u0438 \"\u041d\u0435\u0442\" \u0432 \u043e\u0434\u0438\u043d \u0440\u044f\u0434:</p> keyboards/for_questions.py<pre><code>from aiogram.types import ReplyKeyboardMarkup\nfrom aiogram.utils.keyboard import ReplyKeyboardBuilder\n\ndef get_yes_no_kb() -&gt; ReplyKeyboardMarkup:\n    kb = ReplyKeyboardBuilder()\n    kb.button(text=\"\u0414\u0430\")\n    kb.button(text=\"\u041d\u0435\u0442\")\n    kb.adjust(2)\n    return kb.as_markup(resize_keyboard=True)\n</code></pre> <p>\u041d\u0438\u0447\u0435\u0433\u043e \u0441\u043b\u043e\u0436\u043d\u043e\u0433\u043e, \u0442\u0435\u043c \u0431\u043e\u043b\u0435\u0435, \u0447\u0442\u043e \u043c\u044b \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u043b\u0438 \u0440\u0430\u043d\u0435\u0435.  \u0422\u0435\u043f\u0435\u0440\u044c \u0440\u044f\u0434\u043e\u043c \u0441 \u0444\u0430\u0439\u043b\u043e\u043c <code>bot.py</code> \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0434\u0440\u0443\u0433\u043e\u0439 \u043a\u0430\u0442\u0430\u043b\u043e\u0433 <code>handlers</code>, \u0430 \u0432\u043d\u0443\u0442\u0440\u0438 \u043d\u0435\u0433\u043e \u0444\u0430\u0439\u043b <code>questions.py</code>.</p> handlers/questions.py<pre><code>from aiogram import Router\nfrom aiogram.dispatcher.filters.text import Text\nfrom aiogram.types import Message, ReplyKeyboardRemove\nfrom keyboards.for_questions import get_yes_no_kb\n\nrouter = Router()  # [1]\n@router.message(commands=[\"start\"])  # [2]\nasync def cmd_start(message: Message):\n    await message.answer(\n        \"\u0412\u044b \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u044b \u0441\u0432\u043e\u0435\u0439 \u0440\u0430\u0431\u043e\u0442\u043e\u0439?\",\n        reply_markup=get_yes_no_kb()\n    )\n\n\n@router.message(Text(text=\"\u0434\u0430\", text_ignore_case=True))\nasync def answer_yes(message: Message):\n    await message.answer(\n        \"\u042d\u0442\u043e \u0437\u0434\u043e\u0440\u043e\u0432\u043e!\",\n        reply_markup=ReplyKeyboardRemove()\n    )\n\n\n@router.message(Text(text=\"\u043d\u0435\u0442\", text_ignore_case=True))\nasync def answer_no(message: Message):\n    await message.answer(\n        \"\u0416\u0430\u043b\u044c...\",\n        reply_markup=ReplyKeyboardRemove()\n    )\n</code></pre> <p>\u041e\u0431\u0440\u0430\u0442\u0438\u043c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 \u043f\u0443\u043d\u043a\u0442\u044b [1] \u0438 [2]. \u0412\u043e-\u043f\u0435\u0440\u0432\u044b\u0445, \u043c\u044b \u0432 \u0444\u0430\u0439\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u043b\u0438 \u0441\u0432\u043e\u0439 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0440\u043e\u0443\u0442\u0435\u0440 \u0443\u0440\u043e\u0432\u043d\u044f \u043c\u043e\u0434\u0443\u043b\u044f, \u0438 \u0434\u0430\u043b\u0435\u0435  \u0431\u0443\u0434\u0435\u043c \u0446\u0435\u043f\u043b\u044f\u0442\u044c \u0435\u0433\u043e \u043a \u043a\u043e\u0440\u043d\u0435\u0432\u043e\u043c\u0443 \u0440\u043e\u0443\u0442\u0435\u0440\u0443 (\u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0443). \u0412\u043e-\u0432\u0442\u043e\u0440\u044b\u0445, \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b \u00ab\u043e\u0442\u043f\u043e\u0447\u043a\u043e\u0432\u044b\u0432\u0430\u044e\u0442\u0441\u044f\u00bb \u0443\u0436\u0435 \u043e\u0442 \u043b\u043e\u043a\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0440\u043e\u0443\u0442\u0435\u0440\u0430.</p> <p>\u0410\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0441\u0434\u0435\u043b\u0430\u0435\u043c \u0432\u0442\u043e\u0440\u043e\u0439 \u0444\u0430\u0439\u043b \u0441 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u043c\u0438 <code>different_types.py</code>, \u0433\u0434\u0435 \u043f\u0440\u043e\u0441\u0442\u043e \u0431\u0443\u0434\u0435\u043c \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u0442\u0438\u043f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f:</p> handlers/different_types.py<pre><code>from aiogram import Router\nfrom aiogram.types import Message\n\nrouter = Router()\n\n@router.message(content_types=\"text\")\nasync def message_with_text(message: Message):\n    await message.answer(\"\u042d\u0442\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435!\")\n\n\n@router.message(content_types=\"sticker\")\nasync def message_with_sticker(message: Message):\n    await message.answer(\"\u042d\u0442\u043e \u0441\u0442\u0438\u043a\u0435\u0440!\")\n\n\n@router.message(content_types=\"animation\")\nasync def message_with_gif(message: Message):\n    await message.answer(\"\u042d\u0442\u043e GIF!\")\n</code></pre> <p>\u041d\u0430\u043a\u043e\u043d\u0435\u0446, \u0432\u0435\u0440\u043d\u0451\u043c\u0441\u044f \u043a \u043d\u0430\u0448\u0435\u043c\u0443 <code>bot.py</code>, \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u0444\u0430\u0439\u043b\u044b \u0441 \u0440\u043e\u0443\u0442\u0435\u0440\u0430\u043c\u0438 \u0438 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430\u043c\u0438, \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u043c \u0438\u0445 \u043a \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0443:</p> bot.py<pre><code>import asyncio\nfrom aiogram import Bot, Dispatcher\nfrom handlers import questions, different_types\n# \u0417\u0430\u043f\u0443\u0441\u043a \u0431\u043e\u0442\u0430\nasync def main():\n    bot = Bot(token=\"TOKEN\")\n    dp = Dispatcher()\n\ndp.include_router(questions.router)\ndp.include_router(different_types.router)\n# \u0417\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0431\u043e\u0442\u0430 \u0438 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u043c \u0432\u0441\u0435 \u043d\u0430\u043a\u043e\u043f\u043b\u0435\u043d\u043d\u044b\u0435 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435\n    # \u0414\u0430, \u044d\u0442\u043e\u0442 \u043c\u0435\u0442\u043e\u0434 \u043c\u043e\u0436\u043d\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u043f\u043e\u043b\u043b\u0438\u043d\u0433\n    await bot.delete_webhook(drop_pending_updates=True)\n    await dp.start_polling(bot)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre> <p>\u041c\u044b \u043f\u0440\u043e\u0441\u0442\u043e \u0438\u043c\u043f\u043e\u0440\u0442\u0438\u0440\u0443\u0435\u043c \u0444\u0430\u0439\u043b\u044b \u0438\u0437 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430 <code>handlers/</code> \u0438 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c \u0440\u043e\u0443\u0442\u0435\u0440\u044b \u0438\u0437 \u044d\u0442\u0438\u0445 \u0444\u0430\u0439\u043b\u043e\u0432 \u043a \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0443. \u0418 \u0437\u0434\u0435\u0441\u044c \u0441\u043d\u043e\u0432\u0430  \u0432\u0430\u0436\u0435\u043d \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0438\u043c\u043f\u043e\u0440\u0442\u043e\u0432! \u0415\u0441\u043b\u0438 \u043c\u044b \u043f\u043e\u043c\u0435\u043d\u044f\u0435\u043c \u043c\u0435\u0441\u0442\u0430\u043c\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044e \u0440\u043e\u0443\u0442\u0435\u0440\u043e\u0432, \u0442\u043e \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/start</code> \u0431\u043e\u0442 \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u0432\u0435\u0447\u0430\u0442\u044c  \u0444\u0440\u0430\u0437\u043e\u0439 \u00ab\u042d\u0442\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435!\u00bb, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0444\u0443\u043d\u043a\u0446\u0438\u044f <code>message_with_text()</code> \u043f\u0435\u0440\u0432\u043e\u0439 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u0440\u043e\u0439\u0434\u0451\u0442 \u0432\u0441\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b. \u041d\u043e  \u043e \u0441\u0430\u043c\u0438\u0445 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0445 \u043c\u044b \u043f\u043e\u0433\u043e\u0432\u043e\u0440\u0438\u043c \u0447\u0443\u0442\u044c \u043f\u043e\u0437\u0436\u0435, \u0430 \u043f\u043e\u043a\u0430 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0435\u0449\u0451 \u043e\u0434\u0438\u043d \u0432\u043e\u043f\u0440\u043e\u0441.</p>"},{"location":"routers/#conclusion","title":"\u0418\u0442\u043e\u0433","text":"<p>\u0423 \u043d\u0430\u0441 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0430\u043a\u043a\u0443\u0440\u0430\u0442\u043d\u043e \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u0431\u043e\u0442\u0430 \u043f\u043e \u0440\u0430\u0437\u043d\u044b\u043c \u0444\u0430\u0439\u043b\u0430\u043c, \u043d\u0435 \u043d\u0430\u0440\u0443\u0448\u0430\u044f \u0435\u0433\u043e \u0440\u0430\u0431\u043e\u0442\u0443. \u041f\u0440\u0438\u043c\u0435\u0440\u043d\u043e\u0435 \u0434\u0435\u0440\u0435\u0432\u043e \u0444\u0430\u0439\u043b\u043e\u0432  \u0438 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u043e\u0432 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c (\u0437\u0434\u0435\u0441\u044c \u0441\u043e\u0437\u043d\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u044b \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u0444\u0430\u0439\u043b\u044b):</p> <pre><code>\u251c\u2500\u2500 bot.py\n\u251c\u2500\u2500 handlers\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 different_types.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 questions.py\n\u251c\u2500\u2500 keyboards\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 for_questions.py\n</code></pre> <p>\u0412 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u043c \u043c\u044b \u0431\u0443\u0434\u0435\u043c \u043f\u0440\u0438\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c\u0441\u044f \u0442\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b, \u043f\u043b\u044e\u0441 \u0434\u043e\u0431\u0430\u0432\u044f\u0442\u0441\u044f \u043d\u043e\u0432\u044b\u0435 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0438 \u0434\u043b\u044f \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432, \u043c\u0438\u0434\u043b\u0432\u0430\u0440\u0435\u0439,  \u0444\u0430\u0439\u043b\u043e\u0432 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0431\u0430\u0437\u0430\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0442.\u0434.</p>"},{"location":"special-updates/","title":"\u041e\u0441\u043e\u0431\u044b\u0435 \u0430\u043f\u0434\u0435\u0439\u0442\u044b","text":"<p>\u041e \u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u0435\u0440\u0441\u0438\u0439</p> <p>\u041a\u043e\u0434 \u0432 \u0433\u043b\u0430\u0432\u0430\u0445 \u0441\u0435\u0439\u0447\u0430\u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 aiogram 3.0 beta3. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u043d\u0435\u0441\u043e\u0432\u043c\u0435\u0441\u0442\u0438\u043c\u043e\u0441\u0442\u044c \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0432\u0435\u0440\u0441\u0438\u044f\u043c\u0438.</p>"},{"location":"special-updates/#intro","title":"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435","text":"<p>\u041f\u043e\u0447\u0442\u0438 \u0432\u0441\u0435 \u0432\u0438\u0434\u044b \u0441\u043e\u0431\u044b\u0442\u0438\u0439 \u0432 Telegram \u0438\u043c\u0435\u044e\u0442 \u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u0432\u043d\u0435\u0448\u043d\u0435\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u044e\u0437\u0435\u0440\u0430. \u0421\u043b\u0443\u0436\u0435\u0431\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f, \u043e\u0431\u044b\u0447\u043d\u044b\u0435,  \u043a\u043e\u043b\u0431\u044d\u043a\u0438, \u0438\u043d\u043b\u0430\u0439\u043d-\u0440\u0435\u0436\u0438\u043c... \u043d\u043e \u0435\u0441\u0442\u044c \u0434\u0432\u0430 \u0432\u0438\u0434\u0430 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044b\u0435 \u0438\u043c\u0435\u043d\u043d\u043e \u0434\u043b\u044f \u0441\u0430\u043c\u0438\u0445 \u0431\u043e\u0442\u043e\u0432. \u0420\u0435\u0447\u044c \u043f\u043e\u0439\u0434\u0451\u0442 \u043e  <code>my_chat_member</code> \u0438 <code>chat_member</code></p> <p>\u041a\u043e\u0433\u0434\u0430-\u0442\u043e \u0434\u0430\u0432\u043d\u044b\u043c-\u0434\u0430\u0432\u043d\u043e \u0431\u043e\u0442\u044b \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043e\u0432\u0430\u043b\u0438 \u0432 \u00ab\u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u043c \u0432\u0430\u043a\u0443\u0443\u043c\u0435\u00bb: \u0431\u0430\u043d\u0430\u043b\u044c\u043d\u043e \u043d\u0430 \u043b\u044e\u0431\u044b\u0435  \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u0441\u043a\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f, \u0431\u0443\u0434\u044c \u0442\u043e \u0431\u0430\u043d\u044b \u0438\u043b\u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0431\u044b\u043b\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u043f\u0440\u0430\u0432\u0430 \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0449\u0435\u0433\u043e \u044e\u0437\u0435\u0440\u0430 \u0447\u0435\u0440\u0435\u0437 \u043c\u0435\u0442\u043e\u0434\u044b  getChatMember \u0438\u043b\u0438  getChatAdministrators, \u0434\u0430 \u0435\u0449\u0451 \u0438 \u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439  \u043f\u0440\u043e\u043c\u0435\u0436\u0443\u0442\u043e\u043a \u0432\u0440\u0435\u043c\u0435\u043d\u0438, \u0434\u0430\u0431\u044b \u043d\u0435 \u0443\u043f\u0435\u0440\u0435\u0442\u044c\u0441\u044f \u0432 \u043b\u0438\u043c\u0438\u0442\u044b Bot API, \u0442\u043e\u0447\u043d\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043a\u043e\u0442\u043e\u0440\u044b\u0445 [\u043b\u0438\u043c\u0438\u0442\u043e\u0432] \u043f\u043e-\u043f\u0440\u0435\u0436\u043d\u0435\u043c\u0443 \u043e\u0441\u0442\u0430\u044e\u0442\u0441\u044f  \u0442\u0430\u0439\u043d\u043e\u0439 \u0437\u0430 \u0441\u0435\u043c\u044c\u044e \u043f\u0435\u0447\u0430\u0442\u044f\u043c\u0438. </p> <p>\u0418\u043b\u0438, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043a\u0430\u043a\u043e\u0439-\u043d\u0438\u0431\u0443\u0434\u044c \u0445\u0438\u0442\u0440\u044b\u0439 \u044e\u0437\u0435\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u043b \u0431\u043e\u0442\u0430 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443, \u0443\u0431\u0438\u0440\u0430\u043b \u0443 \u0442\u043e\u0433\u043e \u043f\u0440\u0430\u0432\u043e \u043f\u0438\u0441\u0430\u0442\u044c \u0438 \u043d\u0430\u0447\u0438\u043d\u0430\u043b \u0434\u0451\u0440\u0433\u0430\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u044b,  \u043e\u0436\u0438\u0434\u0430\u044f, \u0447\u0442\u043e \u0431\u043e\u0442 \u043d\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0442\u0430\u043a\u0443\u044e \u043e\u0448\u0438\u0431\u043a\u0443 \u0438 \u0441\u043b\u043e\u043c\u0430\u0435\u0442\u0441\u044f. \u0410 \u0443\u0436 \u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u043e\u0439 \u0432 \u043b\u0438\u0447\u043a\u0443 \u0432\u043e\u043e\u0431\u0449\u0435 \u0432\u0435\u0441\u0435\u043b\u043e: \u043d\u0435 \u0437\u043d\u0430\u044f \u0442\u043e\u0447\u043d\u043e, \u043a\u0430\u043a\u0430\u044f  \u0430\u043a\u0442\u0438\u0432\u043d\u0430\u044f \u0430\u0443\u0434\u0438\u0442\u043e\u0440\u0438\u044f \u0431\u043e\u0442\u0430, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0443 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u043b\u043e\u0441\u044c \u043b\u0438\u0431\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u0430\u043a\u043e\u0435-\u043d\u0438\u0431\u0443\u0434\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043f\u043e \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432  \u0441\u0432\u043e\u0435\u0439 \u0431\u0430\u0437\u0435, \u043b\u0438\u0431\u043e, \u0447\u0442\u043e \u0447\u0443\u0442\u044c \u0433\u0443\u043c\u0430\u043d\u043d\u0435\u0435, \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u044d\u0442\u0438\u043c \u044e\u0437\u0435\u0440\u0430\u043c \u043a\u0430\u043a\u043e\u0439-\u043d\u0438\u0431\u0443\u0434\u044c ChatAction, \u0442\u0438\u043f\u0430 \u00ab\u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442\u2026\u00bb; \u043a\u0430\u043a \u0432\u044b\u044f\u0441\u043d\u0438\u043b\u043e\u0441\u044c,  \u0442\u0435\u043c, \u043a\u0442\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043b \u0431\u043e\u0442\u0430, \u044d\u0442\u043e \u0441\u0430\u043c\u043e\u0435 \u00ab\u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442\u2026\u00bb \u043d\u0435 \u043f\u0440\u0438\u0439\u0434\u0451\u0442, \u0432\u0435\u0440\u043d\u0443\u0432 \u043e\u0448\u0438\u0431\u043a\u0443 \u043e\u0442 Bot API.</p> <p>\u0412 \u043c\u0430\u0440\u0442\u0435 2021 \u0433\u043e\u0434\u0430 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044f \u043a\u0430\u0440\u0434\u0438\u043d\u0430\u043b\u044c\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u0430\u0441\u044c \u0432 \u043b\u0443\u0447\u0448\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443 \u0441 \u0440\u0435\u043b\u0438\u0437\u043e\u043c  \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f Bot API v5.1, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c, \u043f\u043e\u043c\u0438\u043c\u043e \u0432\u0441\u0435\u0433\u043e \u043f\u0440\u043e\u0447\u0435\u0433\u043e,  \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u043e\u0441\u044c \u0434\u0432\u0430 \u043d\u043e\u0432\u044b\u0445 \u0442\u0438\u043f\u0430 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u043e\u0442 \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c: <code>my_chat_member</code> \u0438 <code>chat_member</code>. \u041e\u0431\u0430 \u0430\u043f\u0434\u0435\u0439\u0442\u0430 \u0432\u043d\u0443\u0442\u0440\u0438  \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442 \u043e\u0431\u044a\u0435\u043a\u0442 \u043e\u0434\u043d\u043e\u0433\u043e \u0438 \u0442\u043e\u0433\u043e \u0436\u0435 \u0442\u0438\u043f\u0430 ChatMemberUpdated.  \u0420\u0430\u0437\u043d\u0438\u0446\u0430 \u043c\u0435\u0436\u0434\u0443 \u044d\u0442\u0438\u043c\u0438 \u0434\u0432\u0443\u043c\u044f \u0441\u043e\u0431\u044b\u0442\u0438\u044f\u043c\u0438 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f:</p> <ul> <li><code>my_chat_member</code>. \u0417\u0434\u0435\u0441\u044c \u0432\u0441\u0451, \u0447\u0442\u043e \u043a\u0430\u0441\u0430\u0435\u0442\u0441\u044f \u043d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0431\u043e\u0442\u0430, \u043b\u0438\u0431\u043e \u041b\u0421 \u044e\u0437\u0435\u0440\u0430 \u0441 \u0431\u043e\u0442\u043e\u043c: (\u0440\u0430\u0437)\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438 \u0431\u043e\u0442\u0430 \u044e\u0437\u0435\u0440\u043e\u043c  \u0432 \u041b\u0421, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0431\u043e\u0442\u0430 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443 \u0438\u043b\u0438 \u043a\u0430\u043d\u0430\u043b, \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0442\u0443\u0434\u0430, \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432 \u0431\u043e\u0442\u0430 \u0438 \u0435\u0433\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u0447\u0430\u0442\u0430\u0445 \u0438 \u0442.\u0434.</li> <li><code>chat_member</code>. \u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0432\u0441\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445 \u0438 \u043a\u0430\u043d\u0430\u043b\u0430\u0445, \u0433\u0434\u0435 \u0431\u043e\u0442 \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435  \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430: \u043f\u0440\u0438\u0445\u043e\u0434/\u0443\u0445\u043e\u0434 \u044e\u0437\u0435\u0440\u043e\u0432 \u0432 \u0433\u0440\u0443\u043f\u043f\u044b, \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438/\u043e\u0442\u043f\u0438\u0441\u043a\u0438 \u0432 \u043a\u0430\u043d\u0430\u043b\u0430\u0445, \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u0432 \u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u043e\u0432 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439,  \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435/\u0441\u043d\u044f\u0442\u0438\u0435 \u0430\u0434\u043c\u0438\u043d\u043e\u0432 \u0438 \u043c\u043d\u043e\u0433\u043e\u0435 \u0434\u0440\u0443\u0433\u043e\u0435.</li> </ul> <p>\u0412\u0430\u0436\u043d\u043e</p> <p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e Telegram \u043d\u0435 \u043f\u0440\u0438\u0441\u044b\u043b\u0430\u0435\u0442 \u0431\u043e\u0442\u0430\u043c \u0430\u043f\u0434\u0435\u0439\u0442\u044b <code>chat_member</code>, \u0438\u0445 \u043f\u0440\u0438\u0451\u043c \u043d\u0430\u0434\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e. \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u2014  \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435</p> <p>\u0412 \u0434\u0430\u043d\u043d\u043e\u0439 \u0433\u043b\u0430\u0432\u0435 \u043c\u044b \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u044d\u0442\u0438 \u0430\u043f\u0434\u0435\u0439\u0442\u044b \u043d\u0430 \u043d\u0430\u0438\u0431\u043e\u043b\u0435\u0435 \u0447\u0430\u0441\u0442\u043e \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0445 \u0437\u0430\u0434\u0430\u0447\u0430\u0445, \u043e\u0434\u043d\u0430\u043a\u043e \u043f\u0435\u0440\u0435\u0434 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u043c  \u043a \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0430\u043c \u043d\u0430\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441  \u044d\u0442\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435\u0439  \u0438\u0437 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 aiogram 3.x.</p>"},{"location":"special-updates/#chatmemberupdated","title":"\u041e\u0431\u044a\u0435\u043a\u0442 ChatMemberUpdated","text":"<p>\u0421\u0430\u043c \u043f\u043e \u0441\u0435\u0431\u0435 \u043e\u0431\u044a\u0435\u043a\u0442 ChatMemberUpdated \u0437\u0430\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u0435\u0442 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0433\u043e  \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u044f. \u0427\u0442\u043e\u0431\u044b \u0438\u0437\u0443\u0447\u0438\u0442\u044c \u0435\u0433\u043e \u043f\u043e\u0431\u043b\u0438\u0436\u0435, \u043f\u0440\u0435\u0434\u043f\u043e\u043b\u043e\u0436\u0438\u043c, \u0432 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0433\u0440\u0443\u043f\u043f\u0435 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440 \u0410\u043b\u0438\u0441\u0430 \u0437\u0430\u0431\u0430\u043d\u0438\u043b\u0430  \u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u0412\u0438\u0442\u044e. \u0421 \u043f\u043e\u043b\u044f\u043c\u0438 <code>chat</code> \u0438 <code>date</code> \u0432\u0441\u0451 \u043e\u0447\u0435\u0432\u0438\u0434\u043d\u043e, \u0438\u0445 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u043c.</p> <p>\u041f\u043e\u043b\u0435 <code>from</code> (\u0432 \u0432\u0430\u0448\u0435\u043c Python-\u043a\u043e\u0434\u0435 \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 <code>from_user</code>) \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0441\u0443\u0431\u044a\u0435\u043a\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f. \u0412 \u043d\u0430\u0448\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u0441\u0443\u0431\u044a\u0435\u043a\u0442  \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u2014 \u044d\u0442\u043e \u0410\u043b\u0438\u0441\u0430, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0432\u043e <code>from</code> (<code>from_user</code>) \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u044a\u0435\u043a\u0442 User \u0441  \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u043e\u0431 \u0410\u043b\u0438\u0441\u0435.</p> <p><code>old_chat_member</code> \u0438 <code>new_chat_member</code>. \u041f\u043e\u0434 \u044d\u0442\u0438\u043c\u0438 \u043f\u043e\u043b\u044f\u043c\u0438 \u0441\u043a\u0440\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u00ab\u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f\u00bb  \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0414\u041e \u0438 \u041f\u041e\u0421\u041b\u0415 \u0441\u043e\u0431\u044b\u0442\u0438\u044f. \u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u0432 <code>old_chat_member</code> \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u044a\u0435\u043a\u0442 \u0441 \u0442\u0438\u043f\u043e\u043c  ChatMemberMember (\u044d\u0442\u043e \u043d\u0435 \u043e\u043f\u0435\u0447\u0430\u0442\u043a\u0430), \u0438 \u043f\u043e\u043b\u0435\u043c <code>user</code> \u0441 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0435\u0439  \u043e \u0412\u0438\u0442\u0435, \u0430 \u0432 <code>new_chat_member</code> \u2014 \u043e\u0431\u044a\u0435\u043a\u0442 ChatMemberBanned \u0441 \u043f\u043e\u043b\u0435\u043c  <code>user</code> \u0432\u0441\u0451 \u043f\u0440\u043e \u0442\u043e\u0433\u043e \u0436\u0435 \u043d\u0435\u0441\u0447\u0430\u0441\u0442\u043d\u043e\u0433\u043e \u0412\u0438\u043a\u0442\u043e\u0440\u0430.</p> <p>\u041d\u0430\u043a\u043e\u043d\u0435\u0446, \u0435\u0441\u043b\u0438 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443 \u0438\u043b\u0438 \u043a\u0430\u043d\u0430\u043b \u0432\u0441\u0442\u0443\u043f\u0438\u043b\u0430 \u0443\u0441\u043b\u043e\u0432\u043d\u0430\u044f \u041c\u0430\u0448\u0430, \u0442\u043e \u0432 \u043e\u0431\u044a\u0435\u043a\u0442\u0435 ChatMemberUpdated \u0431\u0443\u0434\u0435\u0442 \u043d\u0435\u043f\u0443\u0441\u0442\u043e\u0435 \u043f\u043e\u043b\u0435  <code>invite_link</code>, \u0441 \u0442\u0438\u043f\u043e\u043c ChatInviteLink \u0438 \u0441\u0432\u0435\u0434\u0435\u043d\u0438\u044f\u043c\u0438 \u043e \u0442\u043e\u043c,  \u043f\u043e \u043a\u0430\u043a\u043e\u0439 \u0438\u043c\u0435\u043d\u043d\u043e \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0441\u044b\u043b\u043a\u0435 \u043e\u043d\u0430 \u043f\u0440\u0438\u0448\u043b\u0430. </p> <p>\u041e \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0441\u0441\u044b\u043b\u043a\u0430\u0445</p> <p>\u0417\u0434\u0435\u0441\u044c \u0441\u0442\u043e\u0438\u0442 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0432\u0430\u0436\u043d\u0443\u044e \u0440\u0435\u043c\u0430\u0440\u043a\u0443: \u043a\u0430\u0436\u0434\u044b\u0439 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440  \u0433\u0440\u0443\u043f\u043f\u044b/\u043a\u0430\u043d\u0430\u043b\u0430 (\u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0431\u043e\u0442\u043e\u0432) \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0441\u0441\u044b\u043b\u043e\u043a \u0441 \u0440\u0430\u0437\u043d\u044b\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438. \u0415\u0441\u043b\u0438 \u0431\u043e\u0442  \u00ab\u043f\u043e\u0439\u043c\u0430\u043b\u00bb \u0432\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430 \u043f\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u043e\u0439 \u0438\u043c [\u0431\u043e\u0442\u043e\u043c] \u0436\u0435 \u0441\u0441\u044b\u043b\u043a\u0435, \u0442\u043e \u0432 \u043f\u043e\u043b\u0435 <code>invite_link</code> \u043e\u0431\u044a\u0435\u043a\u0442\u0430 ChatInviteLink  \u0431\u0443\u0434\u0435\u0442 \u0432\u0438\u0434\u043d\u0430 \u0441\u0441\u044b\u043b\u043a\u0430 \u0446\u0435\u043b\u0438\u043a\u043e\u043c (\u0431\u0435\u0437 <code>https://t.me</code>, \u0440\u0430\u0437\u0443\u043c\u0435\u0435\u0442\u0441\u044f). \u041d\u043e \u0435\u0441\u043b\u0438 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a \u043f\u0440\u0438\u0448\u0451\u043b \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u0434\u0440\u0443\u0433\u043e\u0433\u043e  \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430, \u0442\u043e \u0431\u043e\u0442 \u0443\u0432\u0438\u0434\u0438\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0432\u0443\u044e \u0447\u0430\u0441\u0442\u044c, \u0432\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0435\u043d\u0430 \u043d\u0430 \u043c\u043d\u043e\u0433\u043e\u0442\u043e\u0447\u0438\u0435. </p> <p>\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u0435\u0435 \u0432\u0441\u0435\u0433\u043e, \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043d\u043e \u0434\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0431\u043e\u0442\u044b \u043d\u0435 \u043c\u043e\u0433\u043b\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043e\u043c\u0443 \u043f\u043e\u043f\u0430\u043b\u043e \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0441\u0441\u044b\u043b\u043a\u0438,  \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430\u043c\u0438 \u0447\u0430\u0442\u0430.</p> <p>\u041a\u0441\u0442\u0430\u0442\u0438, \u043f\u043e \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0441\u0442\u0440\u0430\u043d\u043d\u043e\u0439 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c\u043d\u043e\u0439 \u043b\u043e\u0433\u0438\u043a\u0435, \u0435\u0441\u043b\u0438 \u0432\u0441\u0442\u0443\u043f\u0438\u0442\u044c \u0432 \u043f\u0443\u0431\u043b\u0438\u0447\u043d\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443 \u043f\u043e \u043f\u0440\u0438\u0433\u043b\u0430\u0441\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0441\u044b\u043b\u043a\u0435  (\u0434\u0430\u0436\u0435 \u043d\u0435 \u043f\u043e \u044e\u0437\u0435\u0440\u043d\u0435\u0439\u043c\u0443), \u0442\u043e \u0431\u043e\u0442 \u043d\u0435 \u0443\u0432\u0438\u0434\u0438\u0442 \u0441\u0441\u044b\u043b\u043a\u0443 (\u043f\u043e\u043b\u0443\u0447\u0438\u0442 <code>None</code>). \u0422\u0435\u043b\u0435\u0433\u0430 \ud83e\udd37\u200d\u2642\ufe0f</p>"},{"location":"special-updates/#my-chat-member","title":"\u0410\u043f\u0434\u0435\u0439\u0442 my_chat_member","text":""},{"location":"special-updates/#ban-unban-pm","title":"\u0411\u0430\u043d\u044b/\u0440\u0430\u0437\u0431\u0430\u043d\u044b \u0432 \u041b\u0421","text":"<p>\u0412 \u043f\u0440\u043e\u0444\u0438\u043b\u044c\u043d\u044b\u0445 \u0447\u0430\u0442\u0430\u0445 \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0438 \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u0432\u043e\u043f\u0440\u043e\u0441: \u00ab\u043a\u0430\u043a \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u0431\u043e\u0442\u0430,  \u0435\u0441\u043b\u0438 \u043a\u0442\u043e-\u0442\u043e \u043c\u043e\u0433 \u0435\u0433\u043e \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c?\u00bb. \u0420\u0430\u0437\u0443\u043c\u0435\u0435\u0442\u0441\u044f, \u043f\u0435\u0440\u0432\u044b\u043c \u0438 \u0433\u043b\u0430\u0432\u043d\u044b\u043c \u0441\u043e\u0432\u0435\u0442\u043e\u043c \u0431\u0443\u0434\u0435\u0442:  \u00ab\u0441\u043e\u0437\u0434\u0430\u0439 \u043a\u0430\u043d\u0430\u043b\u00bb, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043a\u0430\u043d\u0430\u043b\u044b \u2014 \u044d\u0442\u043e \u043b\u0443\u0447\u0448\u0438\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0438\u043d\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439  \u043e \u0447\u0451\u043c-\u043b\u0438\u0431\u043e.</p> <p>\u041d\u043e \u0435\u0441\u043b\u0438 \u0432\u044b \u0432\u0441\u0451 \u0436\u0435 \u0442\u0432\u0451\u0440\u0434\u043e \u0440\u0435\u0448\u0438\u043b\u0438, \u0447\u0442\u043e \u0431\u0443\u0434\u0435\u0442\u0435 \u0434\u0435\u043b\u0430\u0442\u044c \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c \u043f\u0440\u044f\u043c\u043e \u0447\u0435\u0440\u0435\u0437 \u0431\u043e\u0442\u0430, \u0442\u043e \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0440\u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445  \u0441\u043f\u043e\u0441\u043e\u0431\u0430 \u0430\u043a\u0442\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0431\u043e\u0442\u0430:</p> <ol> <li>\u041d\u0435\u043f\u043e\u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438 \u043f\u0443\u0442\u0451\u043c \u043e\u0442\u043b\u043e\u0432\u0430 \u043e\u0448\u0438\u0431\u043e\u043a \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0438 \u0432\u043d\u0435\u0441\u0435\u043d\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439 \u0432 \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445  \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439.</li> <li>\u0427\u0435\u0440\u0435\u0437 \u043f\u0435\u0440\u0438\u043e\u0434\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0443 \u043a\u0430\u043a\u043e\u0433\u043e-\u043b\u0438\u0431\u043e ChatAction,  \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u00ab\u043f\u0435\u0447\u0430\u0442\u0430\u0435\u0442\u00bb \u043f\u043e \u0441\u043f\u0438\u0441\u043a\u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439.</li> <li>\u041f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u0435\u043c \u0430\u043f\u0434\u0435\u0439\u0442\u0430 my_chat_member.</li> </ol> <p>\u0421\u0435\u0439\u0447\u0430\u0441 \u043d\u0430\u0441 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u043f.3. \u041d\u0430\u0443\u0447\u0438\u043c\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e <code>my_chat_member</code> \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c, \u0447\u0442\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c  \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043b \u0438\u043b\u0438 \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043b \u0431\u043e\u0442\u0430. \u041d\u043e \u043f\u0440\u0435\u0436\u0434\u0435, \u0447\u0435\u043c \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0435\u043c \u00ab\u043c\u0430\u0433\u0438\u044e\u00bb aiogram, \u0440\u0430\u0437\u0431\u0435\u0440\u0451\u043c\u0441\u044f, \u043a\u0430\u043a \u0443\u043f\u043e\u043c\u044f\u043d\u0443\u0442\u044b\u0435 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438  \u0432\u044b\u0433\u043b\u044f\u0434\u044f\u0442 \u0432 \u0441\u0430\u043c\u043e\u043c Bot API. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u043c \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0441 \u0431\u043e\u0442\u043e\u043c, \u043e\u0442\u043a\u0440\u043e\u0435\u043c \u0434\u0438\u0430\u043b\u043e\u0433 \u0441 \u043d\u0438\u043c \u0432 Telegram \u0438 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e  \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u043c \u0438 \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u043c, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043e\u043f\u0446\u0438\u0438 \u0432 UI \u043c\u0435\u0441\u0441\u0435\u043d\u0434\u0436\u0435\u0440\u0430. \u0414\u0430\u043b\u0435\u0435 \u043e\u0442\u043a\u0440\u043e\u0435\u043c \u0432\u0435\u0431-\u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0438\u043b\u0438 \u043a\u0430\u043a\u043e\u0439-\u043d\u0438\u0431\u0443\u0434\u044c  Insomnia/Postman \u0438 \u043f\u0435\u0440\u0435\u0439\u0434\u0451\u043c \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 <code>https://api.telegram.org/bot&lt;TOKEN&gt;/getupdates</code>, \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0435\u0449\u0451 \u043d\u0435  \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 JSON.</p> <p>\u0418\u0442\u0430\u043a, \u0432\u043e\u0442 \u0447\u0442\u043e \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u0431\u043e\u0442\u0443, \u043a\u043e\u0433\u0434\u0430 \u043a\u0442\u043e-\u0442\u043e \u0435\u0433\u043e \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442:</p> <p></p> <p>\u041d\u0430 \u0447\u0442\u043e \u043d\u0430\u0434\u043e \u043e\u0431\u0440\u0430\u0442\u0438\u0442\u044c \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435:</p> <ul> <li>\u0421\u043e\u0431\u044b\u0442\u0438\u0435 <code>my_chat_member</code> \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u043e \u0432 \u041b\u0421 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c Groosha (chat_id \u0440\u0430\u0432\u0435\u043d \u043c\u043e\u0435\u043c\u0443 Telegram ID).</li> <li>\u0418\u043d\u0438\u0446\u0438\u0430\u0442\u043e\u0440 (\u0441\u0443\u0431\u044a\u0435\u043a\u0442) \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u2014 \u0442\u043e\u0436\u0435 Groosha.</li> <li>\u0412 \u043f\u043e\u043b\u0435 <code>old_chat_member</code> \u0432\u0438\u0434\u043d\u043e, \u043d\u0430\u0434 \u043a\u0435\u043c \u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0434\u0435\u043d\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 (\u043d\u0430\u0434 \u0431\u043e\u0442\u043e\u043c) \u0438 \u043a\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0442\u0443\u0441 \u0431\u043e\u0442\u0430 \u0432 \u041b\u0421 \u0431\u044b\u043b \u0414\u041e: \"member\",  \u0442.\u0435. \u0431\u043e\u0442 \u041d\u0415 \u0431\u044b\u043b \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d \u0440\u0430\u043d\u0435\u0435.</li> <li>\u0412 \u043f\u043e\u043b\u0435 <code>new_chat_member</code> \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 <code>user</code> \u0442\u043e \u0436\u0435 \u0441\u0430\u043c\u043e\u0435, \u0430 \u0432\u043e\u0442 \u0441\u0442\u0430\u0442\u0443\u0441 \u0443\u0436\u0435 \"kicked\", \u0442.\u0435. \u041f\u041e\u0421\u041b\u0415 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0431\u043e\u0442 \u0431\u044b\u043b  \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c.</li> </ul> <p>\u0422\u043e \u0435\u0441\u0442\u044c, \u0431\u043e\u0442 \u0432 \u041b\u0421 \u0441 Groosha \u0441\u043e\u0432\u0435\u0440\u0448\u0438\u043b \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u0441\u0432\u043e\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0438\u0437 \"member\" \u0432 \"kicked\". \u0422\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c, \u0447\u0442\u043e \u043f\u0440\u0438\u0448\u043b\u043e \u043e\u0442  Telegram \u043f\u043e\u0441\u043b\u0435 \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0438:</p> <p></p> <p>\u042d\u0442\u043e\u0442 \u0441\u043a\u0440\u0438\u043d\u0448\u043e\u0442 \u043f\u043e\u0445\u043e\u0436 \u043d\u0430 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0439, \u043d\u043e \u0435\u0441\u043b\u0438 \u043f\u0440\u0438\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c\u0441\u044f, \u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u043c\u0435\u0442\u0438\u0442\u044c \u0440\u0430\u0437\u043d\u0438\u0446\u0443: \u0434\u0440\u0443\u0433\u043e\u0439 <code>update_id</code>  (\u0443\u0432\u0435\u043b\u0438\u0447\u0438\u043b\u0441\u044f \u043d\u0430 \u0435\u0434\u0438\u043d\u0438\u0446\u0443), \u0430 \u0442\u0430\u043a\u0436\u0435 \u0441\u0442\u0430\u0442\u0443\u0441\u044b \u0414\u041e \u0438 \u041f\u041e\u0421\u041b\u0415 \u043f\u043e\u043c\u0435\u043d\u044f\u043b\u0438\u0441\u044c \u043c\u0435\u0441\u0442\u0430\u043c\u0438. \u0411\u043e\u0442 \u0432 \u041b\u0421 \u0441 Groosha \u0441\u043e\u0432\u0435\u0440\u0448\u0438\u043b \u043f\u0435\u0440\u0435\u0445\u043e\u0434  \u0438\u0437 \"kicked\" \u0432 \"member\". \u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e, \u043e\u0431\u044b\u0447\u043d\u043e \u0440\u044f\u0434\u043e\u043c \u0431\u0443\u0434\u0435\u0442 \u0435\u0449\u0451 \u043e\u0434\u0438\u043d \u0430\u043f\u0434\u0435\u0439\u0442 \u0443\u0436\u0435 \u0441 \u0442\u0438\u043f\u043e\u043c <code>message</code> \u0438 \u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 <code>/start</code>  \u0432 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u043c. \u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u043a\u043b\u0438\u0435\u043d\u0442\u044b \u043f\u0440\u0438 \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u0431\u043e\u0442\u0430 \u0441\u0440\u0430\u0437\u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/start</code>, \u043d\u043e \u043d\u0435 \u0441\u0442\u043e\u0438\u0442 \u043d\u0430 \u044d\u0442\u043e  \u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c\u0441\u044f: \u043f\u043e\u0434\u043e\u0431\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043e\u0441\u0442\u0430\u044e\u0442\u0441\u044f \u043d\u0430 \u043e\u0442\u043a\u0443\u043f \u043a\u043b\u0438\u0435\u043d\u0442\u0430\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0432\u0435\u0441\u0442\u0438 \u0441\u0435\u0431\u044f \u043f\u043e-\u0440\u0430\u0437\u043d\u043e\u043c\u0443.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u0443\u0447\u0438\u043c\u0441\u044f \u0440\u0435\u0430\u0433\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u0442\u0430\u043a\u0438\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0447\u0435\u0440\u0435\u0437 aiogram \u043d\u0430 \u043f\u0440\u043e\u0441\u0442\u043e\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0435: \u043f\u0443\u0441\u0442\u044c \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0438\u0437 \u0434\u0432\u0443\u0445 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445  \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0431\u043e\u0442\u0430 \u0441 \u0430\u0439\u0434\u0438 111 \u0438 222. \u041f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0435 <code>/start</code> \u0434\u043e\u0431\u0430\u0432\u0438\u043c \u044e\u0437\u0435\u0440\u0430 \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438, \u0430 \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0435 <code>/users</code> \u0431\u0443\u0434\u0435\u043c  \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u0430\u0439\u0434\u0438 \u0442\u0435\u0445, \u043a\u0442\u043e \u043d\u0435 \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043b \u0431\u043e\u0442\u0430 (\u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, \u043f\u0440\u0438 \u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u0431\u043e\u0442\u0430 \u0431\u0443\u0434\u0435\u043c \u0443\u0431\u0438\u0440\u0430\u0442\u044c \u0430\u0439\u0434\u0438 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430, \u0430  \u043f\u0440\u0438 \u0440\u0430\u0437\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u043a\u0435 \u0441\u043d\u043e\u0432\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u043c).</p> <p>\u0412\u043e\u0442 \u0433\u043e\u0442\u043e\u0432\u044b\u0439 \u0440\u043e\u0443\u0442\u0435\u0440 \u043f\u043e\u0434 \u0432\u044b\u0448\u0435\u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f:</p> handlers/in_pm.py<pre><code>from aiogram import F, Router\nfrom aiogram.dispatcher.filters.chat_member_updated import \\\n    ChatMemberUpdatedFilter, MEMBER, KICKED\nfrom aiogram.dispatcher.filters.command import \\\n    CommandStart, Command\nfrom aiogram.types import ChatMemberUpdated, Message\n\nrouter = Router()\nrouter.my_chat_member.filter(F.chat.type == \"private\")\nrouter.message.filter(F.chat.type == \"private\")\n\n# \u0418\u0441\u043a\u043b\u044e\u0447\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430!\n# \u0412 \u0440\u0435\u0430\u043b\u044c\u043d\u043e\u0439 \u0436\u0438\u0437\u043d\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0431\u043e\u043b\u0435\u0435 \u043d\u0430\u0434\u0451\u0436\u043d\u044b\u0435\n# \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0438 \u0430\u0439\u0434\u0438 \u044e\u0437\u0435\u0440\u043e\u0432\nusers = {111, 222}\n\n\n@router.my_chat_member(\n    ChatMemberUpdatedFilter(member_status_changed=KICKED)\n)\nasync def user_blocked_bot(event: ChatMemberUpdated):\n    users.discard(event.from_user.id)\n\n\n@router.my_chat_member(\n    ChatMemberUpdatedFilter(member_status_changed=MEMBER)\n)\nasync def user_unblocked_bot(event: ChatMemberUpdated):\n    users.add(event.from_user.id)\n\n\n@router.message(CommandStart())\nasync def cmd_start(message: Message):\n    await message.answer(\"Hello\")\n    users.add(message.from_user.id)\n\n\n@router.message(Command(commands=\"users\"))\nasync def cmd_users(message: Message):\n    await message.answer(\"\\n\".join(f\"\u2022 {user_id}\" for user_id in users))\n</code></pre> <p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435: \u0434\u043b\u044f \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u0432 \u043d\u0430 \u0430\u043f\u0434\u0435\u0439\u0442 <code>my_chat_member</code> \u043c\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c \u0444\u0438\u043b\u044c\u0442\u0440 <code>ChatMemberUpdatedFilter</code> \u0441  \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0435\u043c \u043e\u0442\u043b\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u043c\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430 \u041f\u041e\u0421\u041b\u0415 (\u0442.\u0435. \u0430\u0442\u0440\u0438\u0431\u0443\u0442 <code>new_chat_member</code> \u0443 \u0430\u043f\u0434\u0435\u0439\u0442\u0430). \u0422.\u0435. \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043d\u0430\u0441  \u043d\u0435 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u0443\u0435\u0442, \u0432 \u043a\u0430\u043a\u043e\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 \u0431\u044b\u043b \u044e\u0437\u0435\u0440 \u0414\u041e.</p> <p>\u0418 \u0432\u043e\u0442 \u043a\u0430\u043a \u044d\u0442\u043e \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043d\u0430 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0435:</p> <p></p>"},{"location":"special-updates/#bot-added-to-group","title":"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443","text":"<p>\u0415\u0449\u0451 \u0447\u0430\u0441\u0442\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441 \u043e\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u044e\u0449\u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432: \u00ab\u043a\u0430\u043a \u043f\u043e\u0439\u043c\u0430\u0442\u044c \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0431\u043e\u0442\u0430 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443?\u00bb. \u0427\u0442\u043e \u0436,  \u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0442\u044c\u0441\u044f. \u041d\u043e \u043f\u0435\u0440\u0435\u0434 \u044d\u0442\u0438\u043c \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c, \u043a\u0430\u043a\u0438\u0435 \u0432\u043e\u043e\u0431\u0449\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c  \u00ab\u0441\u0442\u0430\u0442\u0443\u0441\u044b\u00bb \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:</p> <ul> <li>creator (\u043e\u043d \u0436\u0435 owner) \u2014 \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u0447\u0430\u0442\u0430. \u0421\u0443\u0434\u044f \u043f\u043e \u0432\u0441\u0435\u043c\u0443, \u0431\u043e\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u0442\u0430\u043a\u043e\u0439 \u0441\u0442\u0430\u0442\u0443\u0441. \u0412\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u0431\u0435\u0437\u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u043e \u0438\u043c\u0435\u0435\u0442  \u0432\u0441\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u043f\u0440\u0430\u0432\u0430 \u0432 \u0447\u0430\u0442\u0435, \u043a\u0440\u043e\u043c\u0435 \u00ab\u0430\u043d\u043e\u043d\u0438\u043c\u043d\u043e\u0441\u0442\u0438\u00bb, \u043e\u043d\u0430 \u043f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0442\u0443\u0434\u0430-\u0441\u044e\u0434\u0430 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u043e.</li> <li>administrator \u2014 \u043b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440. \u0412 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u043c\u043e\u0436\u043d\u043e \u0443\u0431\u0440\u0430\u0442\u044c \u0435\u043c\u0443 \u0432\u043e\u043e\u0431\u0449\u0435 \u0432\u0441\u0435 \u043f\u0440\u0430\u0432\u0430,  \u043d\u043e \u043e\u043d \u0432\u0441\u0451 \u0440\u0430\u0432\u043d\u043e \u043e\u0441\u0442\u0430\u043d\u0435\u0442\u0441\u044f \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c \u0438 \u0441\u043c\u043e\u0436\u0435\u0442, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0447\u0438\u0442\u0430\u0442\u044c Recent Actions \u0438 \u0438\u0433\u043d\u043e\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c slow mode.</li> <li>member \u2014 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a \u0447\u0430\u0442\u0430 \u0441 \u043f\u0440\u0430\u0432\u0430\u043c\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u0423\u0437\u043d\u0430\u0442\u044c \u044d\u0442\u0438 \u00ab\u043f\u0440\u0430\u0432\u0430 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e\u00bb \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u0441 \u0433\u0440\u0443\u043f\u043f\u0430\u043c\u0438 \u043c\u043e\u0436\u043d\u043e, \u0432\u044b\u0437\u0432\u0430\u0432  API-\u043c\u0435\u0442\u043e\u0434 getChat \u0438 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0432 \u043f\u043e\u043b\u0435 <code>permissions</code>.</li> <li>restricted \u2014 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c, \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u044b\u0439 \u0432 \u043a\u0430\u043a\u0438\u0445-\u0442\u043e \u043f\u0440\u0430\u0432\u0430\u0445. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043d\u0430\u0445\u043e\u0434\u044f\u0449\u0438\u0439\u0441\u044f \u0432 \u0442.\u043d. \"read-only\".  \u0412\u0410\u0416\u041d\u041e: \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 <code>restricted</code> \u044e\u0437\u0435\u0440 \u043c\u043e\u0436\u0435\u0442 \u043a\u0430\u043a \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0433\u0440\u0443\u043f\u043f\u0435, \u0442\u0430\u043a \u0438 \u043d\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f, \u043f\u043e\u044d\u0442\u043e\u043c\u0443  \u0443 ChatMemberRestricted \u043d\u0430\u0434\u043e \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u0444\u043b\u0430\u0433 <code>is_member</code>.</li> <li>left \u2014 \u00ab\u043e\u043d \u0443\u043b\u0435\u0442\u0435\u043b, \u043d\u043e \u043e\u0431\u0435\u0449\u0430\u043b \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f\u00bb, \u0442.\u0435. \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432\u044b\u0448\u0435\u043b \u0438\u0437 \u0433\u0440\u0443\u043f\u043f\u044b,  \u043d\u043e \u043f\u0440\u0438 \u0436\u0435\u043b\u0430\u043d\u0438\u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043d\u043e\u0432\u0430 \u0437\u0430\u0439\u0442\u0438. \u0418 \u043d\u0430 \u043c\u043e\u043c\u0435\u043d\u0442 \u0432\u044b\u0445\u043e\u0434\u0430 \u043e\u043d \u043d\u0435 \u0431\u044b\u043b \u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 <code>restricted</code>.</li> <li>banned \u2014 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d \u0438 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e, \u043f\u043e\u043a\u0430 \u0435\u0433\u043e  \u043d\u0435 \u0440\u0430\u0437\u0431\u0430\u043d\u044f\u0442.</li> </ul> <p>\u0418\u043c\u0435\u044f \u043f\u043e\u0434 \u0440\u0443\u043a\u043e\u0439 \u0432\u044b\u0448\u0435\u0438\u0437\u043b\u043e\u0436\u0435\u043d\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e, \u043d\u0435\u0442\u0440\u0443\u0434\u043d\u043e \u0434\u043e\u0433\u0430\u0434\u0430\u0442\u044c\u0441\u044f, \u0447\u0442\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u0435 \u00ab\u0431\u043e\u0442\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443\u00bb \u2014 \u044d\u0442\u043e \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u0438\u0437  \u043d\u0430\u0431\u043e\u0440\u0430 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439 <code>{banned, left, restricted(is_member=False)}</code>  \u0432 \u043d\u0430\u0431\u043e\u0440 <code>{restricted(is_member=True), member, administrator}</code>. \u0422\u0430\u043a\u043e\u0439 \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043f\u043e-\u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f transition, \u0438  \u0432 aiogram 3.x \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0437\u0430\u0433\u043e\u0442\u043e\u0432\u043a\u0438. </p> <p>\u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u21161: \u0442\u0443\u043f\u043e \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0438\u043c \u0432\u0441\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0414\u041e \u0438 \u041f\u041e\u0421\u041b\u0415:</p> <pre><code># \u041d\u0435 \u0437\u0430\u0431\u044b\u0432\u0430\u0435\u043c \u0438\u043c\u043f\u043e\u0440\u0442\u044b:\nfrom aiogram.dispatcher.filters.chat_member_updated import \\\n    ChatMemberUpdatedFilter, KICKED, LEFT, MEMBER, \\\n    RESTRICTED, ADMINISTRATOR, CREATOR\n\n@router.my_chat_member(\n    ChatMemberUpdatedFilter(\n        member_status_changed=\n        (KICKED | LEFT | -RESTRICTED)\n        &gt;&gt;\n        (+RESTRICTED | MEMBER | ADMINISTRATOR | CREATOR)\n    )\n)\n</code></pre> <p>\u0412\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u0430\u044f \u0447\u0435\u0440\u0442\u0430 \u043e\u0437\u043d\u0430\u0447\u0430\u0435\u0442 \"\u0438\u043b\u0438\", \u0431\u0438\u0442\u043e\u0432\u044b\u0439 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 \"&gt;&gt;\" \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430,  \u0430 \u0441\u0438\u043c\u0432\u043e\u043b\u044b \u00ab\u043f\u043b\u044e\u0441\u00bb \u0438 \u00ab\u043c\u0438\u043d\u0443\u0441\u00bb \u043e\u043a\u043e\u043b\u043e RESTRICTED \u043e\u0442\u043d\u043e\u0441\u044f\u0442\u0441\u044f \u043a \u0444\u043b\u0430\u0433\u0443 <code>is_member</code> (\u043f\u043b\u044e\u0441 - True, \u043c\u0438\u043d\u0443\u0441 - False).</p> <p>\u041d\u043e \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a aiogram \u043f\u043e\u0448\u0451\u043b \u0434\u0430\u043b\u044c\u0448\u0435 \u0438 \u043e\u0431\u0435\u0440\u043d\u0443\u043b \u044d\u0442\u0438 \u0434\u0432\u0430 \u043d\u0430\u0431\u043e\u0440\u0430 \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f <code>IS_NOT_MEMBER</code> \u0438 <code>IS_MEMBER</code>  \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e. \u0423\u043f\u0440\u043e\u0441\u0442\u0438\u043c \u043d\u0430\u0448 \u043a\u043e\u0434 \u0432 \u0432\u0438\u0434\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u21162:</p> <pre><code># \u041d\u0435\u043c\u043d\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u0438\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u044b\nfrom aiogram.dispatcher.filters.chat_member_updated import \\\n    ChatMemberUpdatedFilter, IS_NOT_MEMBER, IS_MEMBER\n\n@router.my_chat_member(\n    ChatMemberUpdatedFilter(\n        member_status_changed=\n        IS_NOT_MEMBER &gt;&gt; IS_MEMBER\n    )\n)\n</code></pre> <p>\u041d\u043e \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443, \u043f\u043e\u0432\u0442\u043e\u0440\u044e\u0441\u044c, \u0442\u0430\u043a\u043e\u0439 \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u0434\u043e\u0432\u043e\u043b\u044c\u043d\u043e \u0447\u0430\u0441\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0432 \u0431\u043e\u0442\u0430\u0445, \u0442\u043e \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u043f\u043e\u0448\u0451\u043b \u0435\u0449\u0451 \u0434\u0430\u043b\u044c\u0448\u0435 \u0438  \u043e\u0431\u0435\u0440\u043d\u0443\u043b \u0442\u0430\u043a\u043e\u0439 \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u0432 \u0432\u0438\u0434\u0435 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 <code>JOIN_TRANSITION</code>, \u043f\u043e\u043b\u0443\u0447\u0438\u0432 \u0432\u0430\u0440\u0438\u0430\u043d\u0442 \u21163:</p> <pre><code># \u0418 \u0435\u0449\u0451 \u043c\u0435\u043d\u044c\u0448\u0435 \u0438\u043c\u043f\u043e\u0440\u0442\u043e\u0432\nfrom aiogram.dispatcher.filters.chat_member_updated import \\\n    ChatMemberUpdatedFilter, JOIN_TRANSITION\n\n@router.my_chat_member(\n    ChatMemberUpdatedFilter(\n        member_status_changed=JOIN_TRANSITION\n    )\n)\n</code></pre> <p>\u041d\u0430\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u043d\u0430\u0431\u043e\u0440\u0430\u043c\u0438 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0439 \u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432  \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438, \u0447\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c  \u0441\u0432\u043e\u0439 \u043a\u043e\u0434 \u0447\u0438\u0449\u0435.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0435\u0449\u0451 \u043e\u0434\u0438\u043d \u0440\u043e\u0443\u0442\u0435\u0440, \u043f\u043e\u0434 \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u0431\u0443\u0434\u0443\u0442 \u0434\u0432\u0430 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0430, \u0440\u0435\u0430\u0433\u0438\u0440\u0443\u044e\u0449\u0438\u0435 \u043d\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0431\u043e\u0442\u0430  \u0432 \u0433\u0440\u0443\u043f\u043f\u0443 \u0438\u043b\u0438 \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0443 \u0432 \u0440\u043e\u043b\u0438 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430 \u0438 \u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430.  \u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u0431\u0443\u0434\u0435\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0432 \u0447\u0430\u0442 \u0441\u0432\u043e\u0434\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0442\u043e\u043c, \u043a\u0443\u0434\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u0431\u043e\u0442\u0430:</p> handlers/bot_in_group.py<pre><code>from aiogram import F, Router, Bot\nfrom aiogram.dispatcher.filters.chat_member_updated import \\\n    ChatMemberUpdatedFilter, IS_NOT_MEMBER, MEMBER, ADMINISTRATOR\nfrom aiogram.types import ChatMemberUpdated\n\nrouter = Router()\nrouter.my_chat_member.filter(F.chat.type.in_({\"group\", \"supergroup\"}))\n\nchats_variants = {\n    \"group\": \"\u0433\u0440\u0443\u043f\u043f\u0443\",\n    \"supergroup\": \"\u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0443\"\n}\n\n\n# \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0441\u043f\u0440\u043e\u0438\u0437\u0432\u0435\u0441\u0442\u0438 \u0441\u043b\u0443\u0447\u0430\u0439 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0431\u043e\u0442\u0430 \u043a\u0430\u043a Restricted,\n# \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u0441 \u043d\u0438\u043c \u043d\u0435 \u0431\u0443\u0434\u0435\u0442\n\n\n@router.my_chat_member(\n    ChatMemberUpdatedFilter(\n        member_status_changed=IS_NOT_MEMBER &gt;&gt; ADMINISTRATOR\n    )\n)\nasync def bot_added_as_admin(event: ChatMemberUpdated, bot: Bot):\n    # \u0421\u0430\u043c\u044b\u0439 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u0441\u043b\u0443\u0447\u0430\u0439: \u0431\u043e\u0442 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u043a\u0430\u043a \u0430\u0434\u043c\u0438\u043d.\n    # \u041b\u0435\u0433\u043a\u043e \u043c\u043e\u0436\u0435\u043c \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435\n    await bot.send_message(\n        chat_id=event.chat.id,\n        text=f\"\u041f\u0440\u0438\u0432\u0435\u0442! \u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0447\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043c\u0435\u043d\u044f \u0432 \"\n             f'{chats_variants[event.chat.type]} \"{event.chat.title}\" '\n             f\"\u043a\u0430\u043a \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430. ID \u0447\u0430\u0442\u0430: {event.chat.id}\"\n    )\n\n\n@router.my_chat_member(\n    ChatMemberUpdatedFilter(\n        member_status_changed=IS_NOT_MEMBER &gt;&gt; MEMBER\n    )\n)\nasync def bot_added_as_member(event: ChatMemberUpdated, bot: Bot):\n    # \u0412\u0430\u0440\u0438\u0430\u043d\u0442 \u043f\u043e\u0441\u043b\u043e\u0436\u043d\u0435\u0435: \u0431\u043e\u0442\u0430 \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430.\n    # \u041d\u043e \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u0430\u0432\u043e \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0437\u0430\u0440\u0430\u043d\u0435\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u043c.\n    chat_info = await bot.get_chat(event.chat.id)\n    if chat_info.permissions.can_send_messages:\n        await bot.send_message(\n            chat_id=event.chat.id,\n            text=f\"\u041f\u0440\u0438\u0432\u0435\u0442! \u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0447\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438 \u043c\u0435\u043d\u044f \u0432 \"\n                 f'{chats_variants[event.chat.type]} \"{event.chat.title}\" '\n                 f\"\u043a\u0430\u043a \u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0430. ID \u0447\u0430\u0442\u0430: {event.chat.id}\"\n        )\n    else:\n        print(\"\u041a\u0430\u043a-\u043d\u0438\u0431\u0443\u0434\u044c \u043b\u043e\u0433\u0438\u0440\u0443\u0435\u043c \u044d\u0442\u0443 \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e\")\n</code></pre> <p>\u041d\u043e, \u043a\u0430\u043a \u0438 \u0432\u0441\u0435\u0433\u0434\u0430, \u0435\u0441\u0442\u044c \u043d\u044e\u0430\u043d\u0441, \u0438 \u0447\u0442\u043e\u0431\u044b \u0435\u0433\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c, \u043d\u0430\u0434\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0431\u043e\u0442\u0430 \u0432 \u0433\u0440\u0443\u043f\u043f\u0443,  \u0430 \u0437\u0430\u0442\u0435\u043c \u0441\u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0435\u0451 \u0432 \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0443. \u0414\u043b\u044f \u043d\u0430\u0433\u043b\u044f\u0434\u043d\u043e\u0441\u0442\u0438, \u044f \u0441\u043e\u0437\u0434\u0430\u043b \u0433\u0440\u0443\u043f\u043f\u0443  \u0441\u043e \u0441\u0432\u043e\u0438\u043c \u0431\u043e\u0442\u043e\u043c @my_id_bot, \u0430 \u0437\u0430\u0442\u0435\u043c \u0434\u043e\u0431\u0430\u0432\u0438\u043b \u0442\u0443\u0434\u0430 \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0433\u043e \u0431\u043e\u0442\u0430 \u0441 \u043a\u043e\u0434\u043e\u043c, \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u043c \u0432\u044b\u0448\u0435.  \u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443:</p> <p></p> <p>\u041e\u0439, \u043f\u043e\u0447\u0435\u043c\u0443-\u0442\u043e \u0431\u043e\u0442 \u043e\u0442\u0440\u0435\u0430\u0433\u0438\u0440\u043e\u0432\u0430\u043b \u0442\u0430\u043a, \u043a\u0430\u043a \u0431\u0443\u0434\u0442\u043e \u0435\u0433\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0447\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u043b\u0438, \u0445\u043e\u0442\u044f \u0432\u0440\u043e\u0434\u0435 \u043a\u0430\u043a \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c.  \u041d\u0430 \u0434\u0435\u043b\u0435, \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u044b \u0432 \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0443 \u0434\u043b\u044f \u0431\u043e\u0442\u0430 \u0432\u044b\u0433\u043b\u044f\u0434\u0438\u0442 \u043a\u0430\u043a \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u043d\u043e\u0432\u044b\u0439 \u0447\u0430\u0442. \u041a \u0441\u0447\u0430\u0441\u0442\u044c\u044e, \u0432  \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0431\u043e\u0442\u0443 \u0442\u0430\u043a\u0436\u0435 \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442 \u0430\u043f\u0434\u0435\u0439\u0442 \u0442\u0438\u043f\u0430 Message \u0441 \u043d\u0435\u043f\u0443\u0441\u0442\u044b\u043c\u0438 \u043f\u043e\u043b\u044f\u043c\u0438  <code>migrate_from_chat_id</code> \u0438 <code>migrate_to_chat_id</code>. \u0410 \u0434\u0430\u043b\u044c\u0448\u0435 \u0434\u0435\u043b\u043e \u0437\u0430 \u043c\u0430\u043b\u044b\u043c: \u043f\u0440\u0438 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043d\u0438\u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f <code>my_chat_member</code>  \u043d\u0430 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0432 \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0443 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c, \u0447\u0442\u043e \u0437\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0435 \u0432\u0440\u0435\u043c\u044f (\u0441\u043a\u0430\u0436\u0435\u043c, \u0437\u0430 \u043f\u0430\u0440\u0443 \u0441\u0435\u043a\u0443\u043d\u0434) \u043d\u0435 \u0431\u044b\u043b\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439  \u0441 \u043d\u0435\u043f\u0443\u0441\u0442\u044b\u043c \u043f\u043e\u043b\u0435\u043c <code>migrate_to_chat_id</code>.</p> <p>\u0420\u0435\u0448\u0435\u043d\u0438\u0435 \u043f\u0440\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0432\u044b\u0448\u0435 \u043f\u0440\u0438\u043c\u0435\u0440\u044b \u0438 \u0431\u043e\u043b\u0435\u0435 \u0442\u043e\u0433\u043e, \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043e \u0432 \u043c\u043e\u0451\u043c @my_id_bot:  \u0432\u043e\u0442 \u0442\u0430\u043a (\u0437\u0432\u0451\u0437\u0434\u043e\u0447\u043a\u0438 \u043d\u0430 \u0433\u0438\u0442\u0445\u0430\u0431\u0435 \u0432\u0441\u044f\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0442\u0441\u044f)</p> <p>\u0413\u0440\u0443\u043f\u043f\u044b \u0438 \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u044b</p> <p>\u0412\u043e\u043f\u0440\u0435\u043a\u0438 \u0447\u0430\u0441\u0442\u043e\u043c\u0443 \u0437\u0430\u0431\u043b\u0443\u0436\u0434\u0435\u043d\u0438\u044e, \u043e\u0431\u044b\u0447\u043d\u044b\u0435 \u0433\u0440\u0443\u043f\u043f\u044b \u043f\u043e-\u043f\u0440\u0435\u0436\u043d\u0435\u043c\u0443 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0438 \u043d\u0438\u043a\u0443\u0434\u0430 \u0438\u0441\u0447\u0435\u0437\u0430\u0442\u044c \u043d\u0435 \u0441\u043e\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f. \u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435  \u043a\u043b\u0438\u0435\u043d\u0442\u044b Telegram \u0438\u0441\u0445\u043e\u0434\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u044e\u0442 \u0438\u043c\u0435\u043d\u043d\u043e \u043e\u0431\u044b\u0447\u043d\u0443\u044e \u0433\u0440\u0443\u043f\u043f\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043d\u0435\u044f\u0432\u043d\u043e \u043f\u0440\u0438 \u043d\u0430\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u0438 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0441\u043e\u0431\u044b\u0442\u0438\u044f  \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0432 \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0443. \u0418 \u0435\u0441\u0442\u044c \u0441\u0435\u0440\u044c\u0451\u0437\u043d\u044b\u0435 \u043f\u043e\u0434\u043e\u0437\u0440\u0435\u043d\u0438\u044f, \u0447\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0433\u043e\u0434\u044b \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0441\u044f,  \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u0432 \u0441\u0432\u0435\u0442\u0435 \u0442\u043e\u0433\u043e, \u0447\u0442\u043e \u043d\u0430 \u043e\u0431\u044b\u0447\u043d\u044b\u0435 (\u043d\u0435-\u043f\u0440\u0435\u043c\u0438\u0443\u043c) \u0443\u0447\u0451\u0442\u043a\u0438 \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u043b\u0438\u043c\u0438\u0442 \u043d\u0430 \u0443\u0447\u0430\u0441\u0442\u0438\u0435 \u0432 500 \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0430\u0445 \u0438 \u043a\u0430\u043d\u0430\u043b\u0430\u0445  \u0441\u0443\u043c\u043c\u0430\u0440\u043d\u043e.</p> <p>\u041f\u0440\u0438 \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0438, \u043f\u043e\u043c\u0438\u043c\u043e \u0441\u043c\u0435\u043d\u044b ID \u0447\u0430\u0442\u0430, \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 \u0442\u0430\u043a\u0436\u0435 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0431\u043e\u0447\u043d\u044b\u0435 \u044d\u0444\u0444\u0435\u043a\u0442\u044b, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 \u0437\u0430\u0447\u0430\u0441\u0442\u0443\u044e \u043f\u0440\u043e\u0449\u0435 \u0432\u0441\u0435\u0433\u043e  \u043f\u043e\u0441\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0433\u0440\u0443\u043f\u043f\u044b \u0441\u0440\u0430\u0437\u0443 \u0435\u0451 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u043e\u0439, \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043e\u043a\u043e\u043d\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u0430\u0439\u0434\u0438 \u0438 \u043d\u0435 \u043f\u0430\u0440\u0438\u0442\u044c\u0441\u044f.  \u041f\u043e\u043b\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439, \u043f\u0440\u0438\u0432\u043e\u0434\u044f\u0449\u0438\u0439 \u043a \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0438 \u0433\u0440\u0443\u043f\u043f\u044b \u0432 \u0441\u0443\u043f\u0435\u0440\u0433\u0440\u0443\u043f\u043f\u0443, \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0437\u0434\u0435\u0441\u044c:  https://t.me/tgbeta/3424.</p>"},{"location":"special-updates/#chat-member","title":"\u0410\u043f\u0434\u0435\u0439\u0442 chat_member","text":"<p>\u041f\u0435\u0440\u0432\u0430\u044f \u0438 \u0441\u0430\u043c\u0430\u044f \u0447\u0430\u0441\u0442\u0430\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0443 \u043d\u043e\u0432\u0438\u0447\u043a\u043e\u0432 \u043f\u0440\u0438 \u0440\u0430\u0431\u043e\u0442\u0435 \u0441 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u043c <code>chat_member</code>: \u00ab\u043a\u0430\u043a, \u0431\u043b\u0438\u043d, \u0435\u0433\u043e \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0432 \u0431\u043e\u0442\u0435?\u00bb.  \u0414\u0435\u043b\u043e \u0432 \u0442\u043e\u043c, \u0447\u0442\u043e \u044d\u0442\u043e\u0442 \u0442\u0438\u043f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0422\u0435\u043b\u0435\u0433\u0440\u0430\u043c\u043e\u043c, \u0438 \u0447\u0442\u043e\u0431\u044b Bot API \u043f\u0440\u0438\u0441\u044b\u043b\u0430\u043b \u0430\u043f\u0434\u0435\u0439\u0442, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e  \u044f\u0432\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u043e\u0431 \u044d\u0442\u043e\u043c \u0441\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u0432 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u0435 <code>allowed_updates</code> \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432 \u043f\u043e\u043b\u043b\u0438\u043d\u0433\u043e\u043c (\u043c\u0435\u0442\u043e\u0434 getUpdates)  \u0438\u043b\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0435 \u0432\u0435\u0431\u0445\u0443\u043a\u0430 (\u043c\u0435\u0442\u043e\u0434 setWebhook). \u0414\u0440\u0443\u0433\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438, Telegram \u0445\u043e\u0447\u0435\u0442 \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u043a\u0443\u0441\u043e\u043a \u043a\u043e\u0434\u0430:</p> <pre><code># \u0438\u043c\u043f\u043e\u0440\u0442\u044b\n\nasync def main():\n    # \u0442\u0443\u0442 \u043a\u043e\u0434\n    dp = Dispatcher()\n    bot = Bot(\"\u0442\u043e\u043a\u0435\u043d\")\n    await dp.start_polling(bot, allowed_updates=[\"message\", \"inline_query\", \"chat_member\"])\n</code></pre> <p>\u041f\u043e\u0441\u043b\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u0431\u043e\u0442\u0430 \u0442\u0435\u043b\u0435\u0433\u0430 \u043d\u0430\u0447\u043d\u0451\u0442 \u043f\u0440\u0438\u0441\u044b\u043b\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0442\u0440\u0438 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u0442\u0438\u043f\u0430 \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432.  \u041f\u0440\u043e\u0439\u0434\u0435\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u0432\u0440\u0435\u043c\u044f, \u0432\u044b \u0432 \u0441\u0432\u043e\u0451\u043c \u0431\u043e\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u043a\u043e\u043b\u0431\u044d\u043a\u043e\u0432 \u0438 \u0431\u0443\u0434\u0435\u0442\u0435 \u0434\u043e\u043b\u0433\u043e \u0433\u0430\u0434\u0430\u0442\u044c,  \u043f\u043e\u0447\u0435\u043c\u0443 \u0445\u044d\u043d\u0434\u043b\u0435\u0440 \u043d\u0430 \u043d\u0430\u0436\u0430\u0442\u0438\u0435 \u043a\u043d\u043e\u043f\u043e\u043a \u043d\u0435 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442. \u0427\u0442\u043e\u0431\u044b \u043e\u0433\u0440\u0430\u0434\u0438\u0442\u044c \u0441\u0435\u0431\u044f \u043e\u0442 \u0433\u043e\u043b\u043e\u0432\u043d\u043e\u0439 \u0431\u043e\u043b\u0438, \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 allowed_updates  \u043c\u043e\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0432\u044b\u0437\u043e\u0432 \u043c\u0435\u0442\u043e\u0434\u0430 <code>resolve_used_update_types()</code> \u043e\u0442 \u0434\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u043e\u0439\u0434\u0451\u0442 \u043f\u043e \u0432\u0441\u0435\u043c \u0440\u043e\u0443\u0442\u0435\u0440\u0430\u043c, \u0443\u0437\u043d\u0430\u0435\u0442,  \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b \u043d\u0430 \u043a\u0430\u043a\u0438\u0435 \u0442\u0438\u043f\u044b \u0435\u0441\u0442\u044c \u0432 \u043a\u043e\u0434\u0435, \u0438 \u043f\u043e\u043f\u0440\u043e\u0441\u0438\u0442\u044c Telegram \u043f\u0440\u0438\u0441\u044b\u043b\u0430\u0442\u044c \u0430\u043f\u0434\u0435\u0439\u0442\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u043e \u043d\u0438\u0445.  \u041f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f \u0447\u0442\u043e-\u0442\u043e \u0432\u0440\u043e\u0434\u0435:</p> <pre><code># \u0438\u043c\u043f\u043e\u0440\u0442\u044b\n\nasync def main():\n    # \u0442\u0443\u0442 \u043a\u043e\u0434\n    dp = Dispatcher()\n    bot = Bot(\"\u0442\u043e\u043a\u0435\u043d\")\n    await dp.start_polling(bot, allowed_updates=dp.resolve_used_update_types())\n</code></pre> <p>\u0423\u0440\u0430, \u0442\u0435\u043f\u0435\u0440\u044c \u0431\u043e\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u044d\u0442\u043e\u0442 \u0442\u0438\u043f \u0430\u043f\u0434\u0435\u0439\u0442\u043e\u0432. \u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043d\u044f\u0442\u044c, \u0447\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441 \u043d\u0438\u043c\u0438 \u0441\u0434\u0435\u043b\u0430\u0442\u044c.</p>"},{"location":"special-updates/#actualizing-admins","title":"\u0410\u043a\u0442\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0441\u043f\u0438\u0441\u043a\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u0432 \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445","text":"<p>\u0427\u0430\u0441\u0442\u0430\u044f \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0431\u043e\u0442\u043e\u0432-\u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432: \u043a\u0430\u043a \u043d\u0430 \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u043c\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043d\u0430\u043b\u043e\u0436\u0438\u0442\u044c \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0443 \u043f\u0440\u0430\u0432 \u0434\u043e\u0441\u0442\u0443\u043f\u0430.  \u041a \u043f\u0440\u0438\u043c\u0435\u0440\u0443, \u043a\u0430\u043a \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0442\u0430\u043a, \u0447\u0442\u043e\u0431\u044b \u0431\u0430\u043d\u0438\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432 \u043f\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0435 /ban \u043c\u043e\u0433\u043b\u0438 \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u044b \u0433\u0440\u0443\u043f\u043f\u044b. </p> <p>\u041f\u0435\u0440\u0432\u0430\u044f \u0438 \u043d\u0430\u0438\u0432\u043d\u0430\u044f \u043c\u044b\u0441\u043b\u044c \u2014 \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c getChatMember, \u0447\u0442\u043e\u0431\u044b \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441 \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0449\u0435\u0433\u043e \u044e\u0437\u0435\u0440\u0430 \u0432 \u0433\u0440\u0443\u043f\u043f\u0435.  \u0412\u0442\u043e\u0440\u0430\u044f \u043c\u044b\u0441\u043b\u044c \u2014 \u0437\u0430\u043a\u044d\u0448\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u043e \u0437\u043d\u0430\u043d\u0438\u0435 \u043d\u0430 \u043a\u043e\u0440\u043e\u0442\u043a\u043e\u0435 \u0432\u0440\u0435\u043c\u044f.  \u0422\u0440\u0435\u0442\u044c\u044f \u0438 \u0431\u043e\u043b\u0435\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u0430\u044f \u0438\u0434\u0435\u044f \u2014 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435 \u0431\u043e\u0442\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0430\u0434\u043c\u0438\u043d\u043e\u0432,  \u0430 \u0434\u0430\u043b\u044c\u0448\u0435 \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u0430\u043f\u0434\u0435\u0439\u0442\u044b chat_member \u043e\u0431 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0438\u0445 \u0441\u043e\u0441\u0442\u0430\u0432\u0430 \u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e.  \u0411\u043e\u0442 \u043f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u043b\u0441\u044f? \u041d\u0435 \u0431\u0435\u0434\u0430, \u0441\u043d\u043e\u0432\u0430 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0430\u043a\u0442\u0443\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c \u0441 \u043d\u0438\u043c.</p> <p>\u041d\u0430\u043f\u0438\u0448\u0435\u043c \u0440\u043e\u0443\u0442\u0435\u0440, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0431\u0443\u0434\u0435\u043c \u0441\u043b\u0435\u0434\u0438\u0442\u044c \u0437\u0430 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435\u043c \u0441\u043e\u0441\u0442\u0430\u0432\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u0432 \u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u044f\u0442\u044c \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0438\u0437\u0432\u043d\u0435 \u0441\u043f\u0438\u0441\u043e\u043a  (\u0442\u043e\u0447\u043d\u0435\u0435, \u0432 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u0445 python \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e, \u043e\u043d\u043e \u0436\u0435 Set):</p> handlers/admin_changes_in_group.py<pre><code>from aiogram import F, Router, Bot\nfrom aiogram.dispatcher.filters.chat_member_updated import \\\n    ChatMemberUpdatedFilter, KICKED, LEFT, \\\n    RESTRICTED, MEMBER, ADMINISTRATOR, CREATOR\nfrom aiogram.types import ChatMemberUpdated\n\nfrom config_reader import config\n\nrouter = Router()\nrouter.chat_member.filter(F.chat.id == config.main_chat_id)\n\n\n@router.chat_member(\n    ChatMemberUpdatedFilter(\n        member_status_changed=\n        (KICKED | LEFT | RESTRICTED | MEMBER)\n        &gt;&gt;\n        (ADMINISTRATOR | CREATOR)\n    )\n)\nasync def admin_promoted(event: ChatMemberUpdated, admins: set[int], bot: Bot):\n    admins.add(event.new_chat_member.user.id)\n    await bot.send_message(\n        event.chat.id,\n        f\"{event.new_chat_member.user.first_name} \"\n        f\"\u0431\u044b\u043b(\u0430) \u043f\u043e\u0432\u044b\u0448\u0435\u043d(\u0430) \u0434\u043e \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0430!\"\n    )\n\n\n@router.chat_member(\n    ChatMemberUpdatedFilter(\n        # \u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435 \u043d\u0430 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0440\u0435\u043b\u043e\u043a\n        # \u0418\u043b\u0438 \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u043f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u043c\u0435\u0441\u0442\u0430\u043c\u0438 \u043e\u0431\u044a\u0435\u043a\u0442\u044b \u0432 \u0441\u043a\u043e\u0431\u043a\u0430\u0445\n        member_status_changed=\n        (KICKED | LEFT | RESTRICTED | MEMBER)\n        &lt;&lt;\n        (ADMINISTRATOR | CREATOR)\n    )\n)\nasync def admin_demoted(event: ChatMemberUpdated, admins: set[int], bot: Bot):\n    admins.discard(event.new_chat_member.user.id)\n    await bot.send_message(\n        event.chat.id,\n        f\"{event.new_chat_member.user.first_name} \"\n        f\"\u0431\u044b\u043b(\u0430) \u043f\u043e\u043d\u0438\u0436\u0435\u043d(\u0430) \u0434\u043e \u043e\u0431\u044b\u0447\u043d\u043e\u0433\u043e \u044e\u0437\u0435\u0440\u0430!\"\n    )\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043d\u0430\u043f\u0438\u0448\u0435\u043c \u0434\u0440\u0443\u0433\u043e\u0439 \u0440\u043e\u0443\u0442\u0435\u0440 \u0441 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u043e\u043c \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/ban</code>. \u0412 \u0441\u0430\u043c\u043e\u043c \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u0435 \u0431\u0443\u0434\u0435\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0430\u0439\u0434\u0438  \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0449\u0435\u0433\u043e \u0432\u043e \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435 <code>admins</code> \u0438 \u0438\u0441\u0445\u043e\u0434\u044f \u0438\u0437 \u044d\u0442\u043e\u0433\u043e \u0440\u0430\u0437\u0440\u0435\u0448\u0430\u0442\u044c \u0438\u043b\u0438 \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u0442\u044c \u0431\u0430\u043d:</p> handlers/events_in_group.py<pre><code>from aiogram import Router, Bot\nfrom aiogram.dispatcher.filters.command import Command\nfrom aiogram.types import Message\n\nrouter = Router()\n\n# \u0412\u043e\u043e\u0431\u0449\u0435 \u0433\u043e\u0432\u043e\u0440\u044f, \u043c\u043e\u0436\u043d\u043e \u043d\u0430 \u0440\u043e\u0443\u0442\u0435\u0440 \u043d\u0430\u0432\u0435\u0441\u0438\u0442\u044c \u043a\u0430\u0441\u0442\u043e\u043c\u043d\u044b\u0439 \u0444\u0438\u043b\u044c\u0442\u0440\n# \u0441 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u043e\u0439, \u043b\u0435\u0436\u0438\u0442 \u043b\u0438 \u0430\u0439\u0434\u0438 \u0432\u044b\u0437\u044b\u0432\u0430\u044e\u0449\u0435\u0433\u043e \u0432\u043e \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435 admins.\n# \u0422\u043e\u0433\u0434\u0430 \u0432\u0441\u0435 \u0445\u044d\u043d\u0434\u043b\u0435\u0440\u044b \u0432 \u0440\u043e\u0443\u0442\u0435\u0440\u0435 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c\u0441\u044f\n# \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u044f \u043b\u044e\u0434\u0435\u0439 \u0438\u0437 admins, \u044d\u0442\u043e \u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442 \u043a\u043e\u0434 \u0438 \u0438\u0437\u0431\u0430\u0432\u0438\u0442 \u043e\u0442 \u043b\u0438\u0448\u043d\u0435\u0433\u043e if\n# \u041d\u043e \u0434\u043b\u044f \u043f\u0440\u0438\u043c\u0435\u0440\u0430 \u0441\u0434\u0435\u043b\u0430\u0435\u043c \u0447\u0435\u0440\u0435\u0437 if-else, \u0447\u0442\u043e\u0431\u044b \u0431\u044b\u043b\u043e \u043d\u0430\u0433\u043b\u044f\u0434\u043d\u0435\u0435\n\n\n@router.message(Command(commands=[\"ban\"]))\nasync def cmd_ban(message: Message, admins: set[int], bot: Bot):\n    if message.from_user.id not in admins:\n        await message.answer(\n            \"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u0441\u043e\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u044d\u0442\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f\"\n        )\n    else:\n        await bot.ban_chat_member(\n            chat_id=message.chat.id,\n            user_id=message.reply_to_message.from_user.id\n        )\n        await message.answer(\"\u041d\u0430\u0440\u0443\u0448\u0438\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u043d\")\n</code></pre> <p>\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u043e\u0443\u0442\u0435\u0440\u044b \u0432 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c \u0444\u0430\u0439\u043b\u0435 \u0438 \u043f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0430\u0434\u043c\u0438\u043d\u043e\u0432 \u043f\u0440\u0438 \u0441\u0442\u0430\u0440\u0442\u0435. \u0421\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u0432\u043e\u0442 \u043f\u043e\u043b\u043d\u043e\u0435  \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435, \u0432\u043c\u0435\u0441\u0442\u0435 \u0441\u043e \u0432\u0441\u0435\u043c\u0438 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u043c\u0438 \u043f\u0440\u0430\u0432\u043a\u0430\u043c\u0438.</p> bot.py<pre><code>import asyncio\nimport logging\n\nfrom aiogram import Bot, Dispatcher\n\nfrom config_reader import config\nfrom handlers import in_pm, bot_in_group, admin_changes_in_group, events_in_group\n\n\nasync def main():\n    logging.basicConfig(\n        level=logging.INFO,\n        format=\"%(asctime)s - %(levelname)s - %(name)s - %(message)s\",\n    )\n\n    dp = Dispatcher()\n    bot = Bot(config.bot_token.get_secret_value(), parse_mode=\"HTML\")\n    dp.include_router(in_pm.router)\n    dp.include_router(events_in_group.router)\n    dp.include_router(bot_in_group.router)\n    dp.include_router(admin_changes_in_group.router)\n\n    # \u041f\u043e\u0434\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043f\u0438\u0441\u043a\u0430 \u0430\u0434\u043c\u0438\u043d\u043e\u0432\n    admins = await bot.get_chat_administrators(config.main_chat_id)\n    admin_ids = {admin.user.id for admin in admins}\n\n    await dp.start_polling(bot, allowed_updates=dp.resolve_used_update_types(), admins=admin_ids)\n\n\nif __name__ == '__main__':\n    asyncio.run(main())\n</code></pre> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u043c, \u0447\u0442\u043e \u0432 \u0438\u0442\u043e\u0433\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u043b\u043e\u0441\u044c. \u041f\u0440\u043e\u0431\u0443\u0435\u043c \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/ban</code> \u043d\u0435-\u0430\u0434\u043c\u0438\u043d\u043e\u043c:</p> <p></p> <p>\u0418\u0434\u0451\u043c \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0433\u0440\u0443\u043f\u043f\u044b \u0438 \u043d\u0430\u0437\u043d\u0430\u0447\u0430\u0435\u043c \u0410\u0440\u0442\u0443\u0440\u0430 \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u043e\u043c (\u0431\u043e\u0442 \u0443\u0432\u0438\u0434\u0438\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438 \u0441\u043e\u043e\u0431\u0449\u0438\u0442 \u043e\u0431 \u044d\u0442\u043e\u043c \u0432 \u0447\u0430\u0442\u0435):</p> <p></p> <p>\u041e\u0442\u0437\u043e\u0432\u0451\u043c \u043f\u0440\u0430\u0432\u0430 \u0430\u0434\u043c\u0438\u043d\u0430 \u0443 \u043f\u043e\u0434\u043e\u043f\u044b\u0442\u043d\u043e\u0433\u043e \u043f\u0430\u0446\u0438\u0435\u043d\u0442\u0430 \u0438 \u043f\u043e\u043f\u0440\u043e\u0441\u0438\u043c \u0435\u0433\u043e \u0435\u0449\u0451 \u0440\u0430\u0437 \u0432\u044b\u0437\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u0443 <code>/ban</code>:</p> <p></p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u0432\u044b \u0437\u043d\u0430\u0435\u0442\u0435, \u043a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u044d\u0442\u0438\u043c\u0438 \u00ab\u043d\u0435\u0432\u0438\u0434\u0438\u043c\u044b\u043c\u0438\u00bb \u0430\u043f\u0434\u0435\u0439\u0442\u0430\u043c\u0438, \u0443\u0440\u0430! \u041d\u0430\u043f\u043e\u0441\u043b\u0435\u0434\u043e\u043a, \u043f\u043e\u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f  \u0441 \u0435\u0449\u0451 \u043e\u0434\u043d\u0438\u043c \u0434\u0435\u043c\u043e\u043d\u0441\u0442\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u043c \u0431\u043e\u0442\u043e\u043c, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c  \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0442\u0441\u044f \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b\u0448\u0435\u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u0448\u043a\u0438.</p>"}]}